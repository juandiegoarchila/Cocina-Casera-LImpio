{"version":3,"file":"static/js/734.bad0e70b.chunk.js","mappings":"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","sources":["utils/classNames.js","components/Admin/utilities/exportToExcel.js","components/Admin/utilities/exportToPDF.js","components/Admin/utilities/exportToCSV.js","components/Admin/utils.js","components/Admin/TablaPedidos.js","components/Admin/InteraccionesPedidos.js","components/Admin/OrderManagement.js","components/Admin/utilities/previewOrders.js","components/Admin/utilities/previewExcel.js"],"sourcesContent":["// src/utils/classNames.js\r\nexport function classNames(...classes) {\r\n  return classes.filter(Boolean).join(' ');\r\n}","import ExcelJS from 'exceljs';\r\n\r\nexport const exportToExcel = async (orders, totals, deliveryPersons, totalProteinUnits, proteins) => {\r\n  try {\r\n    const workbook = new ExcelJS.Workbook();\r\n    const worksheet = workbook.addWorksheet('Gestin de Pedidos');\r\n\r\n    const cleanText = (text) => {\r\n      if (text == null || text === undefined) return '';\r\n      if (typeof text === 'string') return text.replace(' NUEVO', '').trim();\r\n      if (typeof text === 'boolean') return text.toString();\r\n      if (typeof text === 'object' && text !== null && 'name' in text && typeof text.name === 'string') {\r\n        return text.name.replace(' NUEVO', '').trim();\r\n      }\r\n      return String(text).replace(' NUEVO', '').trim();\r\n    };\r\n\r\n    const applyThinBorder = (cell) => {\r\n      cell.border = {\r\n        top: { style: 'thin', color: { argb: 'FF000000' } },\r\n        left: { style: 'thin', color: { argb: 'FF000000' } },\r\n        bottom: { style: 'thin', color: { argb: 'FF000000' } },\r\n        right: { style: 'thin', color: { argb: 'FF000000' } },\r\n      };\r\n    };\r\n\r\n    //  1. Resumen de Protenas\r\n    worksheet.addRow(['', 'PROTENAS DEL DA']);\r\n    const proteinHeaderRow = worksheet.lastRow.number;\r\n    worksheet.mergeCells(proteinHeaderRow, 2, proteinHeaderRow, 3);\r\n    const ourHeader = worksheet.getCell(`B${proteinHeaderRow}`);\r\n    ourHeader.font = { bold: true, color: { argb: 'FFFFFFFF' } };\r\n    ourHeader.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF0066CC' } };\r\n    ourHeader.alignment = { horizontal: 'center' };\r\n\r\n    worksheet.getRow(proteinHeaderRow + 1).values = ['', 'Protena', 'Unidades', '', ''];\r\n    const proteinTableHeader = worksheet.getRow(proteinHeaderRow + 1);\r\n    proteinTableHeader.eachCell((cell, colNumber) => {\r\n      if (colNumber === 2 || colNumber === 3) {\r\n        cell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF28A745' } };\r\n        cell.font = { color: { argb: 'FFFFFFFF' }, bold: true };\r\n        cell.alignment = { horizontal: 'center' };\r\n        applyThinBorder(cell);\r\n      }\r\n      if (colNumber === 4 || colNumber === 5) {\r\n        cell.value = '';\r\n      }\r\n    });\r\n\r\n    const proteinData = proteins.length === 0\r\n      ? [{ name: '-', quantity: '-', extra: '', extraValue: '' }]\r\n      : [\r\n          ...proteins.slice(0, -2),\r\n          {\r\n            name: proteins[proteins.length - 2]?.name || '-',\r\n            quantity: proteins[proteins.length - 2]?.quantity || '-',\r\n            extra: 'TOTAL PROTENAS:',\r\n            extraValue: totalProteinUnits.toLocaleString('es-CO'),\r\n          },\r\n          {\r\n            name: proteins[proteins.length - 1]?.name || '-',\r\n            quantity: proteins[proteins.length - 1]?.quantity || '-',\r\n            extra: 'Fecha actual:',\r\n            extraValue: `${String(new Date().getDate()).padStart(2, '0')}/${String(new Date().getMonth() + 1).padStart(2, '0')}/${new Date().getFullYear()}`,\r\n          },\r\n        ];\r\n\r\n    proteinData.forEach((protein, index) => {\r\n      const row = worksheet.addRow(['', cleanText(protein.name), protein.quantity, protein.extra, protein.extraValue]);\r\n      row.eachCell((cell, colNumber) => {\r\n        if (colNumber >= 2) {\r\n          if (index >= proteinData.length - 2 || colNumber === 2 || colNumber === 3) {\r\n            applyThinBorder(cell);\r\n          }\r\n          if (colNumber === 3) {\r\n            cell.numFmt = '#,##0';\r\n            cell.alignment = { horizontal: 'right' };\r\n          }\r\n          if (colNumber === 4) cell.alignment = { horizontal: 'left' };\r\n          if (colNumber === 5) cell.alignment = { horizontal: 'right' };\r\n        }\r\n      });\r\n    });\r\n\r\n    worksheet.addRow({});\r\n    worksheet.addRow({});\r\n\r\n    //  2. Pedidos\r\n    let mealCounter = 0;\r\n    const pedidos = orders.map((order, index) => {\r\n      mealCounter += 1;\r\n      const meal = order.meals?.[0] || {};\r\n      const paymentValue = order.payment || (typeof meal.payment === 'object' && meal.payment?.name) || meal.payment || 'Efectivo';\r\n      if (!paymentValue || (typeof paymentValue === 'object' && !('name' in paymentValue))) {\r\n        console.warn(`Invalid payment data in order ${order.id || index}:`, { order, paymentValue });\r\n      }\r\n      return {\r\n        N: mealCounter,\r\n        Direccin: cleanText(meal.address?.address),\r\n        Telfono: cleanText(meal.address?.phoneNumber),\r\n        Total: order.total || 0,\r\n        MtodoDePago: cleanText(paymentValue),\r\n        Domiciliario: cleanText(order.deliveryPerson || 'Sin asignar'),\r\n      };\r\n    });\r\n\r\n    if (pedidos.length === 0) {\r\n      pedidos.push({ N: '-', Direccin: '-', Telfono: '-', Total: '-', MtodoDePago: '-', Domiciliario: '-' });\r\n    }\r\n\r\n    worksheet.columns = [\r\n      { key: 'N', width: 10 },\r\n      { key: 'Direccin', width: 30 },\r\n      { key: 'Telfono', width: 15 },\r\n      { key: 'Total', width: 15 },\r\n      { key: 'MtodoDePago', width: 15 },\r\n      { key: 'Domiciliario', width: 25 },\r\n    ];\r\n\r\n    const pedidosHeaderRow = proteinData.length + 4;\r\n    const headerRow = worksheet.getRow(pedidosHeaderRow);\r\n    headerRow.values = ['N', 'Direccin', 'Telfono', 'Total', 'Mtodo de Pago', 'Domiciliario'];\r\n    headerRow.eachCell(cell => {\r\n      cell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF0066CC' } };\r\n      cell.font = { color: { argb: 'FFFFFFFF' }, bold: true };\r\n      cell.alignment = { horizontal: 'center' };\r\n      applyThinBorder(cell);\r\n    });\r\n\r\n    pedidos.forEach(pedido => {\r\n      const row = worksheet.addRow(pedido);\r\n      row.eachCell(cell => applyThinBorder(cell));\r\n    });\r\n\r\n    worksheet.addRow({});\r\n    worksheet.addRow({});\r\n\r\n    //  3. Resumen de Totales\r\n    worksheet.addRow([]);\r\n    const resumenRow = worksheet.lastRow.number;\r\n    worksheet.getCell(`C${resumenRow}`).value = 'Resumen de Totales';\r\n    worksheet.mergeCells(`C${resumenRow}:D${resumenRow}`);\r\n    const resumenCell = worksheet.getCell(`C${resumenRow}`);\r\n    resumenCell.font = { bold: true, color: { argb: 'FFFFFFFF' } };\r\n    resumenCell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF0066CC' } };\r\n    resumenCell.alignment = { horizontal: 'center' };\r\n    applyThinBorder(resumenCell);\r\n    applyThinBorder(worksheet.getCell(`D${resumenRow}`));\r\n\r\n    const resumenData = [\r\n      ['Total Efectivo', totals.cash || 0],\r\n      ['Total Daviplata', totals.daviplata || 0],\r\n      ['Total Nequi', totals.nequi || 0],\r\n      ['Total General', (totals.cash || 0) + (totals.daviplata || 0) + (totals.nequi || 0)],\r\n    ];\r\n\r\n    resumenData.forEach(([label, value]) => {\r\n      const row = worksheet.addRow(['', '', label, value]);\r\n      row.getCell(3).alignment = { horizontal: 'left' };\r\n      row.getCell(4).alignment = { horizontal: 'right' };\r\n      row.getCell(4).numFmt = '$#,##0';\r\n      row.getCell(4).font = { bold: true };\r\n      applyThinBorder(row.getCell(3));\r\n      applyThinBorder(row.getCell(4));\r\n    });\r\n\r\n    worksheet.addRow({});\r\n    worksheet.addRow({});\r\n\r\n    //  4. Resumen por Domiciliarios\r\n    worksheet.addRow(['', 'Resumen por Domiciliarios']);\r\n    const resumenDomiciliariosRow = worksheet.lastRow.number;\r\n    worksheet.mergeCells(resumenDomiciliariosRow, 2, resumenDomiciliariosRow, 6);\r\n    const deliveryHeader = worksheet.getCell(`B${resumenDomiciliariosRow}`);\r\n    deliveryHeader.font = { bold: true, color: { argb: 'FFFFFFFF' } };\r\n    deliveryHeader.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF0066CC' } };\r\n    deliveryHeader.alignment = { horizontal: 'center' };\r\n    for (let i = 2; i <= 6; i++) applyThinBorder(worksheet.getCell(resumenDomiciliariosRow, i));\r\n\r\n    worksheet.addRow(['', 'Domiciliario', 'Efectivo', 'Daviplata', 'Nequi', 'Total']);\r\n    const domHeader = worksheet.lastRow;\r\n    domHeader.eachCell((cell, colNumber) => {\r\n      if (colNumber >= 2) {\r\n        cell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF28A745' } };\r\n        cell.font = { color: { argb: 'FFFFFFFF' }, bold: true };\r\n        cell.alignment = { horizontal: 'center' };\r\n        applyThinBorder(cell);\r\n      }\r\n    });\r\n\r\n    Object.entries(deliveryPersons).forEach(([name, data]) => {\r\n      const row = worksheet.addRow([\r\n        '',\r\n        cleanText(name),\r\n        data.cash || 0,\r\n        data.daviplata || 0,\r\n        data.nequi || 0,\r\n        data.total || 0,\r\n      ]);\r\n      row.eachCell((cell, colNumber) => {\r\n        if (colNumber >= 2) {\r\n          if (colNumber >= 3) {\r\n            cell.numFmt = '$#,##0';\r\n            cell.alignment = { horizontal: 'right' };\r\n          }\r\n          applyThinBorder(cell);\r\n        }\r\n      });\r\n    });\r\n\r\n    const buffer = await workbook.xlsx.writeBuffer();\r\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n    const link = document.createElement('a');\r\n    link.href = window.URL.createObjectURL(blob);\r\n    link.download = `pedidos_${new Date().toISOString().slice(0, 10)}.xlsx`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  } catch (error) {\r\n    console.error('Error al exportar Excel:', error);\r\n    alert('Error al generar el archivo Excel: ' + error.message);\r\n  }\r\n};","import jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\nexport const exportToPDF = async (orders, totals = {}, deliveryPersons = {}) => {\r\n  try {\r\n    const doc = new jsPDF();\r\n\r\n    const logoUrl = '/logo.png'; // Asegrate de que esta ruta sea accesible\r\n    try {\r\n      doc.addImage(logoUrl, 'PNG', 160, 10, 30, 20);\r\n    } catch (imgError) {\r\n      console.warn('No se pudo cargar el logo para el PDF:', imgError);\r\n    }\r\n\r\n    doc.setFontSize(16);\r\n    doc.text('Gestin de Pedidos', 14, 20);\r\n    doc.setFontSize(12);\r\n    const now = new Date();\r\n    const dateStr = now.toLocaleDateString('es-CO');\r\n    const timeStr = now.toLocaleTimeString('es-CO', { hour: '2-digit', minute: '2-digit', hour12: true });\r\n    doc.text(`Fecha: ${dateStr} ${timeStr}`, 14, 30);\r\n\r\nlet mealCounter = 0;\r\nconst pedidosBody = orders.map((order) => {\r\n  mealCounter += 1;\r\n  const meal = order.meals?.[0] || {};\r\n  const paymentMethod = order.payment?.name || order.payment || meal.payment?.name || meal.payment || 'Efectivo';\r\n\r\n  return [\r\n    mealCounter,\r\n    meal.address?.address || '',\r\n    meal.address?.phoneNumber || '',\r\n    `$${order.total?.toLocaleString('es-CO') || '0'}`,\r\n    paymentMethod,\r\n    order?.deliveryPerson || ''\r\n  ];\r\n});\r\n\r\nif (pedidosBody.length === 0) pedidosBody.push(Array(6).fill('-'));\r\n\r\n\r\n    if (pedidosBody.length === 0) pedidosBody.push(Array(5).fill('-'));\r\n\r\n    autoTable(doc, {\r\n      startY: 40,\r\n      head: [['N', 'Direccin', 'Telfono', 'Total', 'Domiciliario']],\r\n      body: pedidosBody,\r\n      styles: { fontSize: 8, cellPadding: 2, overflow: 'linebreak' },\r\n      headStyles: { fillColor: [0, 102, 204], textColor: 255, fontStyle: 'bold', lineWidth: 0.2, lineColor: [0, 0, 0] },\r\n      alternateRowStyles: { fillColor: [245, 245, 245] },\r\n      columnStyles: {\r\n        1: { cellWidth: 'wrap' },\r\n        3: { halign: 'right' }\r\n      },\r\n      tableLineColor: [0, 0, 0],\r\n      tableLineWidth: 0.2,\r\n      didDrawPage: (data) => {\r\n        doc.setFontSize(10);\r\n        doc.text(`Pgina ${data.pageNumber}`, 180, 287);\r\n      }\r\n    });\r\n\r\n    const finalY = doc.lastAutoTable.finalY + 10;\r\n    doc.setFontSize(14);\r\n    doc.text('Resumen de Totales', 14, finalY);\r\n\r\n    autoTable(doc, {\r\n      startY: finalY + 5,\r\n      head: [['Concepto', 'Monto']],\r\n      body: [\r\n        ['Total Efectivo', `$${totals.cash?.toLocaleString('es-CO') || '0'}`],\r\n        ['Total Daviplata', `$${totals.daviplata?.toLocaleString('es-CO') || '0'}`],\r\n        ['Total Nequi', `$${totals.nequi?.toLocaleString('es-CO') || '0'}`],\r\n        ['Total General', `$${(totals.cash + totals.daviplata + totals.nequi || 0).toLocaleString('es-CO')}`]\r\n      ],\r\n      styles: { fontSize: 10, cellPadding: 2, overflow: 'linebreak' },\r\n      headStyles: { fillColor: [0, 102, 204], textColor: 255, fontStyle: 'bold', lineWidth: 0.2, lineColor: [0, 0, 0] },\r\n      columnStyles: { 1: { halign: 'right' } },\r\n      tableLineColor: [0, 0, 0],\r\n      tableLineWidth: 0.2\r\n    });\r\n\r\n    const deliveryY = doc.lastAutoTable.finalY + 10;\r\n    doc.setFontSize(14);\r\n    doc.text('Resumen por Domiciliarios', 14, deliveryY);\r\n\r\n    const deliveryBody = Object.entries(deliveryPersons).map(([name, data]) => [\r\n      name || '',\r\n      `$${data.cash?.toLocaleString('es-CO') || '0'}`,\r\n      `$${data.daviplata?.toLocaleString('es-CO') || '0'}`,\r\n      `$${data.nequi?.toLocaleString('es-CO') || '0'}`,\r\n      `$${data.total?.toLocaleString('es-CO') || '0'}`\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: deliveryY + 5,\r\n      head: [['Domiciliario', 'Efectivo', 'Daviplata', 'Nequi', 'Total']],\r\n      body: deliveryBody.length > 0 ? deliveryBody : [['-', '-', '-', '-', '-']],\r\n      styles: { fontSize: 8, cellPadding: 2, overflow: 'linebreak' },\r\n      headStyles: { fillColor: [0, 102, 204], textColor: 255, fontStyle: 'bold', lineWidth: 0.2, lineColor: [0, 0, 0] },\r\n      columnStyles: {\r\n        1: { halign: 'right' },\r\n        2: { halign: 'right' },\r\n        3: { halign: 'right' },\r\n        4: { halign: 'right' }\r\n      },\r\n      tableLineColor: [0, 0, 0],\r\n      tableLineWidth: 0.2\r\n    });\r\n\r\n    doc.save(`pedidos_${new Date().toISOString().split('T')[0]}.pdf`);\r\n  } catch (error) {\r\n    console.error('Error al generar el PDF:', error);\r\n    alert('Error al generar el PDF: ' + error.message);\r\n  }\r\n};","export const exportToCSV = (orders, totals, deliveryPersons, setSuccess) => {\r\n  const headers = [\r\n    'ID Pedido', 'N Bandeja', 'Sopa', 'Principio', 'Protena', 'Bebida', 'Cubiertos', 'Acompaamientos', 'Adiciones', 'Notas',\r\n    'Hora de Entrega', 'Direccin', 'Tipo de Lugar', 'Nombre del Local', 'Nombre del Destinatario', 'Detalles de Unidad',\r\n    'Telfono', 'Pago (Bandeja)', 'Total (COP)', 'Pago (General)', 'Domiciliario', 'Estado', 'Fecha de Creacin', 'ltima Actualizacin'\r\n  ];\r\n\r\n  const orderRows = orders.flatMap(order => \r\n    order.meals.map((meal, index) => [\r\n      order.id, index + 1, meal.soup?.name || meal.soup || 'Sin sopa',\r\n      Array.isArray(meal.principle) ? meal.principle.map(p => p.name || p).join(', ') : meal.principle?.name || meal.principle || 'Sin principio',\r\n      meal.protein?.name || meal.protein || 'Sin protena', meal.drink?.name || meal.drink || 'Sin bebida',\r\n      meal.cutlery?.name || meal.cutlery || 'No', meal.sides?.map(s => s.name || s).join(', ') || 'Ninguno',\r\n      meal.additions?.map(a => `${a.name || ''}${a.protein || a.replacement ? ` (${a.protein || a.replacement})` : ''} (${a.quantity || 1})`).join(', ') || 'Ninguna',\r\n      meal.notes || 'Ninguna', meal.time?.name || meal.time || 'No especificada', meal.address?.address || 'Sin direccin',\r\n      meal.address?.addressType || 'No especificado', meal.address?.localName || '', meal.address?.recipientName || '',\r\n      meal.address?.unitDetails || '', meal.address?.phoneNumber || 'No especificado',\r\n      meal.payment?.name || meal.payment || 'Efectivo', `$${order.total?.toLocaleString('es-CO') || '0'}`,\r\n      order.payment || 'Efectivo', order.deliveryPerson || 'Sin asignar', order.status || 'Pendiente',\r\n      order.createdAt ? new Date(order.createdAt.seconds * 1000).toLocaleString('es-CO') : 'N/A',\r\n      order.updatedAt ? new Date(order.updatedAt.seconds * 1000).toLocaleString('es-CO') : 'N/A',\r\n    ].map(cell => `\"${String(cell || '').replace(/\"/g, '\"\"')}\"`))\r\n  );\r\n\r\n  const totalsRows = [\r\n    ['Total Efectivo', `$${totals.cash.toLocaleString('es-CO')}`],\r\n    ['Total Daviplata', `$${totals.daviplata.toLocaleString('es-CO')}`],\r\n    ['Total Nequi', `$${totals.nequi.toLocaleString('es-CO')}`],\r\n    ['Total General', `$${(totals.cash + totals.daviplata + totals.nequi).toLocaleString('es-CO')}`],\r\n  ].map(row => row.map(cell => `\"${String(cell || '').replace(/\"/g, '\"\"')}\"`));\r\n\r\n  const deliveryRows = Object.entries(deliveryPersons).map(([name, data]) => [\r\n    name, `$${data.cash.toLocaleString('es-CO')}`, `$${data.daviplata.toLocaleString('es-CO')}`, \r\n    `$${data.nequi.toLocaleString('es-CO')}`, `$${data.total.toLocaleString('es-CO')}`\r\n  ].map(cell => `\"${String(cell || '').replace(/\"/g, '\"\"')}\"`));\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...orderRows,\r\n    '',\r\n    '\"Resumen de Totales\"',\r\n    '\"Concepto\",\"Monto (COP)\"',\r\n    ...totalsRows,\r\n    '\"Resumen por Domiciliarios\"',\r\n    '\"Domiciliario\",\"Efectivo (COP)\",\"Daviplata (COP)\",\"Nequi (COP)\",\"Total (COP)\"',\r\n    ...deliveryRows,\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = `pedidos_${new Date().toISOString().split('T')[0]}.csv`;\r\n  a.click();\r\n  window.URL.revokeObjectURL(url);\r\n  setSuccess('Pedidos exportados a CSV.');\r\n};","export const cleanText = (text) => {\r\n  if (text == null) return '';\r\n  if (typeof text === 'string') return text.replace(' NUEVO', '').trim();\r\n  if (typeof text === 'boolean') return text.toString();\r\n  if (typeof text === 'object' && text?.name) return text.name.replace(' NUEVO', '').trim();\r\n  return String(text).replace(' NUEVO', '').trim();\r\n};\r\n\r\nexport const getNestedProperty = (obj, path) => {\r\n  if (!obj || !path) return '';\r\n  return path.split('.').reduce((acc, part) => (acc && acc[part] !== undefined ? acc[part] : ''), obj);\r\n};\r\n\r\nexport const getAddressDisplay = (address) => {\r\n  if (!address?.address) return 'Sin direccin';\r\n  let display = address.address;\r\n  switch (address.addressType) {\r\n    case 'school': if (address.recipientName) display += ` (Recibe: ${cleanText(address.recipientName)})`; break;\r\n    case 'complex': if (address.unitDetails) display += ` (${cleanText(address.unitDetails)})`; break;\r\n    case 'shop': if (address.localName) display += ` (${cleanText(address.localName)})`; break;\r\n    default: break;\r\n  }\r\n  return display;\r\n};\r\n\r\nexport const getMealDetailsDisplay = (meal) => {\r\n  const components = [];\r\n  const soupDisplay = meal.soupReplacement?.name || meal.soupReplacement ? `${cleanText(meal.soupReplacement?.name || meal.soupReplacement)} (por sopa)` : meal.soup?.name || meal.soup ? cleanText(meal.soup?.name || meal.soup) : 'Sin sopa';\r\n  components.push(`Sopa: ${soupDisplay}`);\r\n  let principleDisplay;\r\n  if (meal.principleReplacement?.name || meal.principleReplacement) {\r\n    principleDisplay = `${cleanText(meal.principleReplacement?.name || meal.principleReplacement)} (por principio)`;\r\n  } else if (Array.isArray(meal.principle) && meal.principle.length > 0) {\r\n    const principleNames = meal.principle.map(p => cleanText(p.name || p)).filter(Boolean);\r\n    principleDisplay = principleNames.length > 0 ? principleNames.join(', ') : 'Sin principio';\r\n  } else if (meal.principle?.name || meal.principle) {\r\n    principleDisplay = cleanText(meal.principle?.name || meal.principle);\r\n  } else {\r\n    principleDisplay = 'Sin principio';\r\n  }\r\n  components.push(`Principio: ${principleDisplay}`);\r\n  components.push(`Protena: ${meal.protein?.name || meal.protein ? cleanText(meal.protein?.name || meal.protein) : 'Sin protena'}`);\r\n  const drinkName = meal.drink?.name || meal.drink || '';\r\n  components.push(`Bebida: ${drinkName === 'Juego de mango' ? 'Jugo de mango' : cleanText(drinkName) || 'Sin bebida'}`);\r\n  components.push(`Cubiertos: ${meal.cutlery?.name === 'S' || meal.cutlery === true || meal.cutlery === 'true' ? 'S' : 'No'}`);\r\n  const sides = meal.sides?.length > 0 ? meal.sides.map(s => cleanText(s.name || s)).filter(Boolean).join(', ') : 'Ninguno';\r\n  components.push(`Acompaamientos: ${sides}`);\r\n  const additions = meal.additions?.length > 0 ? meal.additions.map(a => `${cleanText(a.name || a)}${a.protein || a.replacement ? ` (${cleanText(a.protein || a.replacement)})` : ''} (${a.quantity || 1})`).join(', ') : 'Ninguna';\r\n  components.push(`Adiciones: ${additions}`);\r\n  components.push(`Notas: ${meal.notes ? cleanText(meal.notes) : 'Ninguna'}`);\r\n  components.push(`Hora de Entrega: ${meal.time?.name || meal.time ? cleanText(meal.time?.name || meal.time) : 'No especificada'}`);\r\n  components.push(`Direccin: ${getAddressDisplay(meal.address)}`);\r\n  let addressTypeDisplay = '';\r\n  switch (meal.address?.addressType) {\r\n    case 'house': addressTypeDisplay = 'Casa/Apto'; break;\r\n    case 'school': addressTypeDisplay = 'Colegio/Oficina'; break;\r\n    case 'complex': addressTypeDisplay = 'Conjunto'; break;\r\n    case 'shop': addressTypeDisplay = 'Tienda/Local'; break;\r\n    default: addressTypeDisplay = 'No especificado'; break;\r\n  }\r\n  components.push(`Tipo de Lugar: ${addressTypeDisplay}`);\r\n  components.push(`Telfono: ${meal.address?.phoneNumber ? cleanText(meal.address.phoneNumber) : 'No especificado'}`);\r\n  if (meal.address?.addressType === 'shop' && meal.address?.localName) components.push(`Nombre del Local: ${cleanText(meal.address.localName)}`);\r\n  if (meal.address?.addressType === 'school' && meal.address?.recipientName) components.push(`Recibe: ${cleanText(meal.address.recipientName)}`);\r\n  if (meal.address?.addressType === 'complex' && meal.address?.unitDetails) components.push(`Unidad: ${cleanText(meal.address.unitDetails)}`);\r\n  components.push(`Pago: ${meal.payment?.name || meal.payment ? cleanText(meal.payment?.name || meal.payment) : 'Efectivo'}`);\r\n  return components.join('\\n');\r\n};\r\n\r\nexport const areMealsIdentical = (meals) => {\r\n  if (!meals || meals.length <= 1) return { areIdentical: false, count: 1 };\r\n  const fieldsToCompare = [\r\n    'soup', 'soupReplacement', 'principle', 'principleReplacement', 'protein', 'drink', 'cutlery', 'notes', 'time', 'payment',\r\n    'address.address', 'address.addressType', 'address.phoneNumber', 'address.localName', 'address.recipientName', 'address.unitDetails', 'sides', 'additions'\r\n  ];\r\n  const getMealSignature = (meal) => {\r\n    return fieldsToCompare.map(field => {\r\n      const value = getNestedProperty(meal, field);\r\n      if (field === 'sides' && Array.isArray(value)) return value.map(s => cleanText(s.name || s)).sort().join(',');\r\n      if (field === 'additions' && Array.isArray(value)) return value.map(a => `${cleanText(a.name || a)}${a.protein || a.replacement ? `:${cleanText(a.protein || a.replacement)}` : ''}:${a.quantity || 1}`).sort().join(';');\r\n      if (field === 'principle' && Array.isArray(value)) return value.map(p => cleanText(p.name || p)).sort().join(',');\r\n      return cleanText(value);\r\n    }).join('|');\r\n  };\r\n  const firstSignature = getMealSignature(meals[0]);\r\n  const areIdentical = meals.every(meal => getMealSignature(meal) === firstSignature);\r\n  return { areIdentical, count: meals.length };\r\n};","import React, { useRef, useEffect } from 'react'; // Import useRef and useEffect\r\nimport { classNames } from '../../utils/classNames.js';\r\nimport { cleanText, getAddressDisplay } from './utils';\r\nimport { ArrowDownTrayIcon, ChevronLeftIcon, ChevronRightIcon, InformationCircleIcon, PencilIcon, TrashIcon, EllipsisVerticalIcon, PlusIcon } from '@heroicons/react/24/outline';\r\n\r\nconst TablaPedidos = ({\r\n  theme,\r\n  orders,\r\n  searchTerm,\r\n  setSearchTerm,\r\n  totals,\r\n  isLoading,\r\n  paginatedOrders,\r\n  currentPage,\r\n  totalPages,\r\n  setCurrentPage,\r\n  itemsPerPage,\r\n  setItemsPerPage,\r\n  deliveryPersons,\r\n  handleEditOrder,\r\n  handleDeleteOrder,\r\n  handleStatusChange,\r\n  handleSort,\r\n  getSortIcon,\r\n  setShowMealDetails,\r\n  editingDeliveryId,\r\n  setEditingDeliveryId,\r\n  editForm,\r\n  setEditForm,\r\n  handleDeliveryChange,\r\n  sortOrder,\r\n  showProteinModal,\r\n  setShowProteinModal,\r\n  isMenuOpen,\r\n  setIsMenuOpen,\r\n  handleOpenPreview,\r\n  handleOpenExcelPreview,\r\n  handleExport,\r\n  handleDeleteAllOrders,\r\n  setShowConfirmDeleteAll,\r\n  exportToExcel,\r\n  exportToPDF,\r\n  exportToCSV,\r\n}) => {\r\n  const currentDate = new Date().toLocaleDateString('es-CO', {\r\n    weekday: 'long',\r\n    month: 'long',\r\n    day: 'numeric',\r\n  });\r\n\r\n  // Create a ref for the menu container\r\n  const menuRef = useRef(null);\r\n\r\n  // Effect to handle clicks outside the menu\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\r\n        setIsMenuOpen(false); // Close the menu if clicked outside\r\n      }\r\n    }\r\n\r\n    // Bind the event listener\r\n    if (isMenuOpen) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    // Unbind the event listener on cleanup\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [isMenuOpen, setIsMenuOpen]); // Re-run effect when isMenuOpen changes\r\n\r\n  return (\r\n    <>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        <h2 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6\">Gestin de Pedidos</h2>\r\n\r\n        {/* Totals Section */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 text-sm text-gray-700 dark:text-gray-300\">\r\n          <div className={classNames(\"p-3 sm:p-4 rounded-lg shadow-sm\", theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100')}>\r\n            <p className=\"font-semibold text-sm sm:text-base\">Total Efectivo</p>\r\n            <p className=\"text-lg sm:text-xl font-bold\">${totals.cash.toLocaleString('es-CO')}</p>\r\n          </div>\r\n          <div className={classNames(\"p-3 sm:p-4 rounded-lg shadow-sm\", theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100')}>\r\n            <p className=\"font-semibold text-sm sm:text-base\">Total Daviplata</p>\r\n            <p className=\"text-lg sm:text-xl font-bold\">${totals.daviplata.toLocaleString('es-CO')}</p>\r\n          </div>\r\n          <div className={classNames(\"p-3 sm:p-4 rounded-lg shadow-sm\", theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100')}>\r\n            <p className=\"font-semibold text-sm sm:text-base\">Total Nequi</p>\r\n            <p className=\"text-lg sm:text-xl font-bold\">${totals.nequi.toLocaleString('es-CO')}</p>\r\n          </div>\r\n          <div className={classNames(\"p-3 sm:p-4 rounded-lg shadow-sm\", theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100')}>\r\n            <p className=\"font-semibold text-sm sm:text-base\">Total General</p>\r\n            <p className=\"text-lg sm:text-xl font-bold\">${(totals.cash + totals.daviplata + totals.nequi).toLocaleString('es-CO')}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Search, Proteins, Date, and Menu */}\r\n        <div className=\"flex flex-wrap justify-center sm:justify-between items-center mb-6 gap-3 sm:gap-4\">\r\n          <input\r\n            type=\"text\"\r\n            value={searchTerm}\r\n            onChange={e => setSearchTerm(e.target.value)}\r\n            placeholder=\"Buscar pedidos...\"\r\n            className={classNames(\r\n              \"p-2 sm:p-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:max-w-xs shadow-sm text-sm sm:text-base transition-all duration-200\",\r\n              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-300 bg-white text-gray-900'\r\n            )}\r\n          />\r\n          <div className=\"flex flex-wrap items-center justify-center sm:justify-end gap-2\">\r\n            <button\r\n              onClick={() => setShowProteinModal(true)}\r\n              className={classNames(\r\n                \"flex items-center justify-center gap-2 px-3 py-2 sm:px-5 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0\",\r\n                theme === 'dark'\r\n                  ? 'bg-gray-600 hover:bg-gray-500 text-white border border-gray-500'\r\n                  : 'bg-gray-200 hover:bg-gray-300 text-gray-900 border border-gray-400'\r\n              )}\r\n            >\r\n              <PlusIcon className=\"w-4 h-4\" />\r\n              <span className=\"hidden md:inline\">Protenas del Da</span>\r\n            </button>\r\n            <div\r\n              className={classNames(\r\n                \"flex items-center justify-center gap-2 px-3 py-2 sm:px-5 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold shadow-sm border transition-colors duration-200 flex-shrink-0\",\r\n                theme === 'dark'\r\n                  ? 'bg-gray-700 text-white border-gray-500'\r\n                  : 'bg-gray-200 text-gray-900 border-gray-400'\r\n              )}\r\n            >\r\n              {currentDate}\r\n            </div>\r\n            {/* Added ref to the menu container */}\r\n            <div className=\"relative z-50 flex-shrink-0\" ref={menuRef}>\r\n              <button\r\n                onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n                className={classNames(\r\n                  \"flex items-center justify-center p-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200\",\r\n                  // Removed background and hover background classes to make it transparent\r\n                  // Removed text color classes to inherit from parent, or set explicitly if needed\r\n                  // Added focus ring for accessibility\r\n                  'focus:outline-none focus:ring-2 focus:ring-blue-500'\r\n                )}\r\n                aria-label=\"Opciones de men\"\r\n              >\r\n                <EllipsisVerticalIcon\r\n                  className={classNames(\r\n                    \"w-6 h-6\",\r\n                    theme === 'dark' ? 'text-gray-200 hover:text-white' : 'text-gray-700 hover:text-gray-900' // Ensure icon color is visible\r\n                  )}\r\n                />\r\n              </button>\r\n              {isMenuOpen && (\r\n                <div className={classNames(\r\n                  \"absolute right-0 mt-2 w-48 rounded-lg shadow-xl z-50\",\r\n                  theme === 'dark' ? 'bg-gray-700 text-gray-200' : 'bg-white text-gray-900'\r\n                )}>\r\n                  <div className=\"py-1\">\r\n                    <button\r\n                      onClick={() => { handleOpenPreview(); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200\"\r\n                    >\r\n                      Vista Previa PDF\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleOpenExcelPreview(); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200\"\r\n                    >\r\n                      Vista Previa Excel\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleExport(exportToExcel, 'Excel'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center\"\r\n                    >\r\n                      <ArrowDownTrayIcon className=\"w-4 h-4 mr-2\" />\r\n                      Exportar Excel\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleExport(exportToPDF, 'PDF'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center\"\r\n                    >\r\n                      <ArrowDownTrayIcon className=\"w-4 h-4 mr-2\" />\r\n                      Exportar PDF\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleExport(exportToCSV, 'CSV'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center\"\r\n                    >\r\n                      <ArrowDownTrayIcon className=\"w-4 h-4 mr-2\" />\r\n                      Exportar CSV\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setShowConfirmDeleteAll(true); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 text-red-500\"\r\n                    >\r\n                      Eliminar Todos\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Orders Table */}\r\n        <div className={classNames(\r\n          \"p-3 sm:p-4 rounded-2xl shadow-xl max-h-[70vh] overflow-y-auto custom-scrollbar transition-all duration-300\",\r\n          theme === 'dark' ? 'bg-gray-800' : 'bg-white'\r\n        )}>\r\n          {isLoading ? (\r\n            <div className=\"flex justify-center items-center h-40\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500\"></div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full text-left border-collapse text-sm\">\r\n                  <thead>\r\n                    <tr className={classNames(\r\n                      \"font-semibold sticky top-0 z-10 shadow-sm\",\r\n                      theme === 'dark' ? 'bg-gray-700 text-gray-200' : 'bg-gray-100 text-gray-700'\r\n                    )}>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('orderNumber')}>\r\n                        N {getSortIcon('orderNumber')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b whitespace-nowrap\">Detalles</th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('meals.0.address.address')}>\r\n                        Direccin {getSortIcon('meals.0.address.address')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('meals.0.address.phoneNumber')}>\r\n                        Telfono {getSortIcon('meals.0.address.phoneNumber')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('meals.0.time.name')}>\r\n                        Hora {getSortIcon('meals.0.time.name')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('payment')}>\r\n                        Pago {getSortIcon('payment')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('total')}>\r\n                        Total {getSortIcon('total')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('deliveryPerson')}>\r\n                        Domiciliario {getSortIcon('deliveryPerson')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('status')}>\r\n                        Estado {getSortIcon('status')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b whitespace-nowrap\">Acciones</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {paginatedOrders.length === 0 ? (\r\n                      <tr>\r\n                        <td colSpan=\"10\" className=\"p-6 text-center text-gray-500 dark:text-gray-400\">\r\n                          No se encontraron pedidos. Intenta ajustar tu bsqueda o filtros.\r\n                        </td>\r\n                      </tr>\r\n                    ) : (\r\n                      paginatedOrders.map((order, index) => {\r\n                        const displayNumber = sortOrder === 'asc'\r\n                          ? (currentPage - 1) * itemsPerPage + index + 1\r\n                          : paginatedOrders.length - ((currentPage - 1) * itemsPerPage + index);\r\n                        const addressDisplay = getAddressDisplay(order.meals?.[0]?.address);\r\n                        const paymentDisplay = cleanText(order.payment || order.meals?.[0]?.payment?.name || order.meals?.[0]?.payment || 'Sin pago');\r\n                        const statusClass = order.status === 'Pendiente' ? 'bg-yellow-500 text-black' : order.status === 'Entregado' ? 'bg-green-500 text-white' : order.status === 'Cancelado' ? 'bg-red-500 text-white' : '';\r\n\r\n                        return (\r\n                          <tr\r\n                            key={order.id}\r\n                            className={classNames(\r\n                              \"border-b transition-colors duration-150\",\r\n                              theme === 'dark' ? 'border-gray-700 hover:bg-gray-700' : 'border-gray-200 hover:bg-gray-50',\r\n                              index % 2 === 0 ? (theme === 'dark' ? 'bg-gray-750' : 'bg-gray-50') : ''\r\n                            )}\r\n                          >\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300 font-semibold whitespace-nowrap\">{displayNumber}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300\">\r\n                              <div className=\"flex items-center justify-center h-full\">\r\n                                <button\r\n                                  onClick={() => setShowMealDetails(order)}\r\n                                  className=\"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md\"\r\n                                  title=\"Ver detalles de la bandeja\"\r\n                                  aria-label={`Ver detalles del pedido ${order.id}`}\r\n                                >\r\n                                  <InformationCircleIcon className=\"w-5 h-5\" />\r\n                                </button>\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300 max-w-[150px] sm:max-w-[200px] truncate\" title={addressDisplay}>{addressDisplay}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap\">{cleanText(order.meals?.[0]?.address?.phoneNumber)}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap\">{cleanText(order.meals?.[0]?.time?.name || order.meals?.[0]?.time)}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap\">{paymentDisplay}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300 font-medium whitespace-nowrap\">${order.total?.toLocaleString('es-CO') || '0'}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap\">\r\n                              {editingDeliveryId === order.id ? (\r\n                                <input\r\n                                  type=\"text\"\r\n                                  value={editForm.deliveryPerson || ''}\r\n                                  onChange={(e) => setEditForm({ ...editForm, deliveryPerson: e.target.value })}\r\n                                  onBlur={(e) => handleDeliveryChange(order.id, e.target.value)}\r\n                                  onKeyPress={(e) => e.key === 'Enter' && handleDeliveryChange(order.id, e.target.value)}\r\n                                  className={classNames(\r\n                                    \"w-full p-1 sm:p-2 rounded-lg border text-xs sm:text-sm\",\r\n                                    theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-300 bg-gray-200 text-gray-900',\r\n                                    \"focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                  )}\r\n                                  autoFocus\r\n                                  aria-label={`Editar domiciliario para pedido ${order.id}`}\r\n                                />\r\n                              ) : (\r\n                                <span\r\n                                  onClick={() => { setEditingDeliveryId(order.id); setEditForm(prev => ({ ...prev, deliveryPerson: order.deliveryPerson || '' })); }}\r\n                                  className=\"cursor-pointer hover:underline\"\r\n                                  title=\"Click para editar\"\r\n                                >\r\n                                  {order.deliveryPerson || 'Sin asignar'}\r\n                                </span>\r\n                              )}\r\n                            </td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-900 dark:text-gray-300 whitespace-nowrap\">\r\n                              <select\r\n                                value={order.status || 'Pendiente'}\r\n                                onChange={(e) => handleStatusChange(order.id, e.target.value)}\r\n                                className={classNames(\r\n                                  \"p-1 sm:p-2 rounded-lg text-xs font-medium border focus:outline-none focus:ring-2 focus:ring-blue-500\",\r\n                                  statusClass,\r\n                                  theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-300 bg-white text-gray-900'\r\n                                )}\r\n                                aria-label={`Cambiar estado del pedido ${order.id}`}\r\n                              >\r\n                                <option value=\"Pendiente\">Pendiente</option>\r\n                                <option value=\"En Preparacin\">En Preparacin</option>\r\n                                <option value=\"En Camino\">En Camino</option>\r\n                                <option value=\"Entregado\">Entregado</option>\r\n                                <option value=\"Cancelado\">Cancelado</option>\r\n                              </select>\r\n                            </td>\r\n                            <td className=\"p-2 sm:p-3 flex space-x-1 sm:space-x-2 items-center\">\r\n                              <button\r\n                                onClick={() => handleEditOrder(order)}\r\n                                className=\"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md\"\r\n                                title=\"Editar pedido\"\r\n                                aria-label={`Editar pedido ${order.id}`}\r\n                              >\r\n                                <PencilIcon className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleDeleteOrder(order.id)}\r\n                                className=\"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md\"\r\n                                title=\"Eliminar pedido\"\r\n                                aria-label={`Eliminar pedido ${order.id}`}\r\n                              >\r\n                                <TrashIcon className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n\r\n              {/* Pagination */}\r\n              <div className=\"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">Pedidos por pgina:</span>\r\n                  <select\r\n                    value={itemsPerPage}\r\n                    onChange={e => { setItemsPerPage(Number(e.target.value)); setCurrentPage(1); }}\r\n                    className={classNames(\r\n                      \"p-1 sm:p-2 rounded-lg border text-sm\",\r\n                      theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-300 bg-white text-gray-900'\r\n                    )}\r\n                    aria-label=\"Seleccionar nmero de pedidos por pgina\"\r\n                  >\r\n                    <option value={10}>10</option>\r\n                    <option value={20}>20</option>\r\n                    <option value={30}>30</option>\r\n                    <option value={50}>50</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n                    disabled={currentPage === 1}\r\n                    className={classNames(\r\n                      \"p-2 rounded-lg transition-all duration-200\",\r\n                      currentPage === 1 ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700 text-white'\r\n                    )}\r\n                    aria-label=\"Pgina anterior\"\r\n                  >\r\n                    <ChevronLeftIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    Pgina {currentPage} de {totalPages}\r\n                  </span>\r\n                  <button\r\n                    onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n                    disabled={currentPage === totalPages}\r\n                    className={classNames(\r\n                      \"p-2 rounded-lg transition-all duration-200\",\r\n                      currentPage === totalPages ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700 text-white'\r\n                    )}\r\n                    aria-label=\"Pgina siguiente\"\r\n                  >\r\n                    <ChevronRightIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Summary by Delivery Persons */}\r\n        <div className=\"mt-8\">\r\n          <h3 className=\"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4\">Resumen por Domiciliarios</h3>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n            {Object.keys(deliveryPersons).length === 0 ? (\r\n              <p className=\"col-span-full text-center text-gray-500 dark:text-gray-400 p-4\">No hay datos de domiciliarios disponibles.</p>\r\n            ) : (\r\n              Object.entries(deliveryPersons).map(([name, totals]) => (\r\n                <div key={name} className={classNames(\r\n                  \"p-4 sm:p-5 rounded-lg shadow-md\",\r\n                  theme === 'dark' ? 'bg-gray-700 text-gray-200' : 'bg-gray-100 text-gray-700'\r\n                )}>\r\n                  <p className=\"font-semibold text-lg mb-2\">{name}</p>\r\n                  <p className=\"text-sm sm:text-base\">Efectivo: <span className=\"font-medium\">${totals.cash.toLocaleString('es-CO')}</span></p>\r\n                  <p className=\"text-sm sm:text-base\">Daviplata: <span className=\"font-medium\">${totals.daviplata.toLocaleString('es-CO')}</span></p>\r\n                  <p className=\"text-sm sm:text-base\">Nequi: <span className=\"font-medium\">${totals.nequi.toLocaleString('es-CO')}</span></p>\r\n                  <p className=\"text-base font-bold mt-2\">Total: <span className=\"text-blue-500\">${totals.total.toLocaleString('es-CO')}</span></p>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TablaPedidos;","import React, { useState } from 'react';\r\nimport { Dialog, Transition } from '@headlessui/react';\r\nimport { XMarkIcon, TrashIcon, PencilIcon } from '@heroicons/react/24/outline';\r\nimport { classNames } from '../../utils/classNames';\r\nimport { getMealDetailsDisplay, areMealsIdentical } from './utils';\r\nimport { db } from '../../config/firebase';\r\nimport { deleteDoc, doc, updateDoc } from 'firebase/firestore';\r\n\r\nconst InteraccionesPedidos = ({\r\n  theme,\r\n  showProteinModal,\r\n  setShowProteinModal,\r\n  newProtein,\r\n  setNewProtein,\r\n  handleAddProtein,\r\n  proteins,\r\n  totalProteinUnits,\r\n  isLoading,\r\n  showMealDetails,\r\n  setShowMealDetails,\r\n  editingOrder,\r\n  setEditingOrder,\r\n  editForm,\r\n  handleMealFormFieldChange,\r\n  handleSaveEdit,\r\n  showConfirmDeleteAll,\r\n  setShowConfirmDeleteAll,\r\n  confirmText,\r\n  setConfirmText,\r\n  handleDeleteAllOrders,\r\n  setError,\r\n  setSuccess,\r\n}) => {\r\n  const [editingProtein, setEditingProtein] = useState(null);\r\n\r\n  const handleDeleteProtein = async (proteinId) => {\r\n    try {\r\n      await deleteDoc(doc(db, 'dailyProteins', proteinId));\r\n      setSuccess('Protena eliminada correctamente.');\r\n    } catch (error) {\r\n      setError(`Error al eliminar protena: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleEditProtein = (protein) => {\r\n    setEditingProtein(protein);\r\n  };\r\n\r\n  const handleUpdateProtein = async () => {\r\n    if (!editingProtein.name || !editingProtein.quantity) {\r\n      setError('El nombre y la cantidad son obligatorios.');\r\n      return;\r\n    }\r\n    try {\r\n      await updateDoc(doc(db, 'dailyProteins', editingProtein.id), {\r\n        name: editingProtein.name,\r\n        quantity: Number(editingProtein.quantity),\r\n      });\r\n      setSuccess('Protena actualizada correctamente.');\r\n      setEditingProtein(null);\r\n    } catch (error) {\r\n      setError(`Error al actualizar protena: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingProtein(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Dilogo para gestionar protenas */}\r\n      <Transition show={showProteinModal} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => { setShowProteinModal(false); setEditingProtein(null); }}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-md p-6 rounded-lg shadow-md\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <Dialog.Title className=\"text-lg font-medium\">\r\n                    {editingProtein ? 'Editar Protena' : 'Gestionar Protenas'}\r\n                  </Dialog.Title>\r\n                  <button\r\n                    onClick={() => { setShowProteinModal(false); setEditingProtein(null); }}\r\n                    className=\"text-gray-500 hover:text-gray-400\"\r\n                    aria-label=\"Cerrar modal\"\r\n                  >\r\n                    <XMarkIcon classbeca=\"w-5 h-5\" />\r\n                  </button>\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                  {editingProtein ? (\r\n                    <>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingProtein.name}\r\n                          onChange={e => setEditingProtein({ ...editingProtein, name: e.target.value })}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                          placeholder=\"Ej: Pollo\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Cantidad</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={editingProtein.quantity}\r\n                          onChange={e => setEditingProtein({ ...editingProtein, quantity: e.target.value })}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                          placeholder=\"Ej: 50\"\r\n                          min=\"0\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex justify-end gap-2\">\r\n                        <button\r\n                          onClick={handleCancelEdit}\r\n                          className={classNames(\r\n                            \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                            theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                          )}\r\n                        >\r\n                          Cancelar\r\n                        </button>\r\n                        <button\r\n                          onClick={handleUpdateProtein}\r\n                          disabled={isLoading}\r\n                          className={classNames(\r\n                            \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                            isLoading ? 'bg-gray-400 cursor-not-allowed' : theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'\r\n                          )}\r\n                        >\r\n                          {isLoading ? 'Guardando...' : 'Actualizar'}\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={newProtein.name}\r\n                          onChange={e => setNewProtein({ ...newProtein, name: e.target.value })}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                          placeholder=\"Ej: Pollo\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Cantidad</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={newProtein.quantity}\r\n                          onChange={e => setNewProtein({ ...newProtein, quantity: e.target.value })}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                          placeholder=\"Ej: 50\"\r\n                          min=\"0\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex justify-end gap-2\">\r\n                        <button\r\n                          onClick={() => setShowProteinModal(false)}\r\n                          className={classNames(\r\n                            \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                            theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                          )}\r\n                        >\r\n                          Cancelar\r\n                        </button>\r\n                        <button\r\n                          onClick={handleAddProtein}\r\n                          disabled={isLoading}\r\n                          className={classNames(\r\n                            \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                            isLoading ? 'bg-gray-400 cursor-not-allowed' : theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'\r\n                          )}\r\n                        >\r\n                          {isLoading ? 'Guardando...' : 'Agregar'}\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                <div className=\"mt-6\">\r\n                  <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Protenas Registradas (Total: {totalProteinUnits} unidades)</h3>\r\n                  {proteins.length === 0 ? (\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">No hay protenas registradas.</p>\r\n                  ) : (\r\n                    <ul className=\"space-y-2\">\r\n                      {proteins.map(protein => (\r\n                        <li\r\n                          key={protein.id}\r\n                          className={classNames(\r\n                            \"flex justify-between items-center p-2 rounded-md\",\r\n                            theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100'\r\n                          )}\r\n                        >\r\n                          <span className=\"text-sm\">{protein.name}: {protein.quantity} unidades</span>\r\n                          <div className=\"flex gap-2\">\r\n                            <button\r\n                              onClick={() => handleEditProtein(protein)}\r\n                              className=\"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md\"\r\n                              title=\"Editar protena\"\r\n                              aria-label={`Editar ${protein.name}`}\r\n                            >\r\n                              <PencilIcon className=\"w-4 h-4\" />\r\n                            </button>\r\n                            <button\r\n                              onClick={() => handleDeleteProtein(protein.id)}\r\n                              className=\"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md\"\r\n                              title=\"Eliminar protena\"\r\n                              aria-label={`Eliminar ${protein.name}`}\r\n                            >\r\n                              <TrashIcon className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n\r\n      {/* Dilogo para detalles del pedido */}\r\n      <Transition show={showMealDetails !== null} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowMealDetails(null)}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4 flex justify-between items-center\">\r\n                  Detalles del Pedido\r\n                  <button\r\n                    onClick={() => setShowMealDetails(null)}\r\n                    className=\"text-gray-500 hover:text-gray-400\"\r\n                    aria-label=\"Cerrar detalles\"\r\n                  >\r\n                    <XMarkIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </Dialog.Title>\r\n                {showMealDetails && (\r\n                  <div className=\"space-y-4 text-sm\">\r\n                    {areMealsIdentical(showMealDetails.meals).areIdentical ? (\r\n                      <div>\r\n                        <h3 className=\"font-medium\">Bandeja (x{areMealsIdentical(showMealDetails.meals).count})</h3>\r\n                        <pre className=\"whitespace-pre-wrap\">{getMealDetailsDisplay(showMealDetails.meals[0])}</pre>\r\n                      </div>\r\n                    ) : (\r\n                      showMealDetails.meals.map((meal, index) => (\r\n                        <div key={index}>\r\n                          <h3 className=\"font-medium\">Bandeja {index + 1}</h3>\r\n                          <pre className=\"whitespace-pre-wrap\">{getMealDetailsDisplay(meal)}</pre>\r\n                        </div>\r\n                      ))\r\n                    )}\r\n                    <p className=\"font-medium\">Total: ${showMealDetails.total?.toLocaleString('es-CO') || '0'}</p>\r\n                    <p className=\"font-medium\">Estado: {showMealDetails.status || 'Pendiente'}</p>\r\n                    <p className=\"font-medium\">Domiciliario: {showMealDetails.deliveryPerson || 'Sin asignar'}</p>\r\n                  </div>\r\n                )}\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n\r\n      {/* Dilogo para editar pedido */}\r\n      <Transition show={editingOrder !== null} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setEditingOrder(null)}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4 flex justify-between items-center\">\r\n                  Editar Pedido\r\n                  <button\r\n                    onClick={() => setEditingOrder(null)}\r\n                    className=\"text-gray-500 hover:text-gray-400\"\r\n                    aria-label=\"Cerrar edicin\"\r\n                  >\r\n                    <XMarkIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </Dialog.Title>\r\n                {editForm.meals.map((meal, mealIndex) => (\r\n                  <div key={mealIndex} className=\"mb-6 p-4 border rounded-md border-gray-200 dark:border-gray-600\">\r\n                    <h3 className=\"font-medium mb-2\">Bandeja {mealIndex + 1}</h3>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Sopa</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.soup?.name || meal.soup || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'soup', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Reemplazo de Sopa</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.soupReplacement?.name || meal.soupReplacement || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'soupReplacement', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Principio</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={Array.isArray(meal.principle) ? meal.principle.map(p => p.name || p).join(', ') : meal.principle?.name || meal.principle || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'principle', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Reemplazo de Principio</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.principleReplacement?.name || meal.principleReplacement || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'principleReplacement', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Protena</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.protein?.name || meal.protein || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'protein', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Bebida</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.drink?.name || meal.drink || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'drink', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Cubiertos</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.cutlery?.name || meal.cutlery || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'cutlery', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Acompaamientos</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.sides?.map(s => s.name || s).join(', ') || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'sides', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Adiciones</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.additions?.map(a => `${a.name}${a.protein || a.replacement ? `,${a.protein || a.replacement}` : ''}${a.quantity ? `,${a.quantity}` : ''}`).join('; ') || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'additions', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Notas</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.notes || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'notes', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Hora de Entrega</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.time?.name || meal.time || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'time', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Direccin</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.address?.address || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'address.address', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Telfono</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.address?.phoneNumber || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'address.phoneNumber', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Tipo de Direccin</label>\r\n                        <select\r\n                          value={meal.address?.addressType || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'address.addressType', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        >\r\n                          <option value=\"\">Seleccione</option>\r\n                          <option value=\"house\">Casa/Apto</option>\r\n                          <option value=\"school\">Colegio/Oficina</option>\r\n                          <option value=\"complex\">Conjunto</option>\r\n                          <option value=\"shop\">Tienda/Local</option>\r\n                        </select>\r\n                      </div>\r\n                      {meal.address?.addressType === 'shop' && (\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre del Local</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={meal.address?.localName || ''}\r\n                            onChange={e => handleMealFormFieldChange(mealIndex, 'address.localName', e.target.value)}\r\n                            className={classNames(\r\n                              \"w-full p-2 rounded-md border text-sm\",\r\n                              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                              \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                            )}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                      {meal.address?.addressType === 'school' && (\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre del Recipiente</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={meal.address?.recipientName || ''}\r\n                            onChange={e => handleMealFormFieldChange(mealIndex, 'address.recipientName', e.target.value)}\r\n                            className={classNames(\r\n                              \"w-full p-2 rounded-md border text-sm\",\r\n                              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                              \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                            )}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                      {meal.address?.addressType === 'complex' && (\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Detalles de la Unidad</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={meal.address?.unitDetails || ''}\r\n                            onChange={e => handleMealFormFieldChange(mealIndex, 'address.unitDetails', e.target.value)}\r\n                            className={classNames(\r\n                              \"w-full p-2 rounded-md border text-sm\",\r\n                              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                              \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                            )}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Mtodo de Pago</label>\r\n                        <select\r\n                          value={meal.payment?.name || meal.payment || 'Efectivo'}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'payment', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        >\r\n                          <option value=\"Efectivo\">Efectivo</option>\r\n                          <option value=\"Daviplata\">Daviplata</option>\r\n                          <option value=\"Nequi\">Nequi</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                <div className=\"mt-4\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Total</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={editForm.total || ''}\r\n                    onChange={e => setEditForm({ ...editForm, total: Number(e.target.value) })}\r\n                    className={classNames(\r\n                      \"w-full p-2 rounded-md border text-sm\",\r\n                      theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                      \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                    )}\r\n                  />\r\n                </div>\r\n                <div className=\"mt-4\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Estado</label>\r\n                  <select\r\n                    value={editForm.status || 'Pendiente'}\r\n                    onChange={e => setEditForm({ ...editForm, status: e.target.value })}\r\n                    className={classNames(\r\n                      \"w-full p-2 rounded-md border text-sm\",\r\n                      theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                      \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                    )}\r\n                  >\r\n                    <option value=\"Pendiente\">Pendiente</option>\r\n                    <option value=\"En Preparacin\">En Preparacin</option>\r\n                    <option value=\"En Camino\">En Camino</option>\r\n                    <option value=\"Entregado\">Entregado</option>\r\n                    <option value=\"Cancelado\">Cancelado</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"mt-4\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Domiciliario</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm.deliveryPerson || ''}\r\n                    onChange={e => setEditForm({ ...editForm, deliveryPerson: e.target.value })}\r\n                    className={classNames(\r\n                      \"w-full p-2 rounded-md border text-sm\",\r\n                      theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                      \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                    )}\r\n                  />\r\n                </div>\r\n                <div className=\"flex justify-end gap-2 mt-6\">\r\n                  <button\r\n                    onClick={() => setEditingOrder(null)}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                    )}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    onClick={handleSaveEdit}\r\n                    disabled={isLoading}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      isLoading ? 'bg-gray-400 cursor-not-allowed' : theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'\r\n                    )}\r\n                  >\r\n                    {isLoading ? 'Guardando...' : 'Guardar'}\r\n                  </button>\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n\r\n      {/* Dilogo para confirmar eliminacin de todos los pedidos */}\r\n      <Transition show={showConfirmDeleteAll} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowConfirmDeleteAll(false)}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-md p-6 rounded-lg shadow-md\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4\">Confirmar Eliminacin de Todos los Pedidos</Dialog.Title>\r\n                <p className=\"text-sm mb-4\">Esta accin no se puede deshacer. Escribe \"confirmar\" para proceder.</p>\r\n                <input\r\n                  type=\"text\"\r\n                  value={confirmText}\r\n                  onChange={e => setConfirmText(e.target.value)}\r\n                  className={classNames(\r\n                    \"w-full p-2 rounded-md border text-sm\",\r\n                    theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                    \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                  )}\r\n                  placeholder=\"Escribe 'confirmar'\"\r\n                />\r\n                <div className=\"flex justify-end gap-2 mt-4\">\r\n                  <button\r\n                    onClick={() => setShowConfirmDeleteAll(false)}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                    )}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    onClick={handleDeleteAllOrders}\r\n                    disabled={isLoading || confirmText.toLowerCase() !== 'confirmar'}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      isLoading || confirmText.toLowerCase() !== 'confirmar' ? 'bg-gray-400 cursor-not-allowed' : theme === 'dark' ? 'bg-red-600 hover:bg-red-700 text-white' : 'bg-red-500 hover:bg-red-600 text-white'\r\n                    )}\r\n                  >\r\n                    {isLoading ? 'Eliminando...' : 'Eliminar Todos'}\r\n                  </button>\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InteraccionesPedidos;","import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { db } from '../../config/firebase';\r\nimport { collection, onSnapshot, updateDoc, doc, deleteDoc, getDocs, query, where, writeBatch, addDoc } from 'firebase/firestore';\r\nimport { exportToExcel } from './utilities/exportToExcel';\r\nimport { exportToPDF } from './utilities/exportToPDF';\r\nimport { exportToCSV } from './utilities/exportToCSV';\r\nimport { generatePreviewHtml } from './utilities/previewOrders.js';\r\nimport { generateExcelPreviewHtml } from './utilities/previewExcel.js';\r\nimport { cleanText } from './utils';\r\nimport TablaPedidos from './TablaPedidos';\r\nimport InteraccionesPedidos from './InteraccionesPedidos';\r\n\r\nconst OrderManagement = ({ setError, setSuccess, theme }) => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [editingOrder, setEditingOrder] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [totals, setTotals] = useState({ cash: 0, daviplata: 0, nequi: 0 });\r\n  const [editForm, setEditForm] = useState({ meals: [], total: 0, status: '', payment: '', deliveryPerson: '' });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [itemsPerPage, setItemsPerPage] = useState(10);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showConfirmDeleteAll, setShowConfirmDeleteAll] = useState(false);\r\n  const [confirmText, setConfirmText] = useState('');\r\n  const [showMealDetails, setShowMealDetails] = useState(null);\r\n  const [editingDeliveryId, setEditingDeliveryId] = useState(null);\r\n  const [deliveryPersons, setDeliveryPersons] = useState({});\r\n  const [sortBy, setSortBy] = useState('createdAt.seconds');\r\n  const [sortOrder, setSortOrder] = useState('desc');\r\n  const [proteins, setProteins] = useState([]);\r\n  const [newProtein, setNewProtein] = useState({ name: '', quantity: '' });\r\n  const [showProteinModal, setShowProteinModal] = useState(false);\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n\r\n  const totalProteinUnits = useMemo(() => proteins.reduce((sum, p) => sum + Number(p.quantity || 0), 0), [proteins]);\r\n\r\n  const handleExport = (exportFunction, format) => {\r\n    try {\r\n      exportFunction(orders, totals, deliveryPersons, totalProteinUnits, proteins);\r\n      setSuccess(`Exportado correctamente como ${format}.`);\r\n    } catch (error) {\r\n      console.error(`Error al exportar ${format}:`, error);\r\n      setError(`Error al exportar ${format}: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const filteredOrders = useMemo(() => {\r\n    if (!searchTerm) return orders;\r\n    const lowerSearchTerm = searchTerm.toLowerCase();\r\n    return orders.filter(order => {\r\n      const address = order.meals?.[0]?.address?.address?.toLowerCase() || '';\r\n      const phone = order.meals?.[0]?.address?.phoneNumber?.toLowerCase() || '';\r\n      const time = order.meals?.[0]?.time?.name?.toLowerCase() || order.meals?.[0]?.time?.toLowerCase() || '';\r\n      const payment = cleanText(order.payment || order.meals?.[0]?.payment?.name || order.meals?.[0]?.payment || '').toLowerCase();\r\n      const deliveryPerson = order.deliveryPerson?.toLowerCase() || '';\r\n      const status = order.status?.toLowerCase() || '';\r\n      return address.includes(lowerSearchTerm) || phone.includes(lowerSearchTerm) || time.includes(lowerSearchTerm) || payment.includes(lowerSearchTerm) || deliveryPerson.includes(lowerSearchTerm) || status.includes(lowerSearchTerm);\r\n    });\r\n  }, [orders, searchTerm]);\r\n\r\n  const sortedOrders = useMemo(() => {\r\n    return [...filteredOrders].sort((a, b) => {\r\n      const getValue = (obj, path) => {\r\n        if (path === 'orderNumber') return filteredOrders.indexOf(obj);\r\n        const value = path.split('.').reduce((acc, part) => acc && acc[part], obj);\r\n        return cleanText(value) || '';\r\n      };\r\n      const valueA = getValue(a, sortBy);\r\n      const valueB = getValue(b, sortBy);\r\n      if (typeof valueA === 'string' && typeof valueB === 'string') {\r\n        return sortOrder === 'asc' ? valueA.localeCompare(valueB) : valueB.localeCompare(valueA);\r\n      }\r\n      return sortOrder === 'asc' ? valueA - valueB : valueB - valueA;\r\n    });\r\n  }, [filteredOrders, sortBy, sortOrder]);\r\n\r\n  const totalPages = Math.ceil(sortedOrders.length / itemsPerPage);\r\n  const paginatedOrders = useMemo(() => {\r\n    const start = (currentPage - 1) * itemsPerPage;\r\n    const end = start + itemsPerPage;\r\n    return sortedOrders.slice(start, end);\r\n  }, [sortedOrders, currentPage, itemsPerPage]);\r\n\r\n  const handleSort = (key) => {\r\n    if (sortBy === key) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortBy(key);\r\n      setSortOrder('asc');\r\n    }\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const getSortIcon = (key) => {\r\n    if (sortBy !== key) return null;\r\n    return sortOrder === 'asc' ? (\r\n      <svg className=\"w-4 h-4 inline ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 15l7-7 7 7\" />\r\n      </svg>\r\n    ) : (\r\n      <svg className=\"w-4 h-4 inline ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n      </svg>\r\n    );\r\n  };\r\nconst fetchOrders = useCallback(() => {\r\n  setIsLoading(true);\r\n  const ordersColRef = collection(db, 'orders');\r\n  const unsubscribe = onSnapshot(ordersColRef, (snapshot) => {\r\n    const ordersData = snapshot.docs.map(doc => {\r\n      const data = doc.data();\r\n      // Normalize the order data\r\n      const meals = Array.isArray(data.meals) && data.meals.length > 0 ? data.meals : [{ address: {}, payment: {}, time: {} }];\r\n      return {\r\n        id: doc.id,\r\n        ...data,\r\n        meals: meals.map(meal => ({\r\n          ...meal,\r\n          address: meal.address || {},\r\n          payment: meal.payment || { name: 'Efectivo' },\r\n          time: meal.time || {},\r\n        })),\r\n        payment: data.payment || meals[0]?.payment?.name || 'Efectivo',\r\n        total: data.total || 0,\r\n        deliveryPerson: data.deliveryPerson || 'Sin asignar',\r\n        status: data.status || 'Pendiente',\r\n      };\r\n    });\r\n    setOrders(ordersData);\r\n    const newTotals = { cash: 0, daviplata: 0, nequi: 0 };\r\n    const newDeliveryPersons = {};\r\n    ordersData.forEach(order => {\r\n      const paymentSummary = order.paymentSummary || {};\r\n      newTotals.cash += paymentSummary['Efectivo'] || 0;\r\n      newTotals.daviplata += paymentSummary['Daviplata'] || 0;\r\n      newTotals.nequi += paymentSummary['Nequi'] || 0;\r\n      if (order.deliveryPerson) {\r\n        const personName = cleanText(order.deliveryPerson);\r\n        if (!newDeliveryPersons[personName]) newDeliveryPersons[personName] = { cash: 0, daviplata: 0, nequi: 0, total: 0 };\r\n        const paymentType = cleanText(order.payment || order.meals?.[0]?.payment?.name || order.meals?.[0]?.payment || 'Efectivo');\r\n        const amount = order.total || 0;\r\n        if (paymentType === 'Efectivo') newDeliveryPersons[personName].cash += amount;\r\n        else if (paymentType === 'Daviplata') newDeliveryPersons[personName].daviplata += amount;\r\n        else if (paymentType === 'Nequi') newDeliveryPersons[personName].nequi += amount;\r\n        newDeliveryPersons[personName].total += amount;\r\n      }\r\n    });\r\n    setTotals(newTotals);\r\n    setDeliveryPersons(newDeliveryPersons);\r\n    setIsLoading(false);\r\n  }, (error) => {\r\n    setError(`Error al cargar pedidos: ${error.message}`);\r\n    setIsLoading(false);\r\n  });\r\n  return () => unsubscribe();\r\n}, [setError]);\r\n\r\n  const fetchProteins = useCallback(() => {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    const proteinsColRef = query(collection(db, 'dailyProteins'), where('date', '==', today));\r\n    const unsubscribe = onSnapshot(proteinsColRef, (snapshot) => {\r\n      const proteinsData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setProteins(proteinsData);\r\n    }, (error) => {\r\n      setError(`Error al cargar protenas: ${error.message}`);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [setError]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribeOrders = fetchOrders();\r\n    const unsubscribeProteins = fetchProteins();\r\n    return () => {\r\n      unsubscribeOrders();\r\n      unsubscribeProteins();\r\n    };\r\n  }, [fetchOrders, fetchProteins]);\r\n\r\n  const handleAddProtein = async () => {\r\n    if (!newProtein.name || !newProtein.quantity || isNaN(newProtein.quantity) || Number(newProtein.quantity) <= 0) {\r\n      setError('Por favor, ingrese un nombre de protena vlido y una cantidad mayor a 0.');\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    try {\r\n      await addDoc(collection(db, 'dailyProteins'), {\r\n        name: newProtein.name.trim(),\r\n        quantity: Number(newProtein.quantity),\r\n        date: new Date().toISOString().split('T')[0],\r\n        createdAt: new Date(),\r\n      });\r\n      setNewProtein({ name: '', quantity: '' });\r\n      setShowProteinModal(false);\r\n      setSuccess('Protena agregada correctamente.');\r\n    } catch (error) {\r\n      setError(`Error al agregar protena: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEditOrder = useCallback((order) => {\r\n    setEditingOrder(order);\r\n    setEditForm({\r\n      meals: order.meals?.map(meal => ({\r\n        ...meal,\r\n        address: meal.address || {},\r\n        payment: meal.payment ? cleanText(meal.payment?.name || meal.payment) : 'Efectivo',\r\n        additions: meal.additions || [],\r\n        principle: Array.isArray(meal.principle) ? meal.principle : meal.principle ? [{ name: meal.principle.name || meal.principle }] : [],\r\n        cutlery: meal.cutlery || null,\r\n        sides: meal.sides || [],\r\n      })) || [],\r\n      total: order.total || 0,\r\n      status: order.status || 'Pendiente',\r\n      payment: order.payment ? cleanText(order.payment) : 'Efectivo',\r\n      deliveryPerson: order.deliveryPerson || '',\r\n    });\r\n  }, []);\r\n\r\n  const handleMealFormFieldChange = (mealIndex, field, value) => {\r\n    setEditForm(prev => {\r\n      const newMeals = [...prev.meals];\r\n      if (field.includes('.')) {\r\n        const [parent, child] = field.split('.');\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], [parent]: { ...newMeals[mealIndex][parent], [child]: value } };\r\n      } else if (field === 'sides') {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], sides: value.split(',').map(s => ({ name: s.trim() })) };\r\n      } else if (field === 'additions') {\r\n        newMeals[mealIndex] = {\r\n          ...newMeals[mealIndex],\r\n          additions: value.split(';').map(a => {\r\n            const [name, proteinOrReplacement = '', quantity = '1'] = a.split(',');\r\n            return { name: name.trim(), [proteinOrReplacement.includes('por') ? 'replacement' : 'protein']: proteinOrReplacement.trim(), quantity: Number(quantity) || 1 };\r\n          }).filter(a => a.name),\r\n        };\r\n      } else if (field === 'principle') {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], principle: value.split(',').map(p => ({ name: p.trim() })).filter(p => p.name) };\r\n      } else {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], [field]: value };\r\n      }\r\n      return { ...prev, meals: newMeals };\r\n    });\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    if (!editingOrder) return;\r\n    setIsLoading(true);\r\n    try {\r\n      const updatedMealsForDB = editForm.meals.map(meal => ({\r\n        ...meal,\r\n        soup: meal.soup && typeof meal.soup === 'string' ? { name: meal.soup } : meal.soup,\r\n        soupReplacement: meal.soupReplacement && typeof meal.soupReplacement === 'string' ? { name: meal.soupReplacement } : meal.soupReplacement,\r\n        principle: Array.isArray(meal.principle) ? meal.principle.map(p => typeof p === 'string' ? { name: p } : p) : meal.principle && typeof meal.principle === 'string' ? [{ name: meal.principle }] : meal.principle,\r\n        principleReplacement: meal.principleReplacement && typeof meal.principleReplacement === 'string' ? { name: meal.principleReplacement } : meal.principleReplacement,\r\n        protein: meal.protein && typeof meal.protein === 'string' ? { name: meal.protein } : meal.protein,\r\n        drink: meal.drink && typeof meal.drink === 'string' ? { name: meal.drink } : meal.drink,\r\n        cutlery: meal.cutlery && typeof meal.cutlery === 'string' ? { name: meal.cutlery } : meal.cutlery,\r\n        time: meal.time && typeof meal.time === 'string' ? { name: meal.time } : meal.time,\r\n        payment: meal.payment && typeof meal.payment === 'string' ? { name: meal.payment } : meal.payment,\r\n        sides: Array.isArray(meal.sides) ? meal.sides.map(s => typeof s === 'string' ? { name: s } : s) : [],\r\n        additions: Array.isArray(meal.additions) ? meal.additions.map(a => ({ name: a.name || '', protein: a.protein || '', replacement: a.replacement || '', quantity: a.quantity || 1 })) : [],\r\n      }));\r\n      await updateDoc(doc(db, 'orders', editingOrder.id), { ...editForm, meals: updatedMealsForDB, updatedAt: new Date() });\r\n      setEditingOrder(null);\r\n      setSuccess('Pedido actualizado correctamente.');\r\n    } catch (error) {\r\n      setError(`Error al guardar: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteOrder = async (orderId) => {\r\n    setIsLoading(true);\r\n    try {\r\n      await deleteDoc(doc(db, 'orders', orderId));\r\n      setSuccess('Pedido eliminado correctamente.');\r\n    } catch (error) {\r\n      setError(`Error al eliminar: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAllOrders = async () => {\r\n    if (confirmText.toLowerCase() !== 'confirmar') {\r\n      setError('Por favor, escribe \"confirmar\" para proceder.');\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const ordersSnapshot = await getDocs(collection(db, 'orders'));\r\n      ordersSnapshot.forEach(doc => batch.delete(doc.ref));\r\n      await batch.commit();\r\n      setShowConfirmDeleteAll(false);\r\n      setConfirmText('');\r\n      setSuccess('Todos los pedidos han sido eliminados.');\r\n    } catch (error) {\r\n      setError(`Error al eliminar todos los pedidos: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (orderId, newStatus) => {\r\n    try {\r\n      await updateDoc(doc(db, 'orders', orderId), { status: newStatus, updatedAt: new Date() });\r\n      setSuccess('Estado actualizado correctamente.');\r\n    } catch (error) {\r\n      setError(`Error al actualizar estado: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleDeliveryChange = async (orderId, deliveryPerson) => {\r\n    try {\r\n      await updateDoc(doc(db, 'orders', orderId), { deliveryPerson: deliveryPerson || null, updatedAt: new Date() });\r\n      setEditingDeliveryId(null);\r\n      setSuccess('Domiciliario actualizado correctamente.');\r\n    } catch (error) {\r\n      setError(`Error al actualizar domiciliario: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleOpenPreview = () => {\r\n    const previewWindow = window.open('', '_blank');\r\n    previewWindow.document.write(generatePreviewHtml(orders, totals, deliveryPersons));\r\n    previewWindow.document.close();\r\n  };\r\n\r\n  const handleOpenExcelPreview = () => {\r\n    const previewWindow = window.open('', '_blank');\r\n    previewWindow.document.write(generateExcelPreviewHtml(orders, totals, deliveryPersons, totalProteinUnits, proteins));\r\n    previewWindow.document.close();\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n      <InteraccionesPedidos\r\n        theme={theme}\r\n        showProteinModal={showProteinModal}\r\n        setShowProteinModal={setShowProteinModal}\r\n        newProtein={newProtein}\r\n        setNewProtein={setNewProtein}\r\n        handleAddProtein={handleAddProtein}\r\n        proteins={proteins}\r\n        totalProteinUnits={totalProteinUnits}\r\n        isLoading={isLoading}\r\n        showMealDetails={showMealDetails}\r\n        setShowMealDetails={setShowMealDetails}\r\n        editingOrder={editingOrder}\r\n        setEditingOrder={setEditingOrder}\r\n        editForm={editForm}\r\n        handleMealFormFieldChange={handleMealFormFieldChange}\r\n        handleSaveEdit={handleSaveEdit}\r\n        showConfirmDeleteAll={showConfirmDeleteAll}\r\n        setShowConfirmDeleteAll={setShowConfirmDeleteAll}\r\n        confirmText={confirmText}\r\n        setConfirmText={setConfirmText}\r\n        handleDeleteAllOrders={handleDeleteAllOrders}\r\n        setError={setError}\r\n        setSuccess={setSuccess}\r\n      />\r\n      <TablaPedidos\r\n        theme={theme}\r\n        orders={orders}\r\n        searchTerm={searchTerm}\r\n        setSearchTerm={setSearchTerm}\r\n        totals={totals}\r\n        isLoading={isLoading}\r\n        paginatedOrders={paginatedOrders}\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        setCurrentPage={setCurrentPage}\r\n        itemsPerPage={itemsPerPage}\r\n        setItemsPerPage={setItemsPerPage}\r\n        deliveryPersons={deliveryPersons}\r\n        handleEditOrder={handleEditOrder}\r\n        handleDeleteOrder={handleDeleteOrder}\r\n        handleStatusChange={handleStatusChange}\r\n        handleSort={handleSort}\r\n        getSortIcon={getSortIcon}\r\n        setShowMealDetails={setShowMealDetails}\r\n        editingDeliveryId={editingDeliveryId}\r\n        setEditingDeliveryId={setEditingDeliveryId}\r\n        editForm={editForm}\r\n        setEditForm={setEditForm}\r\n        handleDeliveryChange={handleDeliveryChange}\r\n        sortOrder={sortOrder}\r\n        showProteinModal={showProteinModal}\r\n        setShowProteinModal={setShowProteinModal}\r\n        isMenuOpen={isMenuOpen}\r\n        setIsMenuOpen={setIsMenuOpen}\r\n        handleOpenPreview={handleOpenPreview}\r\n        handleOpenExcelPreview={handleOpenExcelPreview}\r\n        handleExport={handleExport}\r\n        handleDeleteAllOrders={handleDeleteAllOrders}\r\n        setShowConfirmDeleteAll={setShowConfirmDeleteAll}\r\n        exportToExcel={exportToExcel} // Pass the actual export function\r\n        exportToPDF={exportToPDF}     // Pass the actual export function\r\n        exportToCSV={exportToCSV}     // Pass the actual export function\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderManagement;","export const generatePreviewHtml = (orders, totals, deliveryPersons) => {\r\n  let mealCounter = 0;\r\n  const pedidosBody = orders.flatMap((order) => {\r\n    if (!order || !Array.isArray(order.meals) || order.meals.length === 0) return [];\r\n    return order.meals.filter(meal => meal).map((meal) => {\r\n      mealCounter += 1;\r\n      return [\r\n        mealCounter,\r\n        meal?.address?.address || '',\r\n        meal?.address?.phoneNumber || '',\r\n        `$${order.total?.toLocaleString('es-CO') || '0'}`,\r\n        order?.deliveryPerson || ''\r\n      ];\r\n    });\r\n  });\r\n\r\n  if (pedidosBody.length === 0) pedidosBody.push(Array(5).fill('-'));\r\n\r\n  const deliveryBody = Object.entries(deliveryPersons).map(([name, data]) => [\r\n    name || '',\r\n    `$${data.cash?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.daviplata?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.nequi?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.total?.toLocaleString('es-CO') || '0'}`\r\n  ]);\r\n\r\n  const now = new Date();\r\n  const dateStr = now.toLocaleDateString('es-CO');\r\n  const timeStr = now.toLocaleTimeString('es-CO', { hour: '2-digit', minute: '2-digit', hour12: true });\r\n\r\n  return `\r\n    <html>\r\n      <head>\r\n        <title>Previsualizacin de Pedidos</title>\r\n        <style>\r\n          body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\r\n          h1 { text-align: center; font-size: 24px; }\r\n          p.date { text-align: center; font-size: 12px; }\r\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; }\r\n          th, td { padding: 8px; border: 1px solid black; }\r\n          th { background-color: #0066cc; color: white; font-weight: bold; }\r\n          td { text-align: left; }\r\n          td:nth-child(4) { text-align: right; }\r\n          tr:nth-child(even) { background-color: #f5f5f5; }\r\n          .totals-table { width: 50%; }\r\n          .delivery-table th:nth-child(n+2), .delivery-table td:nth-child(n+2) { text-align: right; }\r\n          .button-container { margin-top: 20px; text-align: center; }\r\n          .button { padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }\r\n          .button.print { background-color: #28a745; }\r\n          @media print {\r\n              .button-container { display: none; }\r\n          }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <h1>Gestin de Pedidos</h1>\r\n        <p class=\"date\">Fecha: ${dateStr} ${timeStr}</p>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>N</th>\r\n              <th>Direccin</th>\r\n              <th>Telfono</th>\r\n              <th>Total</th>\r\n              <th>Domiciliario</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${pedidosBody.map(row => `\r\n              <tr>\r\n                <td>${row[0]}</td>\r\n                <td>${row[1]}</td>\r\n                <td>${row[2]}</td>\r\n                <td>${row[3]}</td>\r\n                <td>${row[4]}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n        <h2 style=\"margin-top: 20px; font-size: 18px;\">Resumen de Totales</h2>\r\n        <table class=\"totals-table\">\r\n          <tbody>\r\n            <tr><td style=\"padding: 8px;\">Total Efectivo</td><td style=\"padding: 8px; text-align: right;\">${pedidosBody.length > 0 ? `$${totals.cash?.toLocaleString('es-CO') || '0'}` : '$0'}</td></tr>\r\n            <tr><td style=\"padding: 8px;\">Total Daviplata</td><td style=\"padding: 8px; text-align: right;\">${pedidosBody.length > 0 ? `$${totals.daviplata?.toLocaleString('es-CO') || '0'}` : '$0'}</td></tr>\r\n            <tr><td style=\"padding: 8px;\">Total Nequi</td><td style=\"padding: 8px; text-align: right;\">${pedidosBody.length > 0 ? `$${totals.nequi?.toLocaleString('es-CO') || '0'}` : '$0'}</td></tr>\r\n            <tr><td style=\"padding: 8px;\">Total General</td><td style=\"padding: 8px; text-align: right;\">${pedidosBody.length > 0 ? `$${(totals.cash + totals.daviplata + totals.nequi || 0).toLocaleString('es-CO')}` : '$0'}</td></tr>\r\n          </tbody>\r\n        </table>\r\n        <h2 style=\"margin-top: 20px; font-size: 18px;\">Resumen por Domiciliarios</h2>\r\n        <table class=\"delivery-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Domiciliario</th>\r\n              <th>Efectivo</th>\r\n              <th>Daviplata</th>\r\n              <th>Nequi</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${deliveryBody.map(row => `\r\n              <tr>\r\n                <td>${row[0]}</td>\r\n                <td>${row[1]}</td>\r\n                <td>${row[2]}</td>\r\n                <td>${row[3]}</td>\r\n                <td>${row[4]}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n        <div class=\"button-container\">\r\n          <button class=\"button print\" onclick=\"window.print()\">Imprimir</button>\r\n          <button class=\"button\" onclick=\"window.close()\">Cerrar Previsualizacin</button>\r\n        </div>\r\n      </body>\r\n    </html>\r\n  `;\r\n};","export const generateExcelPreviewHtml = (orders, totals, deliveryPersons, totalProteinUnits = 0, proteins = []) => {\r\n  let mealCounter = 0;\r\n  const pedidosBody = orders.map((order) => {\r\n    mealCounter += 1;\r\n    const meal = order.meals?.[0] || {};\r\n    const payment = order.payment?.name || order.payment || meal?.payment?.name || meal?.payment || 'Efectivo';\r\n\r\n    return [\r\n      mealCounter,\r\n      meal?.address?.address || '',\r\n      meal?.address?.phoneNumber || '',\r\n      `$${order.total?.toLocaleString('es-CO') || '0'}`,\r\n      payment,\r\n      order?.deliveryPerson || ''\r\n    ];\r\n  });\r\n\r\n  if (pedidosBody.length === 0) pedidosBody.push(Array(6).fill('-'));\r\n\r\n  const deliveryBody = Object.entries(deliveryPersons).map(([name, data]) => [\r\n    name || '',\r\n    `$${data.cash?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.daviplata?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.nequi?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.total?.toLocaleString('es-CO') || '0'}`\r\n  ]);\r\n\r\n  const proteinsBody = proteins.length === 0\r\n    ? [['-', '-']]\r\n    : proteins.map((protein, index) => {\r\n        const isPenultimate = index === proteins.length - 2;\r\n        const isLast = index === proteins.length - 1;\r\n        return [\r\n          protein.name || 'Sin nombre',\r\n          protein.quantity?.toLocaleString('es-CO') || '0',\r\n          isPenultimate ? 'TOTAL PROTENAS:' : isLast ? 'Fecha actual:' : '',\r\n          isPenultimate ? totalProteinUnits.toLocaleString('es-CO') : isLast ? new Date().toLocaleDateString('es-CO', { day: '2-digit', month: '2-digit', year: 'numeric' }) : ''\r\n        ];\r\n      });\r\n\r\n  // Se calculan los totales de forma precisa\r\n  const calculatedTotals = {\r\n    cash: totals.cash || 0,\r\n    daviplata: totals.daviplata || 0,\r\n    nequi: totals.nequi || 0\r\n  };\r\n  const totalGeneral = calculatedTotals.cash + calculatedTotals.daviplata + calculatedTotals.nequi;\r\n\r\n  return `\r\n    <html>\r\n      <head>\r\n        <title>Previsualizacin de Excel</title>\r\n        <style>\r\n          body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\r\n          h1 { text-align: center; font-size: 24px; }\r\n          table { width: 100%; border-collapse: collapse; }\r\n          th, td { padding: 8px; border: 1px solid black; }\r\n          th { background-color: #0066cc; color: white; font-weight: bold; text-align: center; font-size: 16px; }\r\n          td { text-align: left; vertical-align: middle; }\r\n          td:nth-child(4), td:nth-child(6) { text-align: right; }\r\n          tr:nth-child(even) { background-color: #f5f5f5; }\r\n          .totals-table { width: 50%; margin-left: auto; margin-right: auto; }\r\n\r\n          .proteins-container { width: auto; margin: 0 auto; max-width: 700px; }\r\n          .proteins-table {\r\n            border-collapse: collapse;\r\n            font-size: 14px;\r\n            width: 100%;\r\n            max-width: 700px;\r\n          }\r\n          .proteins-table th, .proteins-table td {\r\n            padding: 6px 12px;\r\n            border: 1px solid black;\r\n            white-space: nowrap;\r\n          }\r\n          .proteins-table th:nth-child(1), .proteins-table td:nth-child(1) { width: 160px; text-align: left; }\r\n          .proteins-table th:nth-child(2), .proteins-table td:nth-child(2) { width: 80px; text-align: right; }\r\n          .proteins-table th:nth-child(3), .proteins-table td:nth-child(3) { width: 220px; text-align: left; }\r\n\r\n          .delivery-table th { background-color: #0066cc; color: white; font-weight: bold; text-align: center; font-size: 16px; }\r\n          .delivery-table .green-header th { background-color: #28a745; }\r\n          .delivery-table td:nth-child(n+2) { text-align: right; }\r\n\r\n          .spacer { height: 16px; }\r\n          .button-container { margin-top: 20px; text-align: center; }\r\n          .button { padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }\r\n          .button.print { background-color: #28a745; }\r\n          @media print { .button-container { display: none; } }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <h1>Gestin de Pedidos</h1>\r\n        <div class=\"spacer\"></div>\r\n\r\n        <div class=\"proteins-container\">\r\n          <table class=\"proteins-table\" aria-label=\"Resumen de protenas\">\r\n            <thead>\r\n              <tr>\r\n                <th style=\"background-color: #0066cc; color: white; border: 1px solid black;\">Protena</th>\r\n                <th style=\"background-color: #0066cc; color: white; border: 1px solid black;\">Unidades</th>\r\n                <th style=\"background-color: #0066cc; color: white; border: 1px solid black;\"></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              ${proteinsBody.map((row, index) => {\r\n                const thirdColumn = row[2] ? `\r\n                  <td style=\"padding: 0;\">\r\n                    <div style=\"display: flex; width: 100%; height: 100%;\">\r\n                      <div style=\"flex: 1; padding: 6px 12px; font-weight: bold; display: flex; align-items: center;\">${row[2]}</div>\r\n                      <div style=\"width: 1px; background-color: black;\"></div>\r\n                      <div style=\"flex: 1; padding: 6px 12px; display: flex; justify-content: flex-end; align-items: center; font-weight: ${row[2] === 'TOTAL PROTENAS:' ? 'bold' : 'normal'};\">${row[3]}</div>\r\n                    </div>\r\n                  </td>\r\n                ` : '<td style=\"border: none; background-color: white;\"></td>';\r\n\r\n                return `\r\n                  <tr>\r\n                    <td title=\"${row[0]}\">${row[0]}</td>\r\n                    <td style=\"text-align: right;\">${row[1]}</td>\r\n                    ${thirdColumn}\r\n                  </tr>\r\n                `;\r\n              }).join('')}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div class=\"spacer\"></div><div class=\"spacer\"></div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>N</th>\r\n              <th>Direccin</th>\r\n              <th>Telfono</th>\r\n              <th>Total</th>\r\n              <th>Mtodo de Pago</th>\r\n              <th>Domiciliario</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${pedidosBody.map(row => `\r\n              <tr>\r\n                <td>${row[0]}</td>\r\n                <td>${row[1]}</td>\r\n                <td>${row[2]}</td>\r\n                <td>${row[3]}</td>\r\n                <td>${row[4]}</td>\r\n                <td>${row[5]}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"spacer\"></div><div class=\"spacer\"></div>\r\n\r\n        <table class=\"totals-table\">\r\n          <thead>\r\n            <tr><th colspan=\"2\">Resumen de Totales</th></tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr><td>Total Efectivo</td><td style=\"text-align: right;\">$${calculatedTotals.cash.toLocaleString('es-CO')}</td></tr>\r\n            <tr><td>Total Daviplata</td><td style=\"text-align: right;\">$${calculatedTotals.daviplata.toLocaleString('es-CO')}</td></tr>\r\n            <tr><td>Total Nequi</td><td style=\"text-align: right;\">$${calculatedTotals.nequi.toLocaleString('es-CO')}</td></tr>\r\n            <tr><td>Total General</td><td style=\"text-align: right;\">$${totalGeneral.toLocaleString('es-CO')}</td></tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"spacer\"></div><div class=\"spacer\"></div>\r\n\r\n        <table class=\"delivery-table\">\r\n          <thead>\r\n            <tr><th colspan=\"5\">Resumen por Domiciliarios</th></tr>\r\n            <tr class=\"green-header\">\r\n              <th>Domiciliario</th>\r\n              <th>Efectivo</th>\r\n              <th>Daviplata</th>\r\n              <th>Nequi</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${deliveryBody.map(row => `\r\n              <tr>\r\n                <td>${row[0]}</td>\r\n                <td>${row[1]}</td>\r\n                <td>${row[2]}</td>\r\n                <td>${row[3]}</td>\r\n                <td>${row[4]}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"button-container\">\r\n          <button class=\"button print\" onclick=\"window.print()\">Imprimir</button>\r\n          <button class=\"button\" onclick=\"window.close()\">Cerrar Previsualizacin</button>\r\n          <button class=\"button\" onclick=\"window.opener.postMessage('downloadExcel', '*')\">Descargar Excel</button>\r\n        </div>\r\n      </body>\r\n    </html>\r\n  `;\r\n};"],"names":["classNames","_len","arguments","length","classes","Array","_key","filter","Boolean","join","exportToExcel","async","orders","totals","deliveryPersons","totalProteinUnits","proteins","_proteins","_proteins2","_proteins3","_proteins4","workbook","ExcelJS","worksheet","addWorksheet","cleanText","text","undefined","replace","trim","toString","name","String","applyThinBorder","cell","border","top","style","color","argb","left","bottom","right","addRow","proteinHeaderRow","lastRow","number","mergeCells","ourHeader","getCell","font","bold","fill","type","pattern","fgColor","alignment","horizontal","getRow","values","eachCell","colNumber","value","proteinData","quantity","extra","extraValue","slice","toLocaleString","Date","getDate","padStart","getMonth","getFullYear","forEach","protein","index","numFmt","mealCounter","pedidos","map","order","_order$meals","_meal$payment","_meal$address","_meal$address2","meal","meals","paymentValue","payment","console","warn","id","N","Direccin","address","Telfono","phoneNumber","Total","total","MtodoDePago","Domiciliario","deliveryPerson","push","columns","key","width","pedidosHeaderRow","headerRow","pedido","resumenRow","resumenCell","cash","daviplata","nequi","_ref","label","row","resumenDomiciliariosRow","deliveryHeader","i","Object","entries","_ref2","data","buffer","xlsx","writeBuffer","blob","Blob","link","document","createElement","href","window","URL","createObjectURL","download","toISOString","body","appendChild","click","removeChild","error","alert","message","exportToPDF","_totals$cash","_totals$daviplata","_totals$nequi","doc","jsPDF","logoUrl","addImage","imgError","setFontSize","now","dateStr","toLocaleDateString","timeStr","toLocaleTimeString","hour","minute","hour12","pedidosBody","_order$payment","_order$total","paymentMethod","autoTable","startY","head","styles","fontSize","cellPadding","overflow","headStyles","fillColor","textColor","fontStyle","lineWidth","lineColor","alternateRowStyles","columnStyles","cellWidth","halign","tableLineColor","tableLineWidth","didDrawPage","pageNumber","finalY","lastAutoTable","deliveryY","deliveryBody","_data$cash","_data$daviplata","_data$nequi","_data$total","save","split","exportToCSV","setSuccess","orderRows","flatMap","_meal$soup","_meal$principle","_meal$protein","_meal$drink","_meal$cutlery","_meal$sides","_meal$additions","_meal$time","_meal$address3","_meal$address4","_meal$address5","_meal$address6","soup","isArray","principle","p","drink","cutlery","sides","s","additions","a","replacement","notes","time","addressType","localName","recipientName","unitDetails","status","createdAt","seconds","updatedAt","totalsRows","deliveryRows","csvContent","url","revokeObjectURL","getAddressDisplay","display","getMealDetailsDisplay","_meal$soupReplacement","_meal$soupReplacement2","_meal$soup2","_meal$principleReplac","_meal$protein2","_meal$time2","_meal$address7","_meal$address8","_meal$payment2","components","soupDisplay","soupReplacement","principleDisplay","_meal$principleReplac2","principleReplacement","principleNames","_meal$principle2","drinkName","addressTypeDisplay","areMealsIdentical","areIdentical","count","fieldsToCompare","getMealSignature","field","path","obj","reduce","acc","part","getNestedProperty","sort","firstSignature","every","theme","searchTerm","setSearchTerm","isLoading","paginatedOrders","currentPage","totalPages","setCurrentPage","itemsPerPage","setItemsPerPage","handleEditOrder","handleDeleteOrder","handleStatusChange","handleSort","getSortIcon","setShowMealDetails","editingDeliveryId","setEditingDeliveryId","editForm","setEditForm","handleDeliveryChange","sortOrder","showProteinModal","setShowProteinModal","isMenuOpen","setIsMenuOpen","handleOpenPreview","handleOpenExcelPreview","handleExport","handleDeleteAllOrders","setShowConfirmDeleteAll","currentDate","weekday","month","day","menuRef","useRef","useEffect","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","_jsx","_Fragment","children","_jsxs","className","onChange","e","placeholder","onClick","PlusIcon","ref","EllipsisVerticalIcon","ArrowDownTrayIcon","colSpan","_order$meals$","_order$meals2","_order$meals2$","_order$meals2$$paymen","_order$meals3","_order$meals3$","_order$meals4","_order$meals4$","_order$meals4$$addres","_order$meals5","_order$meals5$","_order$meals5$$time","_order$meals6","_order$meals6$","displayNumber","addressDisplay","paymentDisplay","statusClass","title","InformationCircleIcon","onBlur","onKeyPress","autoFocus","prev","PencilIcon","TrashIcon","Number","Math","max","disabled","ChevronLeftIcon","min","ChevronRightIcon","keys","_showMealDetails$tota","newProtein","setNewProtein","handleAddProtein","showMealDetails","editingOrder","setEditingOrder","handleMealFormFieldChange","handleSaveEdit","showConfirmDeleteAll","confirmText","setConfirmText","setError","editingProtein","setEditingProtein","useState","Transition","show","as","React","Dialog","onClose","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Panel","Title","XMarkIcon","classbeca","handleCancelEdit","updateDoc","db","handleEditProtein","deleteDoc","proteinId","handleDeleteProtein","mealIndex","_meal$address9","toLowerCase","setOrders","setTotals","setIsLoading","setDeliveryPersons","sortBy","setSortBy","setSortOrder","setProteins","useMemo","sum","filteredOrders","lowerSearchTerm","_order$meals$$address","_order$meals$$address2","_order$meals2$$addres","_order$meals2$$addres2","_order$meals3$$time","_order$meals3$$time$n","_order$meals4$$time","_order$meals5$$paymen","_order$deliveryPerson","_order$status","phone","includes","sortedOrders","b","getValue","indexOf","valueA","valueB","localeCompare","ceil","start","end","fetchOrders","useCallback","ordersColRef","collection","unsubscribe","onSnapshot","snapshot","ordersData","docs","_meals$","_meals$$payment","newTotals","newDeliveryPersons","paymentSummary","_order$meals7","_order$meals7$","_order$meals7$$paymen","_order$meals8","_order$meals8$","personName","paymentType","amount","fetchProteins","today","proteinsColRef","query","where","proteinsData","unsubscribeOrders","unsubscribeProteins","_order$meals9","batch","writeBatch","getDocs","delete","commit","InteraccionesPedidos","isNaN","addDoc","date","newMeals","parent","child","proteinOrReplacement","updatedMealsForDB","TablaPedidos","orderId","newStatus","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","previewWindow","open","write","generatePreviewHtml","close","proteinsBody","_protein$quantity","isPenultimate","isLast","year","calculatedTotals","totalGeneral","thirdColumn","generateExcelPreviewHtml","exportFunction","format"],"sourceRoot":""}