{"version":3,"file":"static/js/734.1bc3cdb6.chunk.js","mappings":"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","sources":["components/Admin/utilities/exportToExcel.js","components/Admin/utilities/exportToPDF.js","components/Admin/utilities/exportToCSV.js","components/Admin/utils.js","components/Admin/TablaPedidos.js","components/Admin/InteraccionesPedidos.js","components/Admin/OrderManagement.js","components/Admin/utilities/previewOrders.js","components/Admin/utilities/previewExcel.js","utils/classNames.js"],"sourcesContent":["//src/components/Admin/utilities/exportToExcel.js\r\nimport ExcelJS from 'exceljs';\r\n\r\nexport const exportToExcel = async (orders, totals, deliveryPersons, totalProteinUnits, proteins) => {\r\n  try {\r\n    const workbook = new ExcelJS.Workbook();\r\n    const worksheet = workbook.addWorksheet('Gestin de Pedidos');\r\n\r\n    const cleanText = (text) => {\r\n      if (text == null || text === undefined) return '';\r\n      if (typeof text === 'string') return text.replace(' NUEVO', '').trim();\r\n      if (typeof text === 'boolean') return text.toString();\r\n      if (typeof text === 'object' && text !== null && 'name' in text && typeof text.name === 'string') {\r\n        return text.name.replace(' NUEVO', '').trim();\r\n      }\r\n      return String(text).replace(' NUEVO', '').trim();\r\n    };\r\n\r\n    const applyThinBorder = (cell) => {\r\n      cell.border = {\r\n        top: { style: 'thin', color: { argb: 'FF000000' } },\r\n        left: { style: 'thin', color: { argb: 'FF000000' } },\r\n        bottom: { style: 'thin', color: { argb: 'FF000000' } },\r\n        right: { style: 'thin', color: { argb: 'FF000000' } },\r\n      };\r\n    };\r\n\r\n    //  1. Resumen de Protenas\r\n    worksheet.addRow(['', 'PROTENAS DEL DA']);\r\n    const proteinHeaderRow = worksheet.lastRow.number;\r\n    worksheet.mergeCells(proteinHeaderRow, 2, proteinHeaderRow, 3);\r\n    const ourHeader = worksheet.getCell(`B${proteinHeaderRow}`);\r\n    ourHeader.font = { bold: true, color: { argb: 'FFFFFFFF' } };\r\n    ourHeader.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF0066CC' } };\r\n    ourHeader.alignment = { horizontal: 'center' };\r\n\r\n    worksheet.getRow(proteinHeaderRow + 1).values = ['', 'Protena', 'Unidades', '', ''];\r\n    const proteinTableHeader = worksheet.getRow(proteinHeaderRow + 1);\r\n    proteinTableHeader.eachCell((cell, colNumber) => {\r\n      if (colNumber === 2 || colNumber === 3) {\r\n        cell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF28A745' } };\r\n        cell.font = { color: { argb: 'FFFFFFFF' }, bold: true };\r\n        cell.alignment = { horizontal: 'center' };\r\n        applyThinBorder(cell);\r\n      }\r\n      if (colNumber === 4 || colNumber === 5) {\r\n        cell.value = '';\r\n      }\r\n    });\r\n\r\n    const proteinData = proteins.length === 0\r\n      ? [{ name: '-', quantity: '-', extra: '', extraValue: '' }]\r\n      : [\r\n          ...proteins.slice(0, -2),\r\n          {\r\n            name: proteins[proteins.length - 2]?.name || '-',\r\n            quantity: proteins[proteins.length - 2]?.quantity || '-',\r\n            extra: 'TOTAL PROTENAS:',\r\n            extraValue: totalProteinUnits.toLocaleString('es-CO'),\r\n          },\r\n          {\r\n            name: proteins[proteins.length - 1]?.name || '-',\r\n            quantity: proteins[proteins.length - 1]?.quantity || '-',\r\n            extra: 'Fecha actual:',\r\n            extraValue: `${String(new Date().getDate()).padStart(2, '0')}/${String(new Date().getMonth() + 1).padStart(2, '0')}/${new Date().getFullYear()}`,\r\n          },\r\n        ];\r\n\r\n    proteinData.forEach((protein, index) => {\r\n      const row = worksheet.addRow(['', cleanText(protein.name), protein.quantity, protein.extra, protein.extraValue]);\r\n      row.eachCell((cell, colNumber) => {\r\n        if (colNumber >= 2) {\r\n          if (index >= proteinData.length - 2 || colNumber === 2 || colNumber === 3) {\r\n            applyThinBorder(cell);\r\n          }\r\n          if (colNumber === 3) {\r\n            cell.numFmt = '#,##0';\r\n            cell.alignment = { horizontal: 'right' };\r\n          }\r\n          if (colNumber === 4) cell.alignment = { horizontal: 'left' };\r\n          if (colNumber === 5) cell.alignment = { horizontal: 'right' };\r\n        }\r\n      });\r\n    });\r\n\r\n    worksheet.addRow({});\r\n    worksheet.addRow({});\r\n\r\n    //  2. Pedidos\r\n    let mealCounter = 0;\r\n    const pedidos = orders.map((order, index) => {\r\n      mealCounter += 1;\r\n      const meal = order.meals?.[0] || {};\r\n      const paymentValue = order.payment || (typeof meal.payment === 'object' && meal.payment?.name) || meal.payment || 'Efectivo';\r\n      if (!paymentValue || (typeof paymentValue === 'object' && !('name' in paymentValue))) {\r\n        console.warn(`Invalid payment data in order ${order.id || index}:`, { order, paymentValue });\r\n      }\r\n      return {\r\n        N: mealCounter,\r\n        Direccin: cleanText(meal.address?.address),\r\n        Telfono: cleanText(meal.address?.phoneNumber),\r\n        Total: order.total || 0,\r\n        MtodoDePago: cleanText(paymentValue),\r\n        Domiciliario: cleanText(order.deliveryPerson || 'Sin asignar'),\r\n      };\r\n    });\r\n\r\n    if (pedidos.length === 0) {\r\n      pedidos.push({ N: '-', Direccin: '-', Telfono: '-', Total: '-', MtodoDePago: '-', Domiciliario: '-' });\r\n    }\r\n\r\n    worksheet.columns = [\r\n      { key: 'N', width: 10 },\r\n      { key: 'Direccin', width: 30 },\r\n      { key: 'Telfono', width: 15 },\r\n      { key: 'Total', width: 15 },\r\n      { key: 'MtodoDePago', width: 15 },\r\n      { key: 'Domiciliario', width: 25 },\r\n    ];\r\n\r\n    const pedidosHeaderRow = proteinData.length + 4;\r\n    const headerRow = worksheet.getRow(pedidosHeaderRow);\r\n    headerRow.values = ['N', 'Direccin', 'Telfono', 'Total', 'Mtodo de Pago', 'Domiciliario'];\r\n    headerRow.eachCell(cell => {\r\n      cell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF0066CC' } };\r\n      cell.font = { color: { argb: 'FFFFFFFF' }, bold: true };\r\n      cell.alignment = { horizontal: 'center' };\r\n      applyThinBorder(cell);\r\n    });\r\n\r\n    pedidos.forEach(pedido => {\r\n      const row = worksheet.addRow(pedido);\r\n      row.eachCell(cell => applyThinBorder(cell));\r\n    });\r\n\r\n    worksheet.addRow({});\r\n    worksheet.addRow({});\r\n\r\n    //  3. Resumen de Totales\r\n    worksheet.addRow([]);\r\n    const resumenRow = worksheet.lastRow.number;\r\n    worksheet.getCell(`C${resumenRow}`).value = 'Resumen de Totales';\r\n    worksheet.mergeCells(`C${resumenRow}:D${resumenRow}`);\r\n    const resumenCell = worksheet.getCell(`C${resumenRow}`);\r\n    resumenCell.font = { bold: true, color: { argb: 'FFFFFFFF' } };\r\n    resumenCell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF0066CC' } };\r\n    resumenCell.alignment = { horizontal: 'center' };\r\n    applyThinBorder(resumenCell);\r\n    applyThinBorder(worksheet.getCell(`D${resumenRow}`));\r\n\r\n    const resumenData = [\r\n      ['Total Efectivo', totals.cash || 0],\r\n      ['Total Daviplata', totals.daviplata || 0],\r\n      ['Total Nequi', totals.nequi || 0],\r\n      ['Total General', (totals.cash || 0) + (totals.daviplata || 0) + (totals.nequi || 0)],\r\n    ];\r\n\r\n    resumenData.forEach(([label, value]) => {\r\n      const row = worksheet.addRow(['', '', label, value]);\r\n      row.getCell(3).alignment = { horizontal: 'left' };\r\n      row.getCell(4).alignment = { horizontal: 'right' };\r\n      row.getCell(4).numFmt = '$#,##0';\r\n      row.getCell(4).font = { bold: true };\r\n      applyThinBorder(row.getCell(3));\r\n      applyThinBorder(row.getCell(4));\r\n    });\r\n\r\n    worksheet.addRow({});\r\n    worksheet.addRow({});\r\n\r\n    //  4. Resumen por Domiciliarios\r\n    worksheet.addRow(['', 'Resumen por Domiciliarios']);\r\n    const resumenDomiciliariosRow = worksheet.lastRow.number;\r\n    worksheet.mergeCells(resumenDomiciliariosRow, 2, resumenDomiciliariosRow, 6);\r\n    const deliveryHeader = worksheet.getCell(`B${resumenDomiciliariosRow}`);\r\n    deliveryHeader.font = { bold: true, color: { argb: 'FFFFFFFF' } };\r\n    deliveryHeader.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF0066CC' } };\r\n    deliveryHeader.alignment = { horizontal: 'center' };\r\n    for (let i = 2; i <= 6; i++) applyThinBorder(worksheet.getCell(resumenDomiciliariosRow, i));\r\n\r\n    worksheet.addRow(['', 'Domiciliario', 'Efectivo', 'Daviplata', 'Nequi', 'Total']);\r\n    const domHeader = worksheet.lastRow;\r\n    domHeader.eachCell((cell, colNumber) => {\r\n      if (colNumber >= 2) {\r\n        cell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF28A745' } };\r\n        cell.font = { color: { argb: 'FFFFFFFF' }, bold: true };\r\n        cell.alignment = { horizontal: 'center' };\r\n        applyThinBorder(cell);\r\n      }\r\n    });\r\n\r\n    Object.entries(deliveryPersons).forEach(([name, data]) => {\r\n      const row = worksheet.addRow([\r\n        '',\r\n        cleanText(name),\r\n        data.cash || 0,\r\n        data.daviplata || 0,\r\n        data.nequi || 0,\r\n        data.total || 0,\r\n      ]);\r\n      row.eachCell((cell, colNumber) => {\r\n        if (colNumber >= 2) {\r\n          if (colNumber >= 3) {\r\n            cell.numFmt = '$#,##0';\r\n            cell.alignment = { horizontal: 'right' };\r\n          }\r\n          applyThinBorder(cell);\r\n        }\r\n      });\r\n    });\r\n\r\n    const buffer = await workbook.xlsx.writeBuffer();\r\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n    const link = document.createElement('a');\r\n    link.href = window.URL.createObjectURL(blob);\r\n    link.download = `pedidos_${new Date().toISOString().slice(0, 10)}.xlsx`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  } catch (error) {\r\n    console.error('Error al exportar Excel:', error);\r\n    alert('Error al generar el archivo Excel: ' + error.message);\r\n  }\r\n};","// src/components/Admin/utilities/exportToPDF.js\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\nexport const exportToPDF = async (orders, totals = {}, deliveryPersons = {}) => {\r\n  try {\r\n    const doc = new jsPDF();\r\n\r\n    const logoUrl = '/logo.png'; // Asegrate de que esta ruta sea accesible\r\n    try {\r\n      doc.addImage(logoUrl, 'PNG', 160, 10, 30, 20);\r\n    } catch (imgError) {\r\n      console.warn('No se pudo cargar el logo para el PDF:', imgError);\r\n    }\r\n\r\n    doc.setFontSize(16);\r\n    doc.text('Gestin de Pedidos', 14, 20);\r\n    doc.setFontSize(12);\r\n    const now = new Date();\r\n    const dateStr = now.toLocaleDateString('es-CO');\r\n    const timeStr = now.toLocaleTimeString('es-CO', { hour: '2-digit', minute: '2-digit', hour12: true });\r\n    doc.text(`Fecha: ${dateStr} ${timeStr}`, 14, 30);\r\n\r\nlet mealCounter = 0;\r\nconst pedidosBody = orders.map((order) => {\r\n  mealCounter += 1;\r\n  const meal = order.meals?.[0] || {};\r\n  const paymentMethod = order.payment?.name || order.payment || meal.payment?.name || meal.payment || 'Efectivo';\r\n\r\n  return [\r\n    mealCounter,\r\n    meal.address?.address || '',\r\n    meal.address?.phoneNumber || '',\r\n    `$${order.total?.toLocaleString('es-CO') || '0'}`,\r\n    paymentMethod,\r\n    order?.deliveryPerson || ''\r\n  ];\r\n});\r\n\r\nif (pedidosBody.length === 0) pedidosBody.push(Array(6).fill('-'));\r\n\r\n\r\n    if (pedidosBody.length === 0) pedidosBody.push(Array(5).fill('-'));\r\n\r\n    autoTable(doc, {\r\n      startY: 40,\r\n      head: [['N', 'Direccin', 'Telfono', 'Total', 'Domiciliario']],\r\n      body: pedidosBody,\r\n      styles: { fontSize: 8, cellPadding: 2, overflow: 'linebreak' },\r\n      headStyles: { fillColor: [0, 102, 204], textColor: 255, fontStyle: 'bold', lineWidth: 0.2, lineColor: [0, 0, 0] },\r\n      alternateRowStyles: { fillColor: [245, 245, 245] },\r\n      columnStyles: {\r\n        1: { cellWidth: 'wrap' },\r\n        3: { halign: 'right' }\r\n      },\r\n      tableLineColor: [0, 0, 0],\r\n      tableLineWidth: 0.2,\r\n      didDrawPage: (data) => {\r\n        doc.setFontSize(10);\r\n        doc.text(`Pgina ${data.pageNumber}`, 180, 287);\r\n      }\r\n    });\r\n\r\n    const finalY = doc.lastAutoTable.finalY + 10;\r\n    doc.setFontSize(14);\r\n    doc.text('Resumen de Totales', 14, finalY);\r\n\r\n    autoTable(doc, {\r\n      startY: finalY + 5,\r\n      head: [['Concepto', 'Monto']],\r\n      body: [\r\n        ['Total Efectivo', `$${totals.cash?.toLocaleString('es-CO') || '0'}`],\r\n        ['Total Daviplata', `$${totals.daviplata?.toLocaleString('es-CO') || '0'}`],\r\n        ['Total Nequi', `$${totals.nequi?.toLocaleString('es-CO') || '0'}`],\r\n        ['Total General', `$${(totals.cash + totals.daviplata + totals.nequi || 0).toLocaleString('es-CO')}`]\r\n      ],\r\n      styles: { fontSize: 10, cellPadding: 2, overflow: 'linebreak' },\r\n      headStyles: { fillColor: [0, 102, 204], textColor: 255, fontStyle: 'bold', lineWidth: 0.2, lineColor: [0, 0, 0] },\r\n      columnStyles: { 1: { halign: 'right' } },\r\n      tableLineColor: [0, 0, 0],\r\n      tableLineWidth: 0.2\r\n    });\r\n\r\n    const deliveryY = doc.lastAutoTable.finalY + 10;\r\n    doc.setFontSize(14);\r\n    doc.text('Resumen por Domiciliarios', 14, deliveryY);\r\n\r\n    const deliveryBody = Object.entries(deliveryPersons).map(([name, data]) => [\r\n      name || '',\r\n      `$${data.cash?.toLocaleString('es-CO') || '0'}`,\r\n      `$${data.daviplata?.toLocaleString('es-CO') || '0'}`,\r\n      `$${data.nequi?.toLocaleString('es-CO') || '0'}`,\r\n      `$${data.total?.toLocaleString('es-CO') || '0'}`\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: deliveryY + 5,\r\n      head: [['Domiciliario', 'Efectivo', 'Daviplata', 'Nequi', 'Total']],\r\n      body: deliveryBody.length > 0 ? deliveryBody : [['-', '-', '-', '-', '-']],\r\n      styles: { fontSize: 8, cellPadding: 2, overflow: 'linebreak' },\r\n      headStyles: { fillColor: [0, 102, 204], textColor: 255, fontStyle: 'bold', lineWidth: 0.2, lineColor: [0, 0, 0] },\r\n      columnStyles: {\r\n        1: { halign: 'right' },\r\n        2: { halign: 'right' },\r\n        3: { halign: 'right' },\r\n        4: { halign: 'right' }\r\n      },\r\n      tableLineColor: [0, 0, 0],\r\n      tableLineWidth: 0.2\r\n    });\r\n\r\n    doc.save(`pedidos_${new Date().toISOString().split('T')[0]}.pdf`);\r\n  } catch (error) {\r\n    console.error('Error al generar el PDF:', error);\r\n    alert('Error al generar el PDF: ' + error.message);\r\n  }\r\n};","// src/components/Admin/utilities/exportToCSV.js\r\nexport const exportToCSV = (orders, totals, deliveryPersons, setSuccess) => {\r\n  const headers = [\r\n    'ID Pedido', 'N Bandeja', 'Sopa', 'Principio', 'Protena', 'Bebida', 'Cubiertos', 'Acompaamientos', 'Adiciones', 'Notas',\r\n    'Hora de Entrega', 'Direccin', 'Tipo de Lugar', 'Nombre del Local', 'Nombre del Destinatario', 'Detalles de Unidad',\r\n    'Telfono', 'Pago (Bandeja)', 'Total (COP)', 'Pago (General)', 'Domiciliario', 'Estado', 'Fecha de Creacin', 'ltima Actualizacin'\r\n  ];\r\n\r\n  const orderRows = orders.flatMap(order => \r\n    order.meals.map((meal, index) => [\r\n      order.id, index + 1, meal.soup?.name || meal.soup || 'Sin sopa',\r\n      Array.isArray(meal.principle) ? meal.principle.map(p => p.name || p).join(', ') : meal.principle?.name || meal.principle || 'Sin principio',\r\n      meal.protein?.name || meal.protein || 'Sin protena', meal.drink?.name || meal.drink || 'Sin bebida',\r\n      meal.cutlery?.name || meal.cutlery || 'No', meal.sides?.map(s => s.name || s).join(', ') || 'Ninguno',\r\n      meal.additions?.map(a => `${a.name || ''}${a.protein || a.replacement ? ` (${a.protein || a.replacement})` : ''} (${a.quantity || 1})`).join(', ') || 'Ninguna',\r\n      meal.notes || 'Ninguna', meal.time?.name || meal.time || 'No especificada', meal.address?.address || 'Sin direccin',\r\n      meal.address?.addressType || 'No especificado', meal.address?.localName || '', meal.address?.recipientName || '',\r\n      meal.address?.unitDetails || '', meal.address?.phoneNumber || 'No especificado',\r\n      meal.payment?.name || meal.payment || 'Efectivo', `$${order.total?.toLocaleString('es-CO') || '0'}`,\r\n      order.payment || 'Efectivo', order.deliveryPerson || 'Sin asignar', order.status || 'Pendiente',\r\n      order.createdAt ? new Date(order.createdAt.seconds * 1000).toLocaleString('es-CO') : 'N/A',\r\n      order.updatedAt ? new Date(order.updatedAt.seconds * 1000).toLocaleString('es-CO') : 'N/A',\r\n    ].map(cell => `\"${String(cell || '').replace(/\"/g, '\"\"')}\"`))\r\n  );\r\n\r\n  const totalsRows = [\r\n    ['Total Efectivo', `$${totals.cash.toLocaleString('es-CO')}`],\r\n    ['Total Daviplata', `$${totals.daviplata.toLocaleString('es-CO')}`],\r\n    ['Total Nequi', `$${totals.nequi.toLocaleString('es-CO')}`],\r\n    ['Total General', `$${(totals.cash + totals.daviplata + totals.nequi).toLocaleString('es-CO')}`],\r\n  ].map(row => row.map(cell => `\"${String(cell || '').replace(/\"/g, '\"\"')}\"`));\r\n\r\n  const deliveryRows = Object.entries(deliveryPersons).map(([name, data]) => [\r\n    name, `$${data.cash.toLocaleString('es-CO')}`, `$${data.daviplata.toLocaleString('es-CO')}`, \r\n    `$${data.nequi.toLocaleString('es-CO')}`, `$${data.total.toLocaleString('es-CO')}`\r\n  ].map(cell => `\"${String(cell || '').replace(/\"/g, '\"\"')}\"`));\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...orderRows,\r\n    '',\r\n    '\"Resumen de Totales\"',\r\n    '\"Concepto\",\"Monto (COP)\"',\r\n    ...totalsRows,\r\n    '\"Resumen por Domiciliarios\"',\r\n    '\"Domiciliario\",\"Efectivo (COP)\",\"Daviplata (COP)\",\"Nequi (COP)\",\"Total (COP)\"',\r\n    ...deliveryRows,\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = `pedidos_${new Date().toISOString().split('T')[0]}.csv`;\r\n  a.click();\r\n  window.URL.revokeObjectURL(url);\r\n  setSuccess('Pedidos exportados a CSV.');\r\n};","// src/components/Admin/utils.js\r\nexport const cleanText = (text) => {\r\n  if (text == null) return '';\r\n  if (typeof text === 'string') return text.replace(' NUEVO', '').trim();\r\n  if (typeof text === 'boolean') return text.toString();\r\n  if (typeof text === 'object' && text?.name) return text.name.replace(' NUEVO', '').trim();\r\n  return String(text).replace(' NUEVO', '').trim();\r\n};\r\n\r\nexport const getNestedProperty = (obj, path) => {\r\n  if (!obj || !path) return '';\r\n  return path.split('.').reduce((acc, part) => (acc && acc[part] !== undefined ? acc[part] : ''), obj);\r\n};\r\n\r\nexport const getAddressDisplay = (address) => {\r\n  if (!address?.address) return 'Sin direccin';\r\n  let display = address.address;\r\n  switch (address.addressType) {\r\n    case 'school': if (address.recipientName) display += ` (Recibe: ${cleanText(address.recipientName)})`; break;\r\n    case 'complex': if (address.unitDetails) display += ` (${cleanText(address.unitDetails)})`; break;\r\n    case 'shop': if (address.localName) display += ` (${cleanText(address.localName)})`; break;\r\n    default: break;\r\n  }\r\n  return display;\r\n};\r\n\r\nexport const getMealDetailsDisplay = (meal) => {\r\n  const components = [];\r\n  const soupDisplay = meal.soupReplacement?.name || meal.soupReplacement ? `${cleanText(meal.soupReplacement?.name || meal.soupReplacement)} (por sopa)` : meal.soup?.name || meal.soup ? cleanText(meal.soup?.name || meal.soup) : 'Sin sopa';\r\n  components.push(`Sopa: ${soupDisplay}`);\r\n  let principleDisplay;\r\n  if (meal.principleReplacement?.name || meal.principleReplacement) {\r\n    principleDisplay = `${cleanText(meal.principleReplacement?.name || meal.principleReplacement)} (por principio)`;\r\n  } else if (Array.isArray(meal.principle) && meal.principle.length > 0) {\r\n    const principleNames = meal.principle.map(p => cleanText(p.name || p)).filter(Boolean);\r\n    principleDisplay = principleNames.length > 0 ? principleNames.join(', ') : 'Sin principio';\r\n  } else if (meal.principle?.name || meal.principle) {\r\n    principleDisplay = cleanText(meal.principle?.name || meal.principle);\r\n  } else {\r\n    principleDisplay = 'Sin principio';\r\n  }\r\n  components.push(`Principio: ${principleDisplay}`);\r\n  components.push(`Protena: ${meal.protein?.name || meal.protein ? cleanText(meal.protein?.name || meal.protein) : 'Sin protena'}`);\r\n  const drinkName = meal.drink?.name || meal.drink || '';\r\n  components.push(`Bebida: ${drinkName === 'Juego de mango' ? 'Jugo de mango' : cleanText(drinkName) || 'Sin bebida'}`);\r\n  components.push(`Cubiertos: ${meal.cutlery?.name === 'S' || meal.cutlery === true || meal.cutlery === 'true' ? 'S' : 'No'}`);\r\n  const sides = meal.sides?.length > 0 ? meal.sides.map(s => cleanText(s.name || s)).filter(Boolean).join(', ') : 'Ninguno';\r\n  components.push(`Acompaamientos: ${sides}`);\r\n  const additions = meal.additions?.length > 0 ? meal.additions.map(a => `${cleanText(a.name || a)}${a.protein || a.replacement ? ` (${cleanText(a.protein || a.replacement)})` : ''} (${a.quantity || 1})`).join(', ') : 'Ninguna';\r\n  components.push(`Adiciones: ${additions}`);\r\n  components.push(`Notas: ${meal.notes ? cleanText(meal.notes) : 'Ninguna'}`);\r\n  components.push(`Hora de Entrega: ${meal.time?.name || meal.time ? cleanText(meal.time?.name || meal.time) : 'No especificada'}`);\r\n  components.push(`Direccin: ${getAddressDisplay(meal.address)}`);\r\n  let addressTypeDisplay = '';\r\n  switch (meal.address?.addressType) {\r\n    case 'house': addressTypeDisplay = 'Casa/Apto'; break;\r\n    case 'school': addressTypeDisplay = 'Colegio/Oficina'; break;\r\n    case 'complex': addressTypeDisplay = 'Conjunto'; break;\r\n    case 'shop': addressTypeDisplay = 'Tienda/Local'; break;\r\n    default: addressTypeDisplay = 'No especificado'; break;\r\n  }\r\n  components.push(`Tipo de Lugar: ${addressTypeDisplay}`);\r\n  components.push(`Telfono: ${meal.address?.phoneNumber ? cleanText(meal.address.phoneNumber) : 'No especificado'}`);\r\n  if (meal.address?.addressType === 'shop' && meal.address?.localName) components.push(`Nombre del Local: ${cleanText(meal.address.localName)}`);\r\n  if (meal.address?.addressType === 'school' && meal.address?.recipientName) components.push(`Recibe: ${cleanText(meal.address.recipientName)}`);\r\n  if (meal.address?.addressType === 'complex' && meal.address?.unitDetails) components.push(`Unidad: ${cleanText(meal.address.unitDetails)}`);\r\n  components.push(`Pago: ${meal.payment?.name || meal.payment ? cleanText(meal.payment?.name || meal.payment) : 'Efectivo'}`);\r\n  return components.join('\\n');\r\n};\r\n\r\nexport const areMealsIdentical = (meals) => {\r\n  if (!meals || meals.length <= 1) return { areIdentical: false, count: 1 };\r\n  const fieldsToCompare = [\r\n    'soup', 'soupReplacement', 'principle', 'principleReplacement', 'protein', 'drink', 'cutlery', 'notes', 'time', 'payment',\r\n    'address.address', 'address.addressType', 'address.phoneNumber', 'address.localName', 'address.recipientName', 'address.unitDetails', 'sides', 'additions'\r\n  ];\r\n  const getMealSignature = (meal) => {\r\n    return fieldsToCompare.map(field => {\r\n      const value = getNestedProperty(meal, field);\r\n      if (field === 'sides' && Array.isArray(value)) return value.map(s => cleanText(s.name || s)).sort().join(',');\r\n      if (field === 'additions' && Array.isArray(value)) return value.map(a => `${cleanText(a.name || a)}${a.protein || a.replacement ? `:${cleanText(a.protein || a.replacement)}` : ''}:${a.quantity || 1}`).sort().join(';');\r\n      if (field === 'principle' && Array.isArray(value)) return value.map(p => cleanText(p.name || p)).sort().join(',');\r\n      return cleanText(value);\r\n    }).join('|');\r\n  };\r\n  const firstSignature = getMealSignature(meals[0]);\r\n  const areIdentical = meals.every(meal => getMealSignature(meal) === firstSignature);\r\n  return { areIdentical, count: meals.length };\r\n};","import React, { useRef, useEffect } from 'react';\r\nimport { classNames } from '../../utils/classNames.js';\r\nimport { cleanText, getAddressDisplay } from './utils.js';\r\nimport { ArrowDownTrayIcon, ChevronLeftIcon, ChevronRightIcon, InformationCircleIcon, PencilIcon, TrashIcon, EllipsisVerticalIcon, PlusIcon } from '@heroicons/react/24/outline';\r\n\r\nconst TablaPedidos = ({\r\n  theme,\r\n  orders,\r\n  searchTerm,\r\n  setSearchTerm,\r\n  totals,\r\n  isLoading,\r\n  paginatedOrders,\r\n  currentPage,\r\n  totalPages,\r\n  setCurrentPage,\r\n  itemsPerPage,\r\n  setItemsPerPage,\r\n  deliveryPersons,\r\n  handleEditOrder,\r\n  handleDeleteOrder,\r\n  handleStatusChange,\r\n  handleSort,\r\n  getSortIcon,\r\n  setShowMealDetails,\r\n  editingDeliveryId,\r\n  setEditingDeliveryId,\r\n  editForm,\r\n  setEditForm,\r\n  handleDeliveryChange,\r\n  sortOrder,\r\n  showProteinModal,\r\n  setShowProteinModal,\r\n  isMenuOpen,\r\n  setIsMenuOpen,\r\n  handleOpenPreview,\r\n  handleOpenExcelPreview,\r\n  handleExport,\r\n  handleDeleteAllOrders,\r\n  setShowConfirmDeleteAll,\r\n  exportToExcel,\r\n  exportToPDF,\r\n  exportToCSV,\r\n  setShowAddOrderModal,\r\n  orderTypeFilter,\r\n  setOrderTypeFilter,\r\n  uniqueDeliveryPersons, // Nueva prop para la lista de domiciliarios\r\n}) => {\r\n  const currentDate = new Date().toLocaleDateString('es-CO', {\r\n    weekday: 'long',\r\n    month: 'long',\r\n    day: 'numeric',\r\n  });\r\n\r\n  const menuRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\r\n        setIsMenuOpen(false);\r\n      }\r\n    }\r\n\r\n    if (isMenuOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [isMenuOpen, setIsMenuOpen]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        <h2 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6\">Gestin de Pedidos</h2>\r\n\r\n        {/* Totals Section */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 text-sm text-gray-700 dark:text-gray-300\">\r\n          <div className={classNames(\"p-3 sm:p-4 rounded-lg shadow-sm\", theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100')}>\r\n            <p className=\"font-semibold text-sm sm:text-base\">Total Efectivo</p>\r\n            <p className=\"text-lg sm:text-xl font-bold\">${totals.cash.toLocaleString('es-CO')}</p>\r\n          </div>\r\n          <div className={classNames(\"p-3 sm:p-4 rounded-lg shadow-sm\", theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100')}>\r\n            <p className=\"font-semibold text-sm sm:text-base\">Total Daviplata</p>\r\n            <p className=\"text-lg sm:text-xl font-bold\">${totals.daviplata.toLocaleString('es-CO')}</p>\r\n          </div>\r\n          <div className={classNames(\"p-3 sm:p-4 rounded-lg shadow-sm\", theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100')}>\r\n            <p className=\"font-semibold text-sm sm:text-base\">Total Nequi</p>\r\n            <p className=\"text-lg sm:text-xl font-bold\">${totals.nequi.toLocaleString('es-CO')}</p>\r\n          </div>\r\n          <div className={classNames(\"p-3 sm:p-4 rounded-lg shadow-sm\", theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100')}>\r\n            <p className=\"font-semibold text-sm sm:text-base\">Total General</p>\r\n            <p className=\"text-lg sm:text-xl font-bold\">${(totals.cash + totals.daviplata + totals.nequi).toLocaleString('es-CO')}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Search, Proteins, Date, and Menu */}\r\n        <div className=\"flex flex-wrap justify-center sm:justify-between items-center mb-6 gap-3 sm:gap-4\">\r\n          <input\r\n            type=\"text\"\r\n            value={searchTerm}\r\n            onChange={e => setSearchTerm(e.target.value)}\r\n            placeholder=\"Buscar pedidos...\"\r\n            className={classNames(\r\n              \"p-2 sm:p-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:max-w-xs shadow-sm text-sm sm:text-base transition-all duration-200\",\r\n              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-300 bg-white text-gray-900'\r\n            )}\r\n          />\r\n          <div className=\"flex flex-wrap items-center justify-center sm:justify-end gap-2\">\r\n            <button\r\n              onClick={() => setShowProteinModal(true)}\r\n              className={classNames(\r\n                \"flex items-center justify-center gap-2 px-3 py-2 sm:px-5 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0\",\r\n                theme === 'dark'\r\n                  ? 'bg-gray-600 hover:bg-gray-500 text-white border border-gray-500'\r\n                  : 'bg-gray-200 hover:bg-gray-300 text-gray-900 border border-gray-400'\r\n              )}\r\n            >\r\n              <PlusIcon className=\"w-4 h-4\" />\r\n              <span className=\"hidden md:inline\">Protenas del Da</span>\r\n            </button>\r\n            <div\r\n              className={classNames(\r\n                \"flex items-center justify-center gap-2 px-3 py-2 sm:px-5 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold shadow-sm border transition-colors duration-200 flex-shrink-0\",\r\n                theme === 'dark'\r\n                  ? 'bg-gray-700 text-white border-gray-500'\r\n                  : 'bg-gray-200 text-gray-900 border-gray-400'\r\n              )}\r\n            >\r\n              {currentDate}\r\n            </div>\r\n            <div className=\"relative flex-shrink-0\" ref={menuRef}>\r\n              <button\r\n                onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n                className={classNames(\r\n                  \"flex items-center justify-center p-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200\",\r\n                  'focus:outline-none focus:ring-2 focus:ring-blue-500'\r\n                )}\r\n                aria-label=\"Opciones de men\"\r\n              >\r\n                <EllipsisVerticalIcon\r\n                  className={classNames(\r\n                    \"w-6 h-6\",\r\n                    theme === 'dark' ? 'text-gray-200 hover:text-white' : 'text-gray-700 hover:text-gray-900'\r\n                  )}\r\n                />\r\n              </button>\r\n              {isMenuOpen && (\r\n                <div className={classNames(\r\n                  \"absolute right-0 mt-2 w-48 rounded-lg shadow-xl z-50\",\r\n                  theme === 'dark' ? 'bg-gray-700 text-gray-200' : 'bg-white text-gray-900'\r\n                )}>\r\n                  <div className=\"py-1\">\r\n                    <button\r\n                      onClick={() => { setOrderTypeFilter('breakfast'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200\"\r\n                    >\r\n                      Ver Desayunos\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setOrderTypeFilter('lunch'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200\"\r\n                    >\r\n                      Ver Almuerzos\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setOrderTypeFilter('all'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200\"\r\n                    >\r\n                      Ver Todos\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setShowAddOrderModal(true); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200\"\r\n                    >\r\n                      Generar Orden\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleOpenPreview(); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200\"\r\n                    >\r\n                      Vista Previa PDF\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleOpenExcelPreview(); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200\"\r\n                    >\r\n                      Vista Previa Excel\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleExport(exportToExcel, 'Excel'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center\"\r\n                    >\r\n                      <ArrowDownTrayIcon className=\"w-4 h-4 mr-2\" />\r\n                      Exportar Excel\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleExport(exportToPDF, 'PDF'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center\"\r\n                    >\r\n                      <ArrowDownTrayIcon className=\"w-4 h-4 mr-2\" />\r\n                      Exportar PDF\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { handleExport(exportToCSV, 'CSV'); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 flex items-center\"\r\n                    >\r\n                      <ArrowDownTrayIcon className=\"w-4 h-4 mr-2\" />\r\n                      Exportar CSV\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setShowConfirmDeleteAll(true); setIsMenuOpen(false); }}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 text-red-500\"\r\n                    >\r\n                      Eliminar Todos\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Orders Table */}\r\n        <div className={classNames(\r\n          \"p-3 sm:p-4 rounded-2xl shadow-xl max-h-[70vh] overflow-y-auto custom-scrollbar transition-all duration-300\",\r\n          theme === 'dark' ? 'bg-gray-800' : 'bg-white'\r\n        )}>\r\n          {isLoading ? (\r\n            <div className=\"flex justify-center items-center h-40\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500\"></div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full text-left border-collapse text-sm\">\r\n                  <thead>\r\n                    <tr className={classNames(\r\n                      \"font-semibold sticky top-0 z-10 shadow-sm\",\r\n                      theme === 'dark' ? 'bg-gray-700 text-gray-200' : 'bg-gray-100 text-gray-700'\r\n                    )}>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('orderNumber')}>\r\n                        N {getSortIcon('orderNumber')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b whitespace-nowrap\">Detalles</th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('meals.0.address.address')}>\r\n                        Direccin {getSortIcon('meals.0.address.address')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('meals.0.address.phoneNumber')}>\r\n                        Telfono {getSortIcon('meals.0.address.phoneNumber')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('meals.0.time.name')}>\r\n                        Hora {getSortIcon('meals.0.time.name')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('payment')}>\r\n                        Pago {getSortIcon('payment')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('total')}>\r\n                        Total {getSortIcon('total')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('deliveryPerson')}>\r\n                        Domiciliario {getSortIcon('deliveryPerson')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b cursor-pointer whitespace-nowrap\" onClick={() => handleSort('status')}>\r\n                        Estado {getSortIcon('status')}\r\n                      </th>\r\n                      <th className=\"p-2 sm:p-3 border-b whitespace-nowrap\">Acciones</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {paginatedOrders.length === 0 ? (\r\n                      <tr>\r\n                        <td colSpan=\"10\" className=\"p-6 text-center text-gray-500 dark:text-gray-400\">\r\n                          No se encontraron pedidos. Intenta ajustar tu bsqueda o filtros.\r\n                        </td>\r\n                      </tr>\r\n                    ) : (\r\n                      paginatedOrders.map((order, index) => {\r\n                        const displayNumber = sortOrder === 'asc'\r\n                          ? (currentPage - 1) * itemsPerPage + index + 1\r\n                          : paginatedOrders.length - ((currentPage - 1) * itemsPerPage + index);\r\n                        const addressDisplay = getAddressDisplay(order.meals?.[0]?.address || order.breakfasts?.[0]?.address);\r\n                        const paymentDisplay = cleanText(order.payment || order.meals?.[0]?.payment?.name || order.breakfasts?.[0]?.payment?.name || 'Sin pago');\r\n                        const statusClass = order.status === 'Pendiente' ? 'bg-yellow-500 text-black' : order.status === 'Entregado' ? 'bg-green-500 text-white' : order.status === 'Cancelado' ? 'bg-red-500 text-white' : '';\r\n\r\n                        const timeValue = order.meals?.[0]?.time || order.breakfasts?.[0]?.time;\r\n                        let displayTime = 'N/A';\r\n                        if (typeof timeValue === 'string') {\r\n                          displayTime = timeValue;\r\n                        } else if (typeof timeValue === 'object' && timeValue !== null) {\r\n                          displayTime = timeValue.name || 'N/A';\r\n                        }\r\n\r\n                        return (\r\n                          <tr\r\n                            key={order.id}\r\n                            className={classNames(\r\n                              \"border-b transition-colors duration-150\",\r\n                              theme === 'dark' ? 'border-gray-700 hover:bg-gray-700' : 'border-gray-200 hover:bg-gray-50',\r\n                              index % 2 === 0 ? (theme === 'dark' ? 'bg-gray-750' : 'bg-gray-50') : ''\r\n                            )}\r\n                          >\r\n                            <td className=\"p-2 sm:p-3 text-gray-300\">{displayNumber}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-300\">\r\n                              <button\r\n                                onClick={() => setShowMealDetails(order)}\r\n                                className=\"text-blue-400 hover:text-blue-300 text-xs sm:text-sm flex items-center\"\r\n                                title=\"Ver detalles de la bandeja\"\r\n                              >\r\n                                <InformationCircleIcon className=\"w-4 h-4 mr-1\" />\r\n                                Ver\r\n                              </button>\r\n                            </td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-300 max-w-[150px] sm:max-w-xs overflow-hidden text-ellipsis whitespace-nowrap\">{addressDisplay}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-300 whitespace-nowrap\">{order.meals?.[0]?.address?.phoneNumber || order.breakfasts?.[0]?.address?.phoneNumber || 'N/A'}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-300 whitespace-nowrap\">{displayTime}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-300 whitespace-nowrap\">{paymentDisplay}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-300 whitespace-nowrap\">${order.total?.toLocaleString('es-CO') || '0'}</td>\r\n                            <td className=\"p-2 sm:p-3 text-gray-300 whitespace-nowrap\">\r\n                              {editingDeliveryId === order.id ? (\r\n                                <select\r\n                                  value={order.deliveryPerson || 'Sin asignar'}\r\n                                  onChange={(e) => {\r\n                                    const newValue = e.target.value;\r\n                                    handleDeliveryChange(order.id, newValue);\r\n                                  }}\r\n                                  onBlur={() => setEditingDeliveryId(null)}\r\n                                  className={classNames(\r\n                                    \"w-24 p-1 rounded-md border text-sm\",\r\n                                    theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                                    \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                                  )}\r\n                                  autoFocus\r\n                                >\r\n                                  <option value=\"Sin asignar\">Sin asignar</option>\r\n                                  {uniqueDeliveryPersons.map((person) => (\r\n                                    <option key={person} value={person}>{person}</option>\r\n                                  ))}\r\n                                </select>\r\n                              ) : (\r\n                                <span\r\n                                  onClick={() => setEditingDeliveryId(order.id)}\r\n                                  className=\"cursor-pointer hover:text-blue-400\"\r\n                                >\r\n                                  {order.deliveryPerson || 'Sin asignar'}\r\n                                </span>\r\n                              )}\r\n                            </td>\r\n                            <td className=\"p-2 sm:p-3 whitespace-nowrap\">\r\n                              <select\r\n                                value={order.status || 'Pendiente'}\r\n                                onChange={(e) => handleStatusChange(order.id, e.target.value)}\r\n                                className={classNames(\r\n                                  \"px-2 py-1 rounded-full text-xs font-semibold appearance-none cursor-pointer\",\r\n                                  statusClass,\r\n                                  theme === 'dark' ? 'bg-opacity-70' : 'bg-opacity-90',\r\n                                  \"focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                )}\r\n                              >\r\n                                <option value=\"Pendiente\">Pendiente</option>\r\n                                <option value=\"En Preparacin\">En Preparacin</option>\r\n                                <option value=\"En Camino\">En Camino</option>\r\n                                <option value=\"Entregado\">Entregado</option>\r\n                                <option value=\"Cancelado\">Cancelado</option>\r\n                              </select>\r\n                            </td>\r\n                            <td className=\"p-2 sm:p-3 whitespace-nowrap\">\r\n                              <div className=\"flex gap-2\">\r\n                                <button\r\n                                  onClick={() => handleEditOrder(order)}\r\n                                  className=\"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md\"\r\n                                  title=\"Editar pedido\"\r\n                                  aria-label={`Editar pedido ${displayNumber}`}\r\n                                >\r\n                                  <PencilIcon className=\"w-5 h-5\" />\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteOrder(order.id)}\r\n                                  className=\"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md\"\r\n                                  title=\"Eliminar pedido\"\r\n                                  aria-label={`Eliminar pedido ${displayNumber}`}\r\n                                >\r\n                                  <TrashIcon className=\"w-5 h-5\" />\r\n                                </button>\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n\r\n              {/* Pagination */}\r\n              <div className=\"flex flex-wrap justify-between items-center mt-6 gap-3\">\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300\">\r\n                  <span>Pedidos por pgina:</span>\r\n                  <select\r\n                    value={itemsPerPage}\r\n                    onChange={(e) => { setItemsPerPage(Number(e.target.value)); setCurrentPage(1); }}\r\n                    className={classNames(\r\n                      \"p-2 rounded-md border text-sm\",\r\n                      theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-300 bg-white text-gray-900'\r\n                    )}\r\n                  >\r\n                    <option value=\"10\">10</option>\r\n                    <option value=\"20\">20</option>\r\n                    <option value=\"30\">30</option>\r\n                    <option value=\"50\">50</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300\">\r\n                  <button\r\n                    onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n                    disabled={currentPage === 1}\r\n                    className={classNames(\r\n                      \"p-2 rounded-md transition-colors duration-200\",\r\n                      currentPage === 1\r\n                        ? 'text-gray-400 dark:text-gray-600 cursor-not-allowed'\r\n                        : theme === 'dark' ? 'hover:bg-gray-700 text-gray-200' : 'hover:bg-gray-100 text-gray-700'\r\n                    )}\r\n                  >\r\n                    <ChevronLeftIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                  <span>Pgina {currentPage} de {totalPages}</span>\r\n                  <button\r\n                    onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n                    disabled={currentPage === totalPages}\r\n                    className={classNames(\r\n                      \"p-2 rounded-md transition-colors duration-200\",\r\n                      currentPage === totalPages\r\n                        ? 'text-gray-400 dark:text-gray-600 cursor-not-allowed'\r\n                        : theme === 'dark' ? 'hover:bg-gray-700 text-gray-200' : 'hover:bg-gray-100 text-gray-700'\r\n                    )}\r\n                  >\r\n                    <ChevronRightIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TablaPedidos;","import React, { useState } from 'react';\r\nimport { Dialog, Transition } from '@headlessui/react';\r\nimport { XMarkIcon, TrashIcon, PencilIcon } from '@heroicons/react/24/outline';\r\nimport { classNames } from '../../utils/classNames';\r\nimport { getMealDetailsDisplay, areMealsIdentical } from './utils';\r\nimport { db } from '../../config/firebase';\r\nimport { deleteDoc, doc, updateDoc } from 'firebase/firestore';\r\n\r\nconst InteraccionesPedidos = ({\r\n  theme,\r\n  showProteinModal,\r\n  setShowProteinModal,\r\n  newProtein,\r\n  setNewProtein,\r\n  handleAddProtein,\r\n  proteins,\r\n  totalProteinUnits,\r\n  isLoading,\r\n  showMealDetails,\r\n  setShowMealDetails,\r\n  editingOrder,\r\n  setEditingOrder,\r\n  editForm,\r\n  handleMealFormFieldChange,\r\n  handleEditFormFieldChange,\r\n  handleSaveEdit,\r\n  showConfirmDeleteAll,\r\n  setShowConfirmDeleteAll,\r\n  confirmText,\r\n  setConfirmText,\r\n  handleDeleteAllOrders,\r\n  setError,\r\n  setSuccess,\r\n  showAddOrderModal,\r\n  setShowAddOrderModal,\r\n  newOrderForm,\r\n  handleNewOrderMealFormFieldChange,\r\n  handleNewOrderFieldChange,\r\n  handleAddOrderSubmit,\r\n  uniqueDeliveryPersons,\r\n}) => {\r\n  const [editingProtein, setEditingProtein] = useState(null);\r\n\r\n  const handleDeleteProtein = async (proteinId) => {\r\n    try {\r\n      await deleteDoc(doc(db, 'dailyProteins', proteinId));\r\n      setSuccess('Protena eliminada correctamente.');\r\n    } catch (error) {\r\n      setError(`Error al eliminar protena: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleEditProtein = (protein) => {\r\n    setEditingProtein(protein);\r\n  };\r\n\r\n  const handleUpdateProtein = async () => {\r\n    if (!editingProtein.name || !editingProtein.quantity || isNaN(editingProtein.quantity) || Number(editingProtein.quantity) <= 0) {\r\n      setError('Por favor, ingrese un nombre de protena vlido y una cantidad mayor a 0.');\r\n      return;\r\n    }\r\n    try {\r\n      await updateDoc(doc(db, 'dailyProteins', editingProtein.id), {\r\n        name: editingProtein.name.trim(),\r\n        quantity: Number(editingProtein.quantity),\r\n      });\r\n      setSuccess('Protena actualizada correctamente.');\r\n      setEditingProtein(null);\r\n    } catch (error) {\r\n      setError(`Error al actualizar protena: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleCancelEditProtein = () => {\r\n    setEditingProtein(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Dilogo para gestionar protenas */}\r\n      <Transition show={showProteinModal} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => { setShowProteinModal(false); setEditingProtein(null); }}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-md p-6 rounded-lg shadow-md\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <Dialog.Title className=\"text-lg font-medium\">\r\n                    {editingProtein ? 'Editar Protena' : 'Gestionar Protenas'}\r\n                  </Dialog.Title>\r\n                  <button\r\n                    onClick={() => { setShowProteinModal(false); setEditingProtein(null); }}\r\n                    className=\"text-gray-500 hover:text-gray-400\"\r\n                    aria-label=\"Cerrar modal\"\r\n                  >\r\n                    <XMarkIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                  {editingProtein ? (\r\n                    <>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingProtein.name}\r\n                          onChange={e => setEditingProtein({ ...editingProtein, name: e.target.value })}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                          placeholder=\"Ej: Pollo\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Cantidad</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={editingProtein.quantity}\r\n                          onChange={e => setEditingProtein({ ...editingProtein, quantity: e.target.value })}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                          placeholder=\"Ej: 50\"\r\n                          min=\"0\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex justify-end gap-2\">\r\n                        <button\r\n                          onClick={handleCancelEditProtein}\r\n                          className={classNames(\r\n                            \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                            theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                          )}\r\n                        >\r\n                          Cancelar\r\n                        </button>\r\n                        <button\r\n                          onClick={handleUpdateProtein}\r\n                          disabled={isLoading}\r\n                          className={classNames(\r\n                            \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                            isLoading ? 'bg-gray-400 cursor-not-allowed' : theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'\r\n                          )}\r\n                        >\r\n                          {isLoading ? 'Guardando...' : 'Actualizar'}\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={newProtein.name}\r\n                          onChange={e => setNewProtein({ ...newProtein, name: e.target.value })}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                          placeholder=\"Ej: Pollo\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Cantidad</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={newProtein.quantity}\r\n                          onChange={e => setNewProtein({ ...newProtein, quantity: e.target.value })}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                          placeholder=\"Ej: 50\"\r\n                          min=\"0\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex justify-end gap-2\">\r\n                        <button\r\n                          onClick={() => setShowProteinModal(false)}\r\n                          className={classNames(\r\n                            \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                            theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                          )}\r\n                        >\r\n                          Cancelar\r\n                        </button>\r\n                        <button\r\n                          onClick={handleAddProtein}\r\n                          disabled={isLoading}\r\n                          className={classNames(\r\n                            \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                            isLoading ? 'bg-gray-400 cursor-not-allowed' : theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'\r\n                          )}\r\n                        >\r\n                          {isLoading ? 'Guardando...' : 'Agregar'}\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                <div className=\"mt-6\">\r\n                  <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Protenas Registradas (Total: {totalProteinUnits} unidades)</h3>\r\n                  {proteins.length === 0 ? (\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">No hay protenas registradas.</p>\r\n                  ) : (\r\n                    <ul className=\"space-y-2\">\r\n                      {proteins.map(protein => (\r\n                        <li\r\n                          key={protein.id}\r\n                          className={classNames(\r\n                            \"flex justify-between items-center p-2 rounded-md\",\r\n                            theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100'\r\n                          )}\r\n                        >\r\n                          <span className=\"text-sm\">{protein.name}: {protein.quantity} unidades</span>\r\n                          <div className=\"flex gap-2\">\r\n                            <button\r\n                              onClick={() => handleEditProtein(protein)}\r\n                              className=\"text-blue-500 hover:text-blue-400 transition-colors duration-150 p-1 rounded-md\"\r\n                              title=\"Editar protena\"\r\n                              aria-label={`Editar ${protein.name}`}\r\n                            >\r\n                              <PencilIcon className=\"w-4 h-4\" />\r\n                            </button>\r\n                            <button\r\n                              onClick={() => handleDeleteProtein(protein.id)}\r\n                              className=\"text-red-500 hover:text-red-400 transition-colors duration-150 p-1 rounded-md\"\r\n                              title=\"Eliminar protena\"\r\n                              aria-label={`Eliminar ${protein.name}`}\r\n                            >\r\n                              <TrashIcon className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n\r\n      {/* Dilogo para detalles del pedido */}\r\n      <Transition show={showMealDetails !== null} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowMealDetails(null)}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4 flex justify-between items-center\">\r\n                  Detalles del Pedido\r\n                  <button\r\n                    onClick={() => setShowMealDetails(null)}\r\n                    className=\"text-gray-500 hover:text-gray-400\"\r\n                    aria-label=\"Cerrar detalles\"\r\n                  >\r\n                    <XMarkIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </Dialog.Title>\r\n                {showMealDetails && (\r\n                  <div className=\"space-y-4 text-sm\">\r\n                    {areMealsIdentical(showMealDetails.meals).areIdentical ? (\r\n                      <div>\r\n                        <h3 className=\"font-medium\">Bandeja (x{areMealsIdentical(showMealDetails.meals).count})</h3>\r\n                        <pre className=\"whitespace-pre-wrap\">{getMealDetailsDisplay(showMealDetails.meals[0])}</pre>\r\n                      </div>\r\n                    ) : (\r\n                      showMealDetails.meals.map((meal, index) => (\r\n                        <div key={index}>\r\n                          <h3 className=\"font-medium\">Bandeja {index + 1}</h3>\r\n                          <pre className=\"whitespace-pre-wrap\">{getMealDetailsDisplay(meal)}</pre>\r\n                        </div>\r\n                      ))\r\n                    )}\r\n                    <p className=\"font-medium\">Total: ${showMealDetails.total?.toLocaleString('es-CO') || '0'}</p>\r\n                    <p className=\"font-medium\">Estado: ${showMealDetails.status || 'Pendiente'}</p>\r\n                    <p className=\"font-medium\">Domiciliario: ${showMealDetails.deliveryPerson || 'Sin asignar'}</p>\r\n                  </div>\r\n                )}\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n\r\n      {/* Dilogo para editar pedido */}\r\n      <Transition show={editingOrder !== null} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setEditingOrder(null)}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4 flex justify-between items-center\">\r\n                  Editar Pedido\r\n                  <button\r\n                    onClick={() => setEditingOrder(null)}\r\n                    className=\"text-gray-500 hover:text-gray-400\"\r\n                    aria-label=\"Cerrar edicin\"\r\n                  >\r\n                    <XMarkIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </Dialog.Title>\r\n                {editForm.meals.map((meal, mealIndex) => (\r\n                  <div key={mealIndex} className=\"mb-6 p-4 border rounded-md border-gray-200 dark:border-gray-600\">\r\n                    <h3 className=\"font-medium mb-2\">Bandeja {mealIndex + 1}</h3>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Sopa</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.soup?.name || meal.soup || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'soup', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Reemplazo de Sopa</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.soupReplacement?.name || meal.soupReplacement || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'soupReplacement', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Principio</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={Array.isArray(meal.principle) ? meal.principle.map(p => p.name || p).join(', ') : meal.principle?.name || meal.principle || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'principle', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Reemplazo de Principio</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.principleReplacement?.name || meal.principleReplacement || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'principleReplacement', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Protena</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.protein?.name || meal.protein || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'protein', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Bebida</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.drink?.name || meal.drink || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'drink', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Cubiertos</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.cutlery?.name || meal.cutlery || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'cutlery', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Acompaamientos</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.sides?.map(s => s.name || s).join(', ') || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'sides', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Adiciones</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.additions?.map(a => `${a.name}${a.protein || a.replacement ? `,${a.protein || a.replacement}` : ''}${a.quantity ? `,${a.quantity}` : ''}`).join('; ') || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'additions', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Notas</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.notes || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'notes', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Hora de Entrega</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.time?.name || meal.time || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'time', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Direccin</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.address?.address || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'address.address', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Telfono</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.address?.phoneNumber || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'address.phoneNumber', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Tipo de Direccin</label>\r\n                        <select\r\n                          value={meal.address?.addressType || ''}\r\n                          onChange={e => handleMealFormFieldChange(mealIndex, 'address.addressType', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        >\r\n                          <option value=\"\">Seleccione</option>\r\n                          <option value=\"house\">Casa/Apto</option>\r\n                          <option value=\"school\">Colegio/Oficina</option>\r\n                          <option value=\"complex\">Conjunto</option>\r\n                          <option value=\"shop\">Tienda/Local</option>\r\n                        </select>\r\n                      </div>\r\n                      {meal.address?.addressType === 'shop' && (\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre del Local</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={meal.address?.localName || ''}\r\n                            onChange={e => handleMealFormFieldChange(mealIndex, 'address.localName', e.target.value)}\r\n                            className={classNames(\r\n                              \"w-full p-2 rounded-md border text-sm\",\r\n                              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                              \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                            )}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                      {meal.address?.addressType === 'school' && (\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre del Recipiente</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={meal.address?.recipientName || ''}\r\n                            onChange={e => handleMealFormFieldChange(mealIndex, 'address.recipientName', e.target.value)}\r\n                            className={classNames(\r\n                              \"w-full p-2 rounded-md border text-sm\",\r\n                              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                              \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                            )}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                {/* Campos de la orden principal */}\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Total</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={editForm.total || 0}\r\n                      onChange={e => handleEditFormFieldChange('total', Number(e.target.value))}\r\n                      className={classNames(\r\n                        \"w-full p-2 rounded-md border text-sm\",\r\n                        theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                        \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      )}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Estado</label>\r\n                    <select\r\n                      value={editForm.status || 'Pendiente'}\r\n                      onChange={e => handleEditFormFieldChange('status', e.target.value)}\r\n                      className={classNames(\r\n                        \"w-full p-2 rounded-md border text-sm\",\r\n                        theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                        \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      )}\r\n                    >\r\n                      <option value=\"Pendiente\">Pendiente</option>\r\n                      <option value=\"En Preparacin\">En Preparacin</option>\r\n                      <option value=\"En Camino\">En Camino</option>\r\n                      <option value=\"Entregado\">Entregado</option>\r\n                      <option value=\"Cancelado\">Cancelado</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Mtodo de Pago</label>\r\n                    <select\r\n                      value={editForm.payment || 'Efectivo'}\r\n                      onChange={e => handleEditFormFieldChange('payment', e.target.value)}\r\n                      className={classNames(\r\n                        \"w-full p-2 rounded-md border text-sm\",\r\n                        theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                        \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      )}\r\n                    >\r\n                      <option value=\"Efectivo\">Efectivo</option>\r\n                      <option value=\"Daviplata\">Daviplata</option>\r\n                      <option value=\"Nequi\">Nequi</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Domiciliario</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editForm.deliveryPerson || 'Sin asignar'}\r\n                      onChange={e => handleEditFormFieldChange('deliveryPerson', e.target.value)}\r\n                      className={classNames(\r\n                        \"w-full p-2 rounded-md border text-sm\",\r\n                        theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                        \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      )}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-6 flex justify-end gap-2\">\r\n                  <button\r\n                    onClick={() => setEditingOrder(null)}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                    )}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    onClick={handleSaveEdit}\r\n                    disabled={isLoading}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      isLoading ? 'bg-gray-400 cursor-not-allowed' : theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'\r\n                    )}\r\n                  >\r\n                    {isLoading ? 'Guardando...' : 'Guardar Cambios'}\r\n                  </button>\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n\r\n      {/* Dilogo para confirmar eliminacin de todos los pedidos */}\r\n      <Transition show={showConfirmDeleteAll} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowConfirmDeleteAll(false)}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-sm p-6 rounded-lg shadow-md text-center\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4\">Confirmar Eliminacin Masiva</Dialog.Title>\r\n                <p className=\"mb-4\">\r\n                  Ests a punto de eliminar <span className=\"font-bold text-red-500\">TODOS</span> los pedidos.\r\n                  Esta accin es irreversible. Para confirmar, escribe \"confirmar\" a continuacin:\r\n                </p>\r\n                <input\r\n                  type=\"text\"\r\n                  value={confirmText}\r\n                  onChange={e => setConfirmText(e.target.value)}\r\n                  className={classNames(\r\n                    \"w-full p-2 rounded-md border text-center text-sm\",\r\n                    theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                    \"focus:outline-none focus:ring-1 focus:ring-red-500\"\r\n                  )}\r\n                  placeholder=\"escribe 'confirmar'\"\r\n                />\r\n                <div className=\"mt-6 flex justify-center gap-2\">\r\n                  <button\r\n                    onClick={() => { setShowConfirmDeleteAll(false); setConfirmText(''); }}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                    )}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    onClick={handleDeleteAllOrders}\r\n                    disabled={isLoading || confirmText.toLowerCase() !== 'confirmar'}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      isLoading || confirmText.toLowerCase() !== 'confirmar' ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-600 hover:bg-red-700 text-white'\r\n                    )}\r\n                  >\r\n                    {isLoading ? 'Eliminando...' : 'Eliminar Todos'}\r\n                  </button>\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n\r\n      {/* Dilogo para generar nueva orden */}\r\n      <Transition show={showAddOrderModal} as={React.Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowAddOrderModal(false)}>\r\n          <Transition.Child\r\n            as={React.Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={React.Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-2xl p-6 rounded-lg shadow-xl max-h-[80vh] overflow-y-auto\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4 flex justify-between items-center\">\r\n                  Generar Nueva Orden\r\n                  <button\r\n                    onClick={() => setShowAddOrderModal(false)}\r\n                    className=\"text-gray-500 hover:text-gray-400\"\r\n                    aria-label=\"Cerrar formulario de nueva orden\"\r\n                  >\r\n                    <XMarkIcon className=\"w-5 h-5\" />\r\n                  </button>\r\n                </Dialog.Title>\r\n                {newOrderForm.meals.map((meal, mealIndex) => (\r\n                  <div key={mealIndex} className=\"mb-6 p-4 border rounded-md border-gray-200 dark:border-gray-600\">\r\n                    <h3 className=\"font-medium mb-2\">Bandeja {mealIndex + 1}</h3>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Sopa</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.soup || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'soup', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Reemplazo de Sopa</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.soupReplacement || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'soupReplacement', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Principio</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={Array.isArray(meal.principle) ? meal.principle.map(p => p.name || p).join(', ') : meal.principle || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'principle', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Reemplazo de Principio</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.principleReplacement || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'principleReplacement', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Protena</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.protein || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'protein', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Bebida</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.drink || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'drink', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Cubiertos</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.cutlery || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'cutlery', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Acompaamientos</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.sides?.map(s => s.name || s).join(', ') || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'sides', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Adiciones</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.additions?.map(a => `${a.name}${a.protein || a.replacement ? `,${a.protein || a.replacement}` : ''}${a.quantity ? `,${a.quantity}` : ''}`).join('; ') || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'additions', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Notas</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.notes || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'notes', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Hora de Entrega</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.time || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'time', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Direccin</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.address?.address || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'address.address', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Telfono</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={meal.address?.phoneNumber || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'address.phoneNumber', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Tipo de Direccin</label>\r\n                        <select\r\n                          value={meal.address?.addressType || ''}\r\n                          onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'address.addressType', e.target.value)}\r\n                          className={classNames(\r\n                            \"w-full p-2 rounded-md border text-sm\",\r\n                            theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                            \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                          )}\r\n                        >\r\n                          <option value=\"\">Seleccione</option>\r\n                          <option value=\"house\">Casa/Apto</option>\r\n                          <option value=\"school\">Colegio/Oficina</option>\r\n                          <option value=\"complex\">Conjunto</option>\r\n                          <option value=\"shop\">Tienda/Local</option>\r\n                        </select>\r\n                      </div>\r\n                      {meal.address?.addressType === 'shop' && (\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre del Local</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={meal.address?.localName || ''}\r\n                            onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'address.localName', e.target.value)}\r\n                            className={classNames(\r\n                              \"w-full p-2 rounded-md border text-sm\",\r\n                              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                              \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                            )}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                      {meal.address?.addressType === 'school' && (\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre del Recipiente</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={meal.address?.recipientName || ''}\r\n                            onChange={e => handleNewOrderMealFormFieldChange(mealIndex, 'address.recipientName', e.target.value)}\r\n                            className={classNames(\r\n                              \"w-full p-2 rounded-md border text-sm\",\r\n                              theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                              \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                            )}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                {/* Campos de la orden principal */}\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Total</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={newOrderForm.total || 0}\r\n                      onChange={e => handleNewOrderFieldChange('total', Number(e.target.value))}\r\n                      className={classNames(\r\n                        \"w-full p-2 rounded-md border text-sm\",\r\n                        theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                        \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      )}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Estado</label>\r\n                    <select\r\n                      value={newOrderForm.status || 'Pendiente'}\r\n                      onChange={e => handleNewOrderFieldChange('status', e.target.value)}\r\n                      className={classNames(\r\n                        \"w-full p-2 rounded-md border text-sm\",\r\n                        theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                        \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      )}\r\n                    >\r\n                      <option value=\"Pendiente\">Pendiente</option>\r\n                      <option value=\"En Preparacin\">En Preparacin</option>\r\n                      <option value=\"En Camino\">En Camino</option>\r\n                      <option value=\"Entregado\">Entregado</option>\r\n                      <option value=\"Cancelado\">Cancelado</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Mtodo de Pago</label>\r\n                    <select\r\n                      value={newOrderForm.payment || 'Efectivo'}\r\n                      onChange={e => handleNewOrderFieldChange('payment', e.target.value)}\r\n                      className={classNames(\r\n                        \"w-full p-2 rounded-md border text-sm\",\r\n                        theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                        \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      )}\r\n                    >\r\n                      <option value=\"Efectivo\">Efectivo</option>\r\n                      <option value=\"Daviplata\">Daviplata</option>\r\n                      <option value=\"Nequi\">Nequi</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Domiciliario</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newOrderForm.deliveryPerson || 'Sin asignar'}\r\n                      onChange={e => handleNewOrderFieldChange('deliveryPerson', e.target.value)}\r\n                      className={classNames(\r\n                        \"w-full p-2 rounded-md border text-sm\",\r\n                        theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                        \"focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n                      )}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-6 flex justify-end gap-2\">\r\n                  <button\r\n                    onClick={() => setShowAddOrderModal(false)}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                    )}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    onClick={handleAddOrderSubmit}\r\n                    disabled={isLoading}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      isLoading ? 'bg-gray-400 cursor-not-allowed' : theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'\r\n                    )}\r\n                  >\r\n                    {isLoading ? 'Guardando...' : 'Crear Orden'}\r\n                  </button>\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InteraccionesPedidos;","//src/components/Admin/OrderManagement.js\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { db } from '../../config/firebase.js';\r\nimport { collection, onSnapshot, updateDoc, doc, deleteDoc, getDocs, query, where, writeBatch, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { exportToExcel } from './utilities/exportToExcel.js';\r\nimport { exportToPDF } from './utilities/exportToPDF.js';\r\nimport { exportToCSV } from './utilities/exportToCSV.js';\r\nimport { generatePreviewHtml } from './utilities/previewOrders.js';\r\nimport { generateExcelPreviewHtml } from './utilities/previewExcel.js';\r\nimport { cleanText } from './utils.js';\r\nimport TablaPedidos from './TablaPedidos.js';\r\nimport InteraccionesPedidos from './InteraccionesPedidos.js';\r\n\r\nconst OrderManagement = ({ setError, setSuccess, theme }) => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [editingOrder, setEditingOrder] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [totals, setTotals] = useState({ cash: 0, daviplata: 0, nequi: 0 });\r\n  const [editForm, setEditForm] = useState({ meals: [], total: 0, status: '', payment: '', deliveryPerson: '' });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [itemsPerPage, setItemsPerPage] = useState(10);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showConfirmDeleteAll, setShowConfirmDeleteAll] = useState(false);\r\n  const [confirmText, setConfirmText] = useState('');\r\n  const [showMealDetails, setShowMealDetails] = useState(null);\r\n  const [editingDeliveryId, setEditingDeliveryId] = useState(null);\r\n  const [deliveryPersons, setDeliveryPersons] = useState({});\r\n  const [sortBy, setSortBy] = useState('createdAt.seconds');\r\n  const [sortOrder, setSortOrder] = useState('desc');\r\n  const [proteins, setProteins] = useState([]);\r\n  const [newProtein, setNewProtein] = useState({ name: '', quantity: '' });\r\n  const [showProteinModal, setShowProteinModal] = useState(false);\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [showAddOrderModal, setShowAddOrderModal] = useState(false);\r\n  const [orderTypeFilter, setOrderTypeFilter] = useState('all'); // Nuevo estado para el filtro de tipo de pedido\r\n  const [newOrderForm, setNewOrderForm] = useState({\r\n    meals: [{\r\n      soup: '',\r\n      soupReplacement: '',\r\n      principle: [{ name: '' }],\r\n      principleReplacement: '',\r\n      protein: '',\r\n      drink: '',\r\n      cutlery: '',\r\n      sides: [],\r\n      additions: [],\r\n      notes: '',\r\n      address: {\r\n        address: '',\r\n        phoneNumber: '',\r\n        addressType: '',\r\n        localName: '',\r\n        recipientName: '',\r\n      },\r\n      time: '',\r\n      payment: 'Efectivo',\r\n    }],\r\n    total: 0,\r\n    status: 'Pendiente',\r\n    payment: 'Efectivo',\r\n    deliveryPerson: 'Sin asignar',\r\n    type: 'lunch', // Por defecto, asumimos almuerzo; cambiar segn el formulario\r\n  });\r\n\r\n  const totalProteinUnits = useMemo(() => proteins.reduce((sum, p) => sum + Number(p.quantity || 0), 0), [proteins]);\r\n\r\n  const logActivity = useCallback(async (action, details = {}) => {\r\n    try {\r\n      await addDoc(collection(db, 'userActivity'), {\r\n        action: action,\r\n        timestamp: serverTimestamp(),\r\n        details: details,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error al registrar actividad:\", error);\r\n    }\r\n  }, []);\r\n\r\n  const handleExport = (exportFunction, format) => {\r\n    try {\r\n      exportFunction(orders, totals, deliveryPersons, totalProteinUnits, proteins);\r\n      setSuccess(`Exportado correctamente como ${format}.`);\r\n      logActivity(`Export pedidos como ${format}`, { format: format });\r\n    } catch (error) {\r\n      console.error(`Error al exportar ${format}:`, error);\r\n      setError(`Error al exportar ${format}: ${error.message}`);\r\n    }\r\n  };\r\n\r\nconst fetchOrders = useCallback(() => {\r\n  setIsLoading(true);\r\n  const ordersColRef = collection(db, 'orders');\r\n  const unsubscribe = onSnapshot(ordersColRef, (snapshot) => {\r\n    const ordersData = snapshot.docs.map(doc => {\r\n      const data = doc.data();\r\n      const meals = Array.isArray(data.meals) && data.meals.length > 0 ? data.meals : [{ address: {}, payment: { name: 'Efectivo' }, time: {} }];\r\n      return {\r\n        id: doc.id,\r\n        ...data,\r\n        meals: meals.map(meal => ({\r\n          ...meal,\r\n          address: meal.address || {},\r\n          payment: meal.payment && typeof meal.payment === 'object' && meal.payment.name ? meal.payment : { name: meal.payment || 'Efectivo' },\r\n          time: meal.time || {},\r\n        })),\r\n        payment: data.payment || (meals[0]?.payment?.name || 'Efectivo'),\r\n        paymentSummary: data.paymentSummary || { Efectivo: 0, Daviplata: 0, Nequi: 0 },\r\n        total: data.total || 0,\r\n        deliveryPerson: data.deliveryPerson || 'Sin asignar',\r\n        status: data.status || 'Pendiente',\r\n      };\r\n    });\r\n    setOrders(ordersData);\r\n\r\n    const newTotals = { cash: 0, daviplata: 0, nequi: 0, general: 0 };\r\n    const newDeliveryPersons = {};\r\n    ordersData.forEach(order => {\r\n      if (order.status !== 'Cancelado') {\r\n        const paymentSummary = order.paymentSummary || { Efectivo: 0, Daviplata: 0, Nequi: 0 };\r\n        newTotals.cash += paymentSummary['Efectivo'] || 0;\r\n        newTotals.daviplata += paymentSummary['Daviplata'] || 0;\r\n        newTotals.nequi += paymentSummary['Nequi'] || 0;\r\n        newTotals.general += order.total || 0;\r\n\r\n        const deliveryPerson = order.deliveryPerson || 'Sin asignar';\r\n        if (deliveryPerson !== 'Sin asignar') {\r\n          if (!newDeliveryPersons[deliveryPerson]) {\r\n            newDeliveryPersons[deliveryPerson] = { cash: 0, daviplata: 0, nequi: 0, total: 0 };\r\n          }\r\n          const paymentType = cleanText(order.payment || 'Efectivo');\r\n          const amount = order.total || 0;\r\n          if (paymentType.toLowerCase() === 'efectivo') newDeliveryPersons[deliveryPerson].cash += amount;\r\n          else if (paymentType.toLowerCase() === 'daviplata') newDeliveryPersons[deliveryPerson].daviplata += amount;\r\n          else if (paymentType.toLowerCase() === 'nequi') newDeliveryPersons[deliveryPerson].nequi += amount;\r\n          newDeliveryPersons[deliveryPerson].total += amount;\r\n        }\r\n      }\r\n    });\r\n    setTotals(newTotals);\r\n    setDeliveryPersons(newDeliveryPersons);\r\n\r\n    setIsLoading(false);\r\n  }, (error) => {\r\n    setError(`Error al cargar pedidos: ${error.message}`);\r\n    setIsLoading(false);\r\n  });\r\n  return () => unsubscribe();\r\n}, [setError]);\r\n\r\n  const fetchProteins = useCallback(() => {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    const proteinsColRef = query(collection(db, 'dailyProteins'), where('date', '==', today));\r\n    const unsubscribe = onSnapshot(proteinsColRef, (snapshot) => {\r\n      const proteinsData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setProteins(proteinsData);\r\n    }, (error) => {\r\n      setError(`Error al cargar protenas: ${error.message}`);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [setError]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribeOrders = fetchOrders();\r\n    const unsubscribeProteins = fetchProteins();\r\n    return () => {\r\n      unsubscribeOrders();\r\n      unsubscribeProteins();\r\n    };\r\n  }, [fetchOrders, fetchProteins]);\r\n\r\n  const filteredOrders = useMemo(() => {\r\n    return orders.filter(order => {\r\n      const lowerSearchTerm = searchTerm.toLowerCase();\r\n      const address = order.meals?.[0]?.address?.address?.toLowerCase() || '';\r\n      const phone = order.meals?.[0]?.address?.phoneNumber?.toLowerCase() || '';\r\n      const time = order.meals?.[0]?.time?.name?.toLowerCase() || order.meals?.[0]?.time?.toLowerCase() || '';\r\n      const payment = cleanText(order.payment || order.meals?.[0]?.payment?.name || order.meals?.[0]?.payment || '').toLowerCase();\r\n      const deliveryPerson = order.deliveryPerson?.toLowerCase() || '';\r\n      const status = order.status?.toLowerCase() || '';\r\n      return (\r\n        (orderTypeFilter === 'all' || order.type === orderTypeFilter) &&\r\n        (address.includes(lowerSearchTerm) ||\r\n         phone.includes(lowerSearchTerm) ||\r\n         time.includes(lowerSearchTerm) ||\r\n         payment.includes(lowerSearchTerm) ||\r\n         deliveryPerson.includes(lowerSearchTerm) ||\r\n         status.includes(lowerSearchTerm))\r\n      );\r\n    });\r\n  }, [orders, searchTerm, orderTypeFilter]);\r\n\r\n  const sortedOrders = useMemo(() => {\r\n    return [...filteredOrders].sort((a, b) => {\r\n      const getValue = (obj, path, currentFilteredOrdersArray) => {\r\n        if (path === 'orderNumber') return obj ? currentFilteredOrdersArray.indexOf(obj) : -1;\r\n        const value = path.split('.').reduce((acc, part) => acc && acc[part], obj);\r\n        return cleanText(value) || '';\r\n      };\r\n      const valueA = getValue(a, sortBy, filteredOrders);\r\n      const valueB = getValue(b, sortBy, filteredOrders);\r\n      if (typeof valueA === 'string' && typeof valueB === 'string') {\r\n        return sortOrder === 'asc' ? valueA.localeCompare(valueB) : valueB.localeCompare(valueA);\r\n      }\r\n      return sortOrder === 'asc' ? valueA - valueB : valueB - valueA;\r\n    });\r\n  }, [filteredOrders, sortBy, sortOrder]);\r\n\r\n  const totalPages = Math.ceil(sortedOrders.length / itemsPerPage);\r\n  const paginatedOrders = useMemo(() => {\r\n    const start = (currentPage - 1) * itemsPerPage;\r\n    const end = start + itemsPerPage;\r\n    return sortedOrders.slice(start, end);\r\n  }, [sortedOrders, currentPage, itemsPerPage]);\r\n\r\n  const handleSort = (key) => {\r\n    if (sortBy === key) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortBy(key);\r\n      setSortOrder('asc');\r\n    }\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const getSortIcon = (key) => {\r\n    if (sortBy !== key) return null;\r\n    return sortOrder === 'asc' ? (\r\n      <svg className=\"w-4 h-4 inline ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 15l7-7 7 7\" />\r\n      </svg>\r\n    ) : (\r\n      <svg className=\"w-4 h-4 inline ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  const handleAddProtein = async () => {\r\n    if (!newProtein.name || !newProtein.quantity || isNaN(newProtein.quantity) || Number(newProtein.quantity) <= 0) {\r\n      setError('Por favor, ingrese un nombre de protena vlido y una cantidad mayor a 0.');\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    try {\r\n      await addDoc(collection(db, 'dailyProteins'), {\r\n        name: newProtein.name.trim(),\r\n        quantity: Number(newProtein.quantity),\r\n        date: new Date().toISOString().split('T')[0],\r\n        createdAt: new Date(),\r\n      });\r\n      setNewProtein({ name: '', quantity: '' });\r\n      setShowProteinModal(false);\r\n      setSuccess('Protena agregada correctamente.');\r\n      logActivity(`Agreg protena: ${newProtein.name} (${newProtein.quantity} unidades)`, { proteinName: newProtein.name, quantity: Number(newProtein.quantity) });\r\n    } catch (error) {\r\n      setError(`Error al agregar protena: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEditOrder = useCallback((order) => {\r\n    setEditingOrder(order);\r\n    setEditForm({\r\n      id: order.id,\r\n      meals: Array.isArray(order.meals) && order.meals.length > 0 ? order.meals.map(meal => ({\r\n        ...meal,\r\n        address: meal.address || {},\r\n        payment: meal.payment ? cleanText(meal.payment?.name || meal.payment) : 'Efectivo',\r\n        additions: Array.isArray(meal.additions) ? meal.additions : [],\r\n        principle: Array.isArray(meal.principle) ? meal.principle : meal.principle ? [{ name: meal.principle.name || meal.principle }] : [],\r\n        cutlery: meal.cutlery || '',\r\n        sides: Array.isArray(meal.sides) ? meal.sides : [],\r\n        soup: meal.soup || '',\r\n        soupReplacement: meal.soupReplacement || '',\r\n        protein: meal.protein || '',\r\n        drink: meal.drink || '',\r\n        time: meal.time || '',\r\n        notes: meal.notes || '',\r\n      })) : [{\r\n        soup: '',\r\n        soupReplacement: '',\r\n        principle: [{ name: '' }],\r\n        principleReplacement: '',\r\n        protein: '',\r\n        drink: '',\r\n        cutlery: '',\r\n        sides: [],\r\n        additions: [],\r\n        notes: '',\r\n        address: {\r\n          address: '',\r\n          phoneNumber: '',\r\n          addressType: '',\r\n          localName: '',\r\n          recipientName: '',\r\n        },\r\n        time: '',\r\n        payment: 'Efectivo',\r\n      }],\r\n      total: order.total || 0,\r\n      status: order.status || 'Pendiente',\r\n      payment: order.payment ? cleanText(order.payment) : 'Efectivo',\r\n      deliveryPerson: order.deliveryPerson || 'Sin asignar',\r\n      type: order.type || 'lunch',\r\n    });\r\n  }, []);\r\n\r\n  const handleEditFormFieldChange = (field, value) => {\r\n    setEditForm(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleEditOrderMealFormFieldChange = (mealIndex, field, value) => {\r\n    setEditForm(prev => {\r\n      const newMeals = [...prev.meals];\r\n      if (!newMeals[mealIndex]) {\r\n        newMeals[mealIndex] = { address: {}, payment: {}, time: {} };\r\n      }\r\n      if (field.includes('.')) {\r\n        const [parent, child] = field.split('.');\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], [parent]: { ...newMeals[mealIndex][parent], [child]: value } };\r\n      } else if (field === 'sides') {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], sides: value.split(',').map(s => ({ name: s.trim() })).filter(s => s.name) };\r\n      } else if (field === 'additions') {\r\n        newMeals[mealIndex] = {\r\n          ...newMeals[mealIndex],\r\n          additions: value.split(';').map(a => {\r\n            const [name, proteinOrReplacement = '', quantity = '1'] = a.split(',');\r\n            return { name: name.trim(), [proteinOrReplacement.includes('por') ? 'replacement' : 'protein']: proteinOrReplacement.trim(), quantity: Number(quantity) || 1 };\r\n          }).filter(a => a.name),\r\n        };\r\n      } else if (field === 'principle') {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], principle: value.split(',').map(p => ({ name: p.trim() })).filter(p => p.name) };\r\n      } else {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], [field]: value };\r\n      }\r\n      return { ...prev, meals: newMeals };\r\n    });\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    if (!editingOrder) return;\r\n    setIsLoading(true);\r\n    try {\r\n      const oldOrder = orders.find(o => o.id === editingOrder.id);\r\n      const previousState = oldOrder ? {\r\n        meals: oldOrder.meals,\r\n        total: oldOrder.total,\r\n        status: oldOrder.status,\r\n        payment: oldOrder.payment,\r\n        deliveryPerson: oldOrder.deliveryPerson,\r\n        type: oldOrder.type,\r\n      } : {};\r\n\r\n      const paymentSummary = {\r\n        'Efectivo': editForm.payment === 'Efectivo' ? Number(editForm.total) || 0 : 0,\r\n        'Daviplata': editForm.payment === 'Daviplata' ? Number(editForm.total) || 0 : 0,\r\n        'Nequi': editForm.payment === 'Nequi' ? Number(editForm.total) || 0 : 0,\r\n      };\r\n\r\n      const updatedMealsForDB = editForm.meals.map(meal => {\r\n        const normalizedMeal = {\r\n          soup: meal.soup ? { name: (typeof meal.soup === 'string' ? meal.soup : meal.soup.name) || '' } : null,\r\n          soupReplacement: meal.soupReplacement ? { name: (typeof meal.soupReplacement === 'string' ? meal.soupReplacement : meal.soupReplacement.name) || '' } : null,\r\n          principle: Array.isArray(meal.principle)\r\n            ? meal.principle.map(p => ({ name: (typeof p === 'string' ? p : p.name) || '' })).filter(p => p.name)\r\n            : meal.principle && typeof meal.principle === 'string'\r\n              ? [{ name: meal.principle }]\r\n              : [],\r\n          principleReplacement: meal.principleReplacement ? { name: (typeof meal.principleReplacement === 'string' ? meal.principleReplacement : meal.principleReplacement.name) || '' } : null,\r\n          protein: meal.protein ? { name: (typeof meal.protein === 'string' ? meal.protein : meal.protein.name) || '' } : null,\r\n          drink: meal.drink ? { name: (typeof meal.drink === 'string' ? meal.drink : meal.drink.name) || '' } : null,\r\n          cutlery: meal.cutlery ? { name: (typeof meal.cutlery === 'string' ? meal.cutlery : meal.cutlery.name) || '' } : null,\r\n          time: meal.time ? { name: (typeof meal.time === 'string' ? meal.time : meal.time.name) || '' } : null,\r\n          payment: meal.payment ? { name: (typeof meal.payment === 'string' ? meal.payment : meal.payment.name) || 'Efectivo' } : { name: 'Efectivo' },\r\n          sides: Array.isArray(meal.sides)\r\n            ? meal.sides.map(s => ({ name: (typeof s === 'string' ? s : s.name) || '' })).filter(s => s.name)\r\n            : [],\r\n          additions: Array.isArray(meal.additions)\r\n            ? meal.additions.map(a => ({\r\n                name: a.name || '',\r\n                protein: a.protein || '',\r\n                replacement: a.replacement || '',\r\n                quantity: Number(a.quantity) || 1,\r\n              })).filter(a => a.name)\r\n            : [],\r\n          notes: meal.notes || '',\r\n          address: {\r\n            address: meal.address?.address || '',\r\n            phoneNumber: meal.address?.phoneNumber || '',\r\n            addressType: meal.address?.addressType || '',\r\n            localName: meal.address?.localName || '',\r\n            recipientName: meal.address?.recipientName || '',\r\n          },\r\n        };\r\n        return Object.fromEntries(\r\n          Object.entries(normalizedMeal).filter(([_, value]) => value !== undefined)\r\n        );\r\n      });\r\n\r\n      const updateData = {\r\n        meals: updatedMealsForDB,\r\n        total: Number(editForm.total) || 0,\r\n        status: editForm.status || 'Pendiente',\r\n        payment: editForm.payment || 'Efectivo',\r\n        deliveryPerson: editForm.deliveryPerson || 'Sin asignar',\r\n        paymentSummary: paymentSummary,\r\n        updatedAt: new Date(),\r\n        type: editForm.type || 'lunch',\r\n      };\r\n\r\n      const cleanedUpdateData = Object.fromEntries(\r\n        Object.entries(updateData).filter(([_, value]) => value !== undefined)\r\n      );\r\n\r\n      await updateDoc(doc(db, editingOrder.type === 'breakfast' ? 'deliveryBreakfastOrders' : 'orders', editingOrder.id), cleanedUpdateData);\r\n      setEditingOrder(null);\r\n      setSuccess('Pedido actualizado correctamente.');\r\n      logActivity(`Edit el pedido con ID: ${editingOrder.id}`, {\r\n        orderId: editingOrder.id,\r\n        previousState: previousState,\r\n        newState: { ...editForm, meals: updatedMealsForDB },\r\n      });\r\n    } catch (error) {\r\n      setError(`Error al guardar: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteOrder = async (orderId) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const orderToDelete = orders.find(o => o.id === orderId);\r\n      await deleteDoc(doc(db, orderToDelete.type === 'breakfast' ? 'deliveryBreakfastOrders' : 'orders', orderId));\r\n      setSuccess('Pedido eliminado correctamente.');\r\n      if (orderToDelete) {\r\n        logActivity(`Elimin el pedido con ID: ${orderId}`, {\r\n          orderId: orderId,\r\n          deletedOrderDetails: { meals: orderToDelete.meals, total: orderToDelete.total, status: orderToDelete.status, payment: orderToDelete.payment, deliveryPerson: orderToDelete.deliveryPerson, type: orderToDelete.type },\r\n        });\r\n      } else {\r\n        logActivity(`Elimin el pedido con ID: ${orderId} (detalles no disponibles)`);\r\n      }\r\n    } catch (error) {\r\n      setError(`Error al eliminar: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAllOrders = async () => {\r\n    if (confirmText.toLowerCase() !== 'confirmar') {\r\n      setError('Por favor, escribe \"confirmar\" para proceder.');\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const ordersSnapshot = await getDocs(collection(db, 'orders'));\r\n      const breakfastOrdersSnapshot = await getDocs(collection(db, 'deliveryBreakfastOrders'));\r\n      ordersSnapshot.forEach(doc => batch.delete(doc.ref));\r\n      breakfastOrdersSnapshot.forEach(doc => batch.delete(doc.ref));\r\n      await batch.commit();\r\n      setShowConfirmDeleteAll(false);\r\n      setConfirmText('');\r\n      setSuccess('Todos los pedidos han sido eliminados.');\r\n      logActivity('Elimin todos los pedidos', { count: ordersSnapshot.size + breakfastOrdersSnapshot.size });\r\n    } catch (error) {\r\n      setError(`Error al eliminar todos los pedidos: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (orderId, newStatus) => {\r\n    try {\r\n      const oldOrder = orders.find(o => o.id === orderId);\r\n      const previousStatus = oldOrder ? oldOrder.status : 'Desconocido';\r\n      const collectionName = oldOrder.type === 'breakfast' ? 'deliveryBreakfastOrders' : 'orders';\r\n\r\n      await updateDoc(doc(db, collectionName, orderId), { status: newStatus, updatedAt: new Date() });\r\n\r\n      if (newStatus === 'Cancelado' && oldOrder && previousStatus !== 'Cancelado') {\r\n        const paymentType = cleanText(oldOrder.payment || 'Efectivo');\r\n        const amount = oldOrder.total || 0;\r\n        const deliveryPerson = cleanText(oldOrder.deliveryPerson || '');\r\n\r\n        setTotals(prev => {\r\n          const newTotals = { ...prev };\r\n          if (paymentType.toLowerCase() === 'efectivo') {\r\n            newTotals.cash = Math.max(0, newTotals.cash - amount);\r\n          } else if (paymentType.toLowerCase() === 'daviplata') {\r\n            newTotals.daviplata = Math.max(0, newTotals.daviplata - amount);\r\n          } else if (paymentType.toLowerCase() === 'nequi') {\r\n            newTotals.nequi = Math.max(0, newTotals.nequi - amount);\r\n          }\r\n          return newTotals;\r\n        });\r\n\r\n        if (deliveryPerson && deliveryPerson !== 'Sin asignar') {\r\n          setDeliveryPersons(prev => {\r\n            const newDeliveryPersons = { ...prev };\r\n            if (newDeliveryPersons[deliveryPerson]) {\r\n              const person = newDeliveryPersons[deliveryPerson];\r\n              if (paymentType.toLowerCase() === 'efectivo') {\r\n                person.cash = Math.max(0, person.cash - amount);\r\n              } else if (paymentType.toLowerCase() === 'daviplata') {\r\n                person.daviplata = Math.max(0, person.daviplata - amount);\r\n              } else if (paymentType.toLowerCase() === 'nequi') {\r\n                person.nequi = Math.max(0, person.nequi - amount);\r\n              }\r\n              person.total = Math.max(0, person.total - amount);\r\n\r\n              if (person.total === 0) {\r\n                delete newDeliveryPersons[deliveryPerson];\r\n              }\r\n            }\r\n            return newDeliveryPersons;\r\n          });\r\n        }\r\n      }\r\n\r\n      setSuccess('Estado actualizado correctamente.');\r\n      logActivity(`Actualiz el estado del pedido ${orderId} a: ${newStatus}`, {\r\n        orderId: orderId,\r\n        previousStatus: previousStatus,\r\n        newStatus: newStatus,\r\n      });\r\n    } catch (error) {\r\n      setError(`Error al actualizar estado: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleDeliveryChange = async (orderId, deliveryPerson) => {\r\n    try {\r\n      const oldOrder = orders.find(o => o.id === orderId);\r\n      const collectionName = oldOrder.type === 'breakfast' ? 'deliveryBreakfastOrders' : 'orders';\r\n      const previousDeliveryPerson = oldOrder ? oldOrder.deliveryPerson : 'Desconocido';\r\n\r\n      await updateDoc(doc(db, collectionName, orderId), { deliveryPerson: deliveryPerson || null, updatedAt: new Date() });\r\n      setEditingDeliveryId(null);\r\n      setSuccess('Domiciliario actualizado correctamente.');\r\n      logActivity(`Asign/Actualiz domiciliario para el pedido ${orderId} a: ${deliveryPerson || 'Sin asignar'}`, {\r\n        orderId: orderId,\r\n        previousDeliveryPerson: previousDeliveryPerson,\r\n        newDeliveryPerson: deliveryPerson || 'Sin asignar',\r\n      });\r\n    } catch (error) {\r\n      setError(`Error al actualizar domiciliario: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleOpenPreview = () => {\r\n    const previewWindow = window.open('', '_blank');\r\n    previewWindow.document.write(generatePreviewHtml(filteredOrders, totals, deliveryPersons));\r\n    previewWindow.document.close();\r\n    logActivity('Abri la vista previa de pedidos (PDF)', { type: 'PDF Preview' });\r\n  };\r\n\r\n  const handleOpenExcelPreview = () => {\r\n    const previewWindow = window.open('', '_blank');\r\n    previewWindow.document.write(generateExcelPreviewHtml(filteredOrders, totals, deliveryPersons, totalProteinUnits, proteins));\r\n    previewWindow.document.close();\r\n    logActivity('Abri la vista previa de pedidos (Excel)', { type: 'Excel Preview' });\r\n  };\r\n\r\n  const handleNewOrderFieldChange = (field, value) => {\r\n    setNewOrderForm(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleNewOrderMealFormFieldChange = (mealIndex, field, value) => {\r\n    setNewOrderForm(prev => {\r\n      const newMeals = [...prev.meals];\r\n      if (!newMeals[mealIndex]) {\r\n        newMeals[mealIndex] = { address: {}, payment: {}, time: {} };\r\n      }\r\n      if (field.includes('.')) {\r\n        const [parent, child] = field.split('.');\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], [parent]: { ...newMeals[mealIndex][parent], [child]: value } };\r\n      } else if (field === 'sides') {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], sides: value.split(',').map(s => ({ name: s.trim() })).filter(s => s.name) };\r\n      } else if (field === 'additions') {\r\n        newMeals[mealIndex] = {\r\n          ...newMeals[mealIndex],\r\n          additions: value.split(';').map(a => {\r\n            const [name, proteinOrReplacement = '', quantity = '1'] = a.split(',');\r\n            return { name: name.trim(), [proteinOrReplacement.includes('por') ? 'replacement' : 'protein']: proteinOrReplacement.trim(), quantity: Number(quantity) || 1 };\r\n          }).filter(a => a.name),\r\n        };\r\n      } else if (field === 'principle') {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], principle: value.split(',').map(p => ({ name: p.trim() })).filter(p => p.name) };\r\n      } else {\r\n        newMeals[mealIndex] = { ...newMeals[mealIndex], [field]: value };\r\n      }\r\n      return { ...prev, meals: newMeals };\r\n    });\r\n  };\r\n\r\n  const handleAddOrderSubmit = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const normalizedMeals = newOrderForm.meals.map(meal => ({\r\n        ...meal,\r\n        soup: meal.soup ? { name: meal.soup } : null,\r\n        soupReplacement: meal.soupReplacement ? { name: meal.soupReplacement } : null,\r\n        principle: Array.isArray(meal.principle) ? meal.principle.map(p => ({ name: p.name || p })) : (meal.principle ? [{ name: meal.principle }] : []),\r\n        principleReplacement: meal.principleReplacement ? { name: meal.principleReplacement } : null,\r\n        protein: meal.protein ? { name: meal.protein } : null,\r\n        drink: meal.drink ? { name: meal.drink } : null,\r\n        cutlery: meal.cutlery ? { name: meal.cutlery } : null,\r\n        time: meal.time ? { name: meal.time } : null,\r\n        payment: newOrderForm.payment ? { name: newOrderForm.payment } : { name: 'Efectivo' },\r\n        sides: Array.isArray(meal.sides) ? meal.sides.map(s => ({ name: s.name || s })) : [],\r\n        additions: Array.isArray(meal.additions) ? meal.additions.map(a => ({ name: a.name || '', protein: a.protein || '', replacement: a.replacement || '', quantity: a.quantity || 1 })) : [],\r\n      }));\r\n\r\n      const paymentSummary = {\r\n        'Efectivo': newOrderForm.payment === 'Efectivo' ? Number(newOrderForm.total) || 0 : 0,\r\n        'Daviplata': newOrderForm.payment === 'Daviplata' ? Number(newOrderForm.total) || 0 : 0,\r\n        'Nequi': newOrderForm.payment === 'Nequi' ? Number(newOrderForm.total) || 0 : 0,\r\n      };\r\n\r\n      const orderData = {\r\n        ...newOrderForm,\r\n        meals: normalizedMeals,\r\n        total: Number(newOrderForm.total) || 0,\r\n        status: newOrderForm.status || 'Pendiente',\r\n        payment: newOrderForm.payment || 'Efectivo',\r\n        deliveryPerson: newOrderForm.deliveryPerson || 'Sin asignar',\r\n        paymentSummary: paymentSummary,\r\n        createdAt: serverTimestamp(),\r\n        type: newOrderForm.type || 'lunch',\r\n      };\r\n\r\n      const collectionName = newOrderForm.type === 'breakfast' ? 'deliveryBreakfastOrders' : 'orders';\r\n      const docRef = await addDoc(collection(db, collectionName), orderData);\r\n      setSuccess('Orden agregada correctamente.');\r\n      logActivity(`Agreg una nueva orden (Total: $${newOrderForm.total.toLocaleString()})`, {\r\n        orderId: docRef.id,\r\n        newOrderDetails: { ...newOrderForm, meals: normalizedMeals },\r\n      });\r\n      setShowAddOrderModal(false);\r\n      setNewOrderForm({\r\n        meals: [{\r\n          soup: '',\r\n          soupReplacement: '',\r\n          principle: [{ name: '' }],\r\n          principleReplacement: '',\r\n          protein: '',\r\n          drink: '',\r\n          cutlery: '',\r\n          sides: [],\r\n          additions: [],\r\n          notes: '',\r\n          address: {\r\n            address: '',\r\n            phoneNumber: '',\r\n            addressType: '',\r\n            localName: '',\r\n            recipientName: '',\r\n          },\r\n          time: '',\r\n          payment: 'Efectivo',\r\n        }],\r\n        total: 0,\r\n        status: 'Pendiente',\r\n        payment: 'Efectivo',\r\n        deliveryPerson: 'Sin asignar',\r\n        type: 'lunch',\r\n      });\r\n    } catch (error) {\r\n      setError(`Error al agregar orden: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const uniqueDeliveryPersons = useMemo(() => {\r\n    return Object.keys(deliveryPersons);\r\n  }, [deliveryPersons]);\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n      <InteraccionesPedidos\r\n        theme={theme}\r\n        showProteinModal={showProteinModal}\r\n        setShowProteinModal={setShowProteinModal}\r\n        newProtein={newProtein}\r\n        setNewProtein={setNewProtein}\r\n        handleAddProtein={handleAddProtein}\r\n        proteins={proteins}\r\n        totalProteinUnits={totalProteinUnits}\r\n        isLoading={isLoading}\r\n        showMealDetails={showMealDetails}\r\n        setShowMealDetails={setShowMealDetails}\r\n        editingOrder={editingOrder}\r\n        setEditingOrder={setEditingOrder}\r\n        editForm={editForm}\r\n        handleMealFormFieldChange={handleEditOrderMealFormFieldChange}\r\n        handleEditFormFieldChange={handleEditFormFieldChange}\r\n        handleSaveEdit={handleSaveEdit}\r\n        showConfirmDeleteAll={showConfirmDeleteAll}\r\n        setShowConfirmDeleteAll={setShowConfirmDeleteAll}\r\n        confirmText={confirmText}\r\n        setConfirmText={setConfirmText}\r\n        handleDeleteAllOrders={handleDeleteAllOrders}\r\n        setError={setError}\r\n        setSuccess={setSuccess}\r\n        showAddOrderModal={showAddOrderModal}\r\n        setShowAddOrderModal={setShowAddOrderModal}\r\n        newOrderForm={newOrderForm}\r\n        handleNewOrderMealFormFieldChange={handleNewOrderMealFormFieldChange}\r\n        handleNewOrderFieldChange={handleNewOrderFieldChange}\r\n        handleAddOrderSubmit={handleAddOrderSubmit}\r\n        uniqueDeliveryPersons={uniqueDeliveryPersons}\r\n      />\r\n      <TablaPedidos\r\n        theme={theme}\r\n        orders={orders}\r\n        searchTerm={searchTerm}\r\n        setSearchTerm={setSearchTerm}\r\n        totals={totals}\r\n        isLoading={isLoading}\r\n        paginatedOrders={paginatedOrders}\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        setCurrentPage={setCurrentPage}\r\n        itemsPerPage={itemsPerPage}\r\n        setItemsPerPage={setItemsPerPage}\r\n        deliveryPersons={deliveryPersons}\r\n        handleEditOrder={handleEditOrder}\r\n        handleDeleteOrder={handleDeleteOrder}\r\n        handleStatusChange={handleStatusChange}\r\n        handleSort={handleSort}\r\n        getSortIcon={getSortIcon}\r\n        setShowMealDetails={setShowMealDetails}\r\n        editingDeliveryId={editingDeliveryId}\r\n        setEditingDeliveryId={setEditingDeliveryId}\r\n        editForm={editForm}\r\n        setEditForm={setEditForm}\r\n        handleDeliveryChange={handleDeliveryChange}\r\n        sortOrder={sortOrder}\r\n        showProteinModal={showProteinModal}\r\n        setShowProteinModal={setShowProteinModal}\r\n        isMenuOpen={isMenuOpen}\r\n        setIsMenuOpen={setIsMenuOpen}\r\n        handleOpenPreview={handleOpenPreview}\r\n        handleOpenExcelPreview={handleOpenExcelPreview}\r\n        handleExport={handleExport}\r\n        handleDeleteAllOrders={handleDeleteAllOrders}\r\n        setShowConfirmDeleteAll={setShowConfirmDeleteAll}\r\n        exportToExcel={exportToExcel}\r\n        exportToPDF={exportToPDF}\r\n        exportToCSV={exportToCSV}\r\n        setShowAddOrderModal={setShowAddOrderModal}\r\n        orderTypeFilter={orderTypeFilter}\r\n        setOrderTypeFilter={setOrderTypeFilter}\r\n        uniqueDeliveryPersons={uniqueDeliveryPersons}\r\n      />\r\n      <div className={`mt-8 p-6 rounded-2xl shadow-xl border ${theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`}>\r\n        <h3 className={`text-xl font-semibold mb-4 ${theme === 'dark' ? 'text-gray-100' : 'text-gray-900'}`}>Resumen por Domiciliarios</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {Object.entries(deliveryPersons).length === 0 ? (\r\n            <p className={`${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>No hay domiciliarios asignados an.</p>\r\n          ) : (\r\n            Object.entries(deliveryPersons).map(([person, data]) => (\r\n              <div key={person} className={`p-4 rounded-lg shadow-md ${theme === 'dark' ? 'bg-gray-700 text-gray-200' : 'bg-gray-100 text-gray-800'}`}>\r\n                <h4 className=\"font-semibold text-lg mb-2\">{person}</h4>\r\n                <p>Efectivo: <span className=\"font-bold\">${data.cash.toLocaleString()}</span></p>\r\n                <p>Daviplata: <span className=\"font-bold\">${data.daviplata.toLocaleString()}</span></p>\r\n                <p>Nequi: <span className=\"font-bold\">${data.nequi.toLocaleString()}</span></p>\r\n                <p className=\"font-bold mt-2\">Total: <span className=\"text-green-400\">${data.total.toLocaleString()}</span></p>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderManagement;","//src/components/Admin/utilities/previewOrders.js\r\nexport const generatePreviewHtml = (orders, totals, deliveryPersons) => {\r\n  let mealCounter = 0;\r\n  const pedidosBody = orders.flatMap((order) => {\r\n    if (!order || !Array.isArray(order.meals) || order.meals.length === 0) return [];\r\n    return order.meals.filter(meal => meal).map((meal) => {\r\n      mealCounter += 1;\r\n      return [\r\n        mealCounter,\r\n        meal?.address?.address || '',\r\n        meal?.address?.phoneNumber || '',\r\n        `$${order.total?.toLocaleString('es-CO') || '0'}`,\r\n        order?.deliveryPerson || ''\r\n      ];\r\n    });\r\n  });\r\n\r\n  if (pedidosBody.length === 0) pedidosBody.push(Array(5).fill('-'));\r\n\r\n  const deliveryBody = Object.entries(deliveryPersons).map(([name, data]) => [\r\n    name || '',\r\n    `$${data.cash?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.daviplata?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.nequi?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.total?.toLocaleString('es-CO') || '0'}`\r\n  ]);\r\n\r\n  const now = new Date();\r\n  const dateStr = now.toLocaleDateString('es-CO');\r\n  const timeStr = now.toLocaleTimeString('es-CO', { hour: '2-digit', minute: '2-digit', hour12: true });\r\n\r\n  return `\r\n    <html>\r\n      <head>\r\n        <title>Previsualizacin de Pedidos</title>\r\n        <style>\r\n          body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\r\n          h1 { text-align: center; font-size: 24px; }\r\n          p.date { text-align: center; font-size: 12px; }\r\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; }\r\n          th, td { padding: 8px; border: 1px solid black; }\r\n          th { background-color: #0066cc; color: white; font-weight: bold; }\r\n          td { text-align: left; }\r\n          td:nth-child(4) { text-align: right; }\r\n          tr:nth-child(even) { background-color: #f5f5f5; }\r\n          .totals-table { width: 50%; }\r\n          .delivery-table th:nth-child(n+2), .delivery-table td:nth-child(n+2) { text-align: right; }\r\n          .button-container { margin-top: 20px; text-align: center; }\r\n          .button { padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }\r\n          .button.print { background-color: #28a745; }\r\n          @media print {\r\n              .button-container { display: none; }\r\n          }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <h1>Gestin de Pedidos</h1>\r\n        <p class=\"date\">Fecha: ${dateStr} ${timeStr}</p>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>N</th>\r\n              <th>Direccin</th>\r\n              <th>Telfono</th>\r\n              <th>Total</th>\r\n              <th>Domiciliario</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${pedidosBody.map(row => `\r\n              <tr>\r\n                <td>${row[0]}</td>\r\n                <td>${row[1]}</td>\r\n                <td>${row[2]}</td>\r\n                <td>${row[3]}</td>\r\n                <td>${row[4]}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n        <h2 style=\"margin-top: 20px; font-size: 18px;\">Resumen de Totales</h2>\r\n        <table class=\"totals-table\">\r\n          <tbody>\r\n            <tr><td style=\"padding: 8px;\">Total Efectivo</td><td style=\"padding: 8px; text-align: right;\">${pedidosBody.length > 0 ? `$${totals.cash?.toLocaleString('es-CO') || '0'}` : '$0'}</td></tr>\r\n            <tr><td style=\"padding: 8px;\">Total Daviplata</td><td style=\"padding: 8px; text-align: right;\">${pedidosBody.length > 0 ? `$${totals.daviplata?.toLocaleString('es-CO') || '0'}` : '$0'}</td></tr>\r\n            <tr><td style=\"padding: 8px;\">Total Nequi</td><td style=\"padding: 8px; text-align: right;\">${pedidosBody.length > 0 ? `$${totals.nequi?.toLocaleString('es-CO') || '0'}` : '$0'}</td></tr>\r\n            <tr><td style=\"padding: 8px;\">Total General</td><td style=\"padding: 8px; text-align: right;\">${pedidosBody.length > 0 ? `$${(totals.cash + totals.daviplata + totals.nequi || 0).toLocaleString('es-CO')}` : '$0'}</td></tr>\r\n          </tbody>\r\n        </table>\r\n        <h2 style=\"margin-top: 20px; font-size: 18px;\">Resumen por Domiciliarios</h2>\r\n        <table class=\"delivery-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Domiciliario</th>\r\n              <th>Efectivo</th>\r\n              <th>Daviplata</th>\r\n              <th>Nequi</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${deliveryBody.map(row => `\r\n              <tr>\r\n                <td>${row[0]}</td>\r\n                <td>${row[1]}</td>\r\n                <td>${row[2]}</td>\r\n                <td>${row[3]}</td>\r\n                <td>${row[4]}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n        <div class=\"button-container\">\r\n          <button class=\"button print\" onclick=\"window.print()\">Imprimir</button>\r\n          <button class=\"button\" onclick=\"window.close()\">Cerrar Previsualizacin</button>\r\n        </div>\r\n      </body>\r\n    </html>\r\n  `;\r\n};","//src/components/Admin/utilities/previewExcel.js\r\nexport const generateExcelPreviewHtml = (orders, totals, deliveryPersons, totalProteinUnits = 0, proteins = []) => {\r\n  let mealCounter = 0;\r\n  const pedidosBody = orders.map((order) => {\r\n    mealCounter += 1;\r\n    const meal = order.meals?.[0] || {};\r\n    const payment = order.payment?.name || order.payment || meal?.payment?.name || meal?.payment || 'Efectivo';\r\n\r\n    return [\r\n      mealCounter,\r\n      meal?.address?.address || '',\r\n      meal?.address?.phoneNumber || '',\r\n      `$${order.total?.toLocaleString('es-CO') || '0'}`,\r\n      payment,\r\n      order?.deliveryPerson || ''\r\n    ];\r\n  });\r\n\r\n  if (pedidosBody.length === 0) pedidosBody.push(Array(6).fill('-'));\r\n\r\n  const deliveryBody = Object.entries(deliveryPersons).map(([name, data]) => [\r\n    name || '',\r\n    `$${data.cash?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.daviplata?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.nequi?.toLocaleString('es-CO') || '0'}`,\r\n    `$${data.total?.toLocaleString('es-CO') || '0'}`\r\n  ]);\r\n\r\n  const proteinsBody = proteins.length === 0\r\n    ? [['-', '-']]\r\n    : proteins.map((protein, index) => {\r\n        const isPenultimate = index === proteins.length - 2;\r\n        const isLast = index === proteins.length - 1;\r\n        return [\r\n          protein.name || 'Sin nombre',\r\n          protein.quantity?.toLocaleString('es-CO') || '0',\r\n          isPenultimate ? 'TOTAL PROTENAS:' : isLast ? 'Fecha actual:' : '',\r\n          isPenultimate ? totalProteinUnits.toLocaleString('es-CO') : isLast ? new Date().toLocaleDateString('es-CO', { day: '2-digit', month: '2-digit', year: 'numeric' }) : ''\r\n        ];\r\n      });\r\n\r\n  // Se calculan los totales de forma precisa\r\n  const calculatedTotals = {\r\n    cash: totals.cash || 0,\r\n    daviplata: totals.daviplata || 0,\r\n    nequi: totals.nequi || 0\r\n  };\r\n  const totalGeneral = calculatedTotals.cash + calculatedTotals.daviplata + calculatedTotals.nequi;\r\n\r\n  return `\r\n    <html>\r\n      <head>\r\n        <title>Previsualizacin de Excel</title>\r\n        <style>\r\n          body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\r\n          h1 { text-align: center; font-size: 24px; }\r\n          table { width: 100%; border-collapse: collapse; }\r\n          th, td { padding: 8px; border: 1px solid black; }\r\n          th { background-color: #0066cc; color: white; font-weight: bold; text-align: center; font-size: 16px; }\r\n          td { text-align: left; vertical-align: middle; }\r\n          td:nth-child(4), td:nth-child(6) { text-align: right; }\r\n          tr:nth-child(even) { background-color: #f5f5f5; }\r\n          .totals-table { width: 50%; margin-left: auto; margin-right: auto; }\r\n\r\n          .proteins-container { width: auto; margin: 0 auto; max-width: 700px; }\r\n          .proteins-table {\r\n            border-collapse: collapse;\r\n            font-size: 14px;\r\n            width: 100%;\r\n            max-width: 700px;\r\n          }\r\n          .proteins-table th, .proteins-table td {\r\n            padding: 6px 12px;\r\n            border: 1px solid black;\r\n            white-space: nowrap;\r\n          }\r\n          .proteins-table th:nth-child(1), .proteins-table td:nth-child(1) { width: 160px; text-align: left; }\r\n          .proteins-table th:nth-child(2), .proteins-table td:nth-child(2) { width: 80px; text-align: right; }\r\n          .proteins-table th:nth-child(3), .proteins-table td:nth-child(3) { width: 220px; text-align: left; }\r\n\r\n          .delivery-table th { background-color: #0066cc; color: white; font-weight: bold; text-align: center; font-size: 16px; }\r\n          .delivery-table .green-header th { background-color: #28a745; }\r\n          .delivery-table td:nth-child(n+2) { text-align: right; }\r\n\r\n          .spacer { height: 16px; }\r\n          .button-container { margin-top: 20px; text-align: center; }\r\n          .button { padding: 10px 20px; background-color: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }\r\n          .button.print { background-color: #28a745; }\r\n          @media print { .button-container { display: none; } }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <h1>Gestin de Pedidos</h1>\r\n        <div class=\"spacer\"></div>\r\n\r\n        <div class=\"proteins-container\">\r\n          <table class=\"proteins-table\" aria-label=\"Resumen de protenas\">\r\n            <thead>\r\n              <tr>\r\n                <th style=\"background-color: #0066cc; color: white; border: 1px solid black;\">Protena</th>\r\n                <th style=\"background-color: #0066cc; color: white; border: 1px solid black;\">Unidades</th>\r\n                <th style=\"background-color: #0066cc; color: white; border: 1px solid black;\"></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              ${proteinsBody.map((row, index) => {\r\n                const thirdColumn = row[2] ? `\r\n                  <td style=\"padding: 0;\">\r\n                    <div style=\"display: flex; width: 100%; height: 100%;\">\r\n                      <div style=\"flex: 1; padding: 6px 12px; font-weight: bold; display: flex; align-items: center;\">${row[2]}</div>\r\n                      <div style=\"width: 1px; background-color: black;\"></div>\r\n                      <div style=\"flex: 1; padding: 6px 12px; display: flex; justify-content: flex-end; align-items: center; font-weight: ${row[2] === 'TOTAL PROTENAS:' ? 'bold' : 'normal'};\">${row[3]}</div>\r\n                    </div>\r\n                  </td>\r\n                ` : '<td style=\"border: none; background-color: white;\"></td>';\r\n\r\n                return `\r\n                  <tr>\r\n                    <td title=\"${row[0]}\">${row[0]}</td>\r\n                    <td style=\"text-align: right;\">${row[1]}</td>\r\n                    ${thirdColumn}\r\n                  </tr>\r\n                `;\r\n              }).join('')}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div class=\"spacer\"></div><div class=\"spacer\"></div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>N</th>\r\n              <th>Direccin</th>\r\n              <th>Telfono</th>\r\n              <th>Total</th>\r\n              <th>Mtodo de Pago</th>\r\n              <th>Domiciliario</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${pedidosBody.map(row => `\r\n              <tr>\r\n                <td>${row[0]}</td>\r\n                <td>${row[1]}</td>\r\n                <td>${row[2]}</td>\r\n                <td>${row[3]}</td>\r\n                <td>${row[4]}</td>\r\n                <td>${row[5]}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"spacer\"></div><div class=\"spacer\"></div>\r\n\r\n        <table class=\"totals-table\">\r\n          <thead>\r\n            <tr><th colspan=\"2\">Resumen de Totales</th></tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr><td>Total Efectivo</td><td style=\"text-align: right;\">$${calculatedTotals.cash.toLocaleString('es-CO')}</td></tr>\r\n            <tr><td>Total Daviplata</td><td style=\"text-align: right;\">$${calculatedTotals.daviplata.toLocaleString('es-CO')}</td></tr>\r\n            <tr><td>Total Nequi</td><td style=\"text-align: right;\">$${calculatedTotals.nequi.toLocaleString('es-CO')}</td></tr>\r\n            <tr><td>Total General</td><td style=\"text-align: right;\">$${totalGeneral.toLocaleString('es-CO')}</td></tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"spacer\"></div><div class=\"spacer\"></div>\r\n\r\n        <table class=\"delivery-table\">\r\n          <thead>\r\n            <tr><th colspan=\"5\">Resumen por Domiciliarios</th></tr>\r\n            <tr class=\"green-header\">\r\n              <th>Domiciliario</th>\r\n              <th>Efectivo</th>\r\n              <th>Daviplata</th>\r\n              <th>Nequi</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${deliveryBody.map(row => `\r\n              <tr>\r\n                <td>${row[0]}</td>\r\n                <td>${row[1]}</td>\r\n                <td>${row[2]}</td>\r\n                <td>${row[3]}</td>\r\n                <td>${row[4]}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"button-container\">\r\n          <button class=\"button print\" onclick=\"window.print()\">Imprimir</button>\r\n          <button class=\"button\" onclick=\"window.close()\">Cerrar Previsualizacin</button>\r\n          <button class=\"button\" onclick=\"window.opener.postMessage('downloadExcel', '*')\">Descargar Excel</button>\r\n        </div>\r\n      </body>\r\n    </html>\r\n  `;\r\n};","// src/utils/classNames.js\r\nexport function classNames(...classes) {\r\n  return classes.filter(Boolean).join(' ');\r\n}"],"names":["exportToExcel","async","orders","totals","deliveryPersons","totalProteinUnits","proteins","_proteins","_proteins2","_proteins3","_proteins4","workbook","ExcelJS","worksheet","addWorksheet","cleanText","text","undefined","replace","trim","toString","name","String","applyThinBorder","cell","border","top","style","color","argb","left","bottom","right","addRow","proteinHeaderRow","lastRow","number","mergeCells","ourHeader","getCell","font","bold","fill","type","pattern","fgColor","alignment","horizontal","getRow","values","eachCell","colNumber","value","proteinData","length","quantity","extra","extraValue","slice","toLocaleString","Date","getDate","padStart","getMonth","getFullYear","forEach","protein","index","numFmt","mealCounter","pedidos","map","order","_order$meals","_meal$payment","_meal$address","_meal$address2","meal","meals","paymentValue","payment","console","warn","id","N","Direccin","address","Telfono","phoneNumber","Total","total","MtodoDePago","Domiciliario","deliveryPerson","push","columns","key","width","pedidosHeaderRow","headerRow","pedido","resumenRow","resumenCell","cash","daviplata","nequi","_ref","label","row","resumenDomiciliariosRow","deliveryHeader","i","Object","entries","_ref2","data","buffer","xlsx","writeBuffer","blob","Blob","link","document","createElement","href","window","URL","createObjectURL","download","toISOString","body","appendChild","click","removeChild","error","alert","message","exportToPDF","arguments","_totals$cash","_totals$daviplata","_totals$nequi","doc","jsPDF","logoUrl","addImage","imgError","setFontSize","now","dateStr","toLocaleDateString","timeStr","toLocaleTimeString","hour","minute","hour12","pedidosBody","_order$payment","_order$total","paymentMethod","Array","autoTable","startY","head","styles","fontSize","cellPadding","overflow","headStyles","fillColor","textColor","fontStyle","lineWidth","lineColor","alternateRowStyles","columnStyles","cellWidth","halign","tableLineColor","tableLineWidth","didDrawPage","pageNumber","finalY","lastAutoTable","deliveryY","deliveryBody","_data$cash","_data$daviplata","_data$nequi","_data$total","save","split","exportToCSV","setSuccess","orderRows","flatMap","_meal$soup","_meal$principle","_meal$protein","_meal$drink","_meal$cutlery","_meal$sides","_meal$additions","_meal$time","_meal$address3","_meal$address4","_meal$address5","_meal$address6","soup","isArray","principle","p","join","drink","cutlery","sides","s","additions","a","replacement","notes","time","addressType","localName","recipientName","unitDetails","status","createdAt","seconds","updatedAt","totalsRows","deliveryRows","csvContent","url","revokeObjectURL","getAddressDisplay","display","getMealDetailsDisplay","_meal$soupReplacement","_meal$soupReplacement2","_meal$soup2","_meal$principleReplac","_meal$protein2","_meal$time2","_meal$address7","_meal$address8","_meal$payment2","components","soupDisplay","soupReplacement","principleDisplay","_meal$principleReplac2","principleReplacement","principleNames","filter","Boolean","_meal$principle2","drinkName","addressTypeDisplay","areMealsIdentical","areIdentical","count","fieldsToCompare","getMealSignature","field","path","obj","reduce","acc","part","getNestedProperty","sort","firstSignature","every","theme","searchTerm","setSearchTerm","isLoading","paginatedOrders","currentPage","totalPages","setCurrentPage","itemsPerPage","setItemsPerPage","handleEditOrder","handleDeleteOrder","handleStatusChange","handleSort","getSortIcon","setShowMealDetails","editingDeliveryId","setEditingDeliveryId","editForm","setEditForm","handleDeliveryChange","sortOrder","showProteinModal","setShowProteinModal","isMenuOpen","setIsMenuOpen","handleOpenPreview","handleOpenExcelPreview","handleExport","handleDeleteAllOrders","setShowConfirmDeleteAll","setShowAddOrderModal","orderTypeFilter","setOrderTypeFilter","uniqueDeliveryPersons","currentDate","weekday","month","day","menuRef","useRef","useEffect","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","_jsx","_Fragment","children","_jsxs","className","classNames","onChange","e","placeholder","onClick","PlusIcon","ref","EllipsisVerticalIcon","ArrowDownTrayIcon","colSpan","_order$meals$","_order$breakfasts","_order$breakfasts$","_order$meals2","_order$meals2$","_order$meals2$$paymen","_order$breakfasts2","_order$breakfasts2$","_order$breakfasts2$$p","_order$meals3","_order$meals3$","_order$breakfasts3","_order$breakfasts3$","_order$meals4","_order$meals4$","_order$meals4$$addres","_order$breakfasts4","_order$breakfasts4$","_order$breakfasts4$$a","displayNumber","addressDisplay","breakfasts","paymentDisplay","statusClass","timeValue","displayTime","title","InformationCircleIcon","newValue","onBlur","autoFocus","person","PencilIcon","TrashIcon","Number","prev","Math","max","disabled","ChevronLeftIcon","min","ChevronRightIcon","_showMealDetails$tota","newProtein","setNewProtein","handleAddProtein","showMealDetails","editingOrder","setEditingOrder","handleMealFormFieldChange","handleEditFormFieldChange","handleSaveEdit","showConfirmDeleteAll","confirmText","setConfirmText","setError","showAddOrderModal","newOrderForm","handleNewOrderMealFormFieldChange","handleNewOrderFieldChange","handleAddOrderSubmit","editingProtein","setEditingProtein","useState","Transition","show","as","React","Dialog","onClose","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Panel","Title","XMarkIcon","handleCancelEditProtein","isNaN","updateDoc","db","handleEditProtein","deleteDoc","proteinId","handleDeleteProtein","mealIndex","toLowerCase","_meal$sides2","_meal$additions2","_meal$address9","_meal$address0","_meal$address1","_meal$address10","_meal$address11","_meal$address12","setOrders","setTotals","setIsLoading","setDeliveryPersons","sortBy","setSortBy","setSortOrder","setProteins","setNewOrderForm","useMemo","sum","logActivity","useCallback","action","details","addDoc","collection","timestamp","serverTimestamp","fetchOrders","ordersColRef","unsubscribe","onSnapshot","snapshot","ordersData","docs","_meals$","_meals$$payment","paymentSummary","Efectivo","Daviplata","Nequi","newTotals","general","newDeliveryPersons","paymentType","amount","fetchProteins","today","proteinsColRef","query","where","proteinsData","unsubscribeOrders","unsubscribeProteins","filteredOrders","_order$meals$$address","_order$meals$$address2","_order$meals2$$addres","_order$meals2$$addres2","_order$meals3$$time","_order$meals3$$time$n","_order$meals4$$time","_order$meals5","_order$meals5$","_order$meals5$$paymen","_order$meals6","_order$meals6$","_order$deliveryPerson","_order$status","lowerSearchTerm","phone","includes","sortedOrders","b","getValue","currentFilteredOrdersArray","indexOf","valueA","valueB","localeCompare","ceil","start","end","batch","writeBatch","ordersSnapshot","getDocs","breakfastOrdersSnapshot","delete","commit","size","keys","InteraccionesPedidos","date","proteinName","handleEditOrderMealFormFieldChange","newMeals","parent","child","proteinOrReplacement","oldOrder","find","o","previousState","updatedMealsForDB","normalizedMeal","fromEntries","_","updateData","cleanedUpdateData","_ref3","orderId","newState","normalizedMeals","orderData","collectionName","docRef","newOrderDetails","TablaPedidos","orderToDelete","deletedOrderDetails","newStatus","previousStatus","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","previousDeliveryPerson","newDeliveryPerson","previewWindow","open","write","generatePreviewHtml","close","proteinsBody","_protein$quantity","isPenultimate","isLast","year","calculatedTotals","totalGeneral","thirdColumn","generateExcelPreviewHtml","exportFunction","format","_ref4","_len","classes","_key"],"sourceRoot":""}