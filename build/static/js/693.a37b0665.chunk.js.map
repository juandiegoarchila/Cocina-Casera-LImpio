{"version":3,"file":"static/js/693.a37b0665.chunk.js","mappings":"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","sources":["components/Admin/dashboardConstants.js","hooks/useDashboardData.js","components/Admin/DashboardCharts.js","components/Admin/Dashboard.js","utils/classNames.js"],"sourcesContent":["// src/constants/dashboardConstants.js\r\nexport const ORDER_STATUS = {\r\n  PENDING: 'pendiente',\r\n  DELIVERED: 'entregado',\r\n  CANCELLED: 'cancelado',\r\n};\r\n\r\nexport const ORDER_STATUS_DISPLAY = {\r\n  [ORDER_STATUS.PENDING]: 'Pendientes',\r\n  [ORDER_STATUS.DELIVERED]: 'Entregados',\r\n  [ORDER_STATUS.CANCELLED]: 'Cancelados',\r\n};\r\n\r\nexport const BAR_COLORS = {\r\n  Efectivo: '#22c55e',\r\n  Daviplata: '#ef4444',\r\n  Nequi: '#3b82f6',\r\n  Domicilios: '#8B5CF6',\r\n  Mesas: '#10B981'\r\n};\r\n\r\nexport const PIE_COLORS = ['#fbbf24', '#4ade80', '#ef4444', '#60a5fa', '#a78bfa'];\r\n\r\nexport const INGRESOS_COLLECTION = 'Ingresos';\r\nexport const PEDIDOS_DIARIOS_GUARDADOS_COLLECTION = 'PedidosDiariosGuardados';","import { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { collection, onSnapshot, query, where, Timestamp, getDocs, addDoc, updateDoc, doc, deleteDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { ORDER_STATUS, ORDER_STATUS_DISPLAY, PIE_COLORS, INGRESOS_COLLECTION, PEDIDOS_DIARIOS_GUARDADOS_COLLECTION } from '../components/Admin/dashboardConstants';\r\n\r\nconst getDateRange = (rangeType, start, end) => {\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n\r\n  let startDate = new Date(today);\r\n  let endDate = new Date(today);\r\n  endDate.setHours(23, 59, 59, 999);\r\n\r\n  switch (rangeType) {\r\n    case '7_days':\r\n      startDate.setDate(today.getDate() - 6);\r\n      break;\r\n    case '30_days':\r\n      startDate = new Date(today.getFullYear(), today.getMonth(), 1); \r\n      endDate = new Date(today.getFullYear(), today.getMonth() + 1, 0); \r\n      endDate.setHours(23, 59, 59, 999);\r\n      break;\r\n    case 'year':\r\n      startDate = new Date(today.getFullYear(), 0, 1); \r\n      endDate = new Date(today.getFullYear(), 11, 31); \r\n      endDate.setHours(23, 59, 59, 999);\r\n      break;\r\n    case 'custom':\r\n      startDate = start ? new Date(start) : null;\r\n      if (startDate) startDate.setHours(0, 0, 0, 0);\r\n      endDate = end ? new Date(end) : null;\r\n      if (endDate) endDate.setHours(23, 59, 59, 999);\r\n      break;\r\n    default:\r\n      startDate.setDate(today.getDate() - 6); \r\n      break;\r\n  }\r\n  return { startDate, endDate };\r\n};\r\n\r\nexport const useDashboardData = (db, userId, isAuthReady, setError, setSuccess, salesFilterRange, salesCustomStartDate, salesCustomEndDate, ordersFilterRange, ordersCustomStartDate, ordersCustomEndDate, selectedMonth) => {\r\n  const [loadingData, setLoadingData] = useState(true);\r\n  const [orders, setOrders] = useState([]);\r\n  const [tableOrders, setTableOrders] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [totals, setTotals] = useState({ cash: 0, daviplata: 0, nequi: 0 });\r\n  const [statusCounts, setStatusCounts] = useState({ Pending: 0, Delivered: 0, Cancelled: 0 });\r\n  const [userActivity, setUserActivity] = useState([]);\r\n  const [ingresosData, setIngresosData] = useState([]);\r\n  const [pedidosDiariosGuardadosData, setPedidosDiariosGuardadosData] = useState([]);\r\n  const [dailySalesChartData, setDailySalesChartData] = useState([]);\r\n  const [dailyOrdersChartData, setDailyOrdersChartData] = useState([]);\r\n  const [statusPieChartData, setStatusPieChartData] = useState([]);\r\n\r\n  const initialLoadRefs = useRef({\r\n    orders: false,\r\n    tableOrders: false,\r\n    users: false,\r\n    activity: false,\r\n    ingresos: false,\r\n    pedidosDiariosGuardados: false\r\n  });\r\n\r\n  const checkIfAllLoaded = () => {\r\n    if (\r\n      initialLoadRefs.current.orders &&\r\n      initialLoadRefs.current.tableOrders &&\r\n      initialLoadRefs.current.users &&\r\n      initialLoadRefs.current.activity &&\r\n      initialLoadRefs.current.ingresos &&\r\n      initialLoadRefs.current.pedidosDiariosGuardados\r\n    ) {\r\n      setLoadingData(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!db || !userId || !isAuthReady) {\r\n      return;\r\n    }\r\n\r\n    setLoadingData(true);\r\n\r\n    const unsubscribes = [];\r\n\r\n    const ordersCollectionRef = collection(db, 'orders');\r\n    const unsubscribeOrders = onSnapshot(ordersCollectionRef, (snapshot) => {\r\n      const ordersData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setOrders(ordersData);\r\n\r\n      const newTotals = { cash: 0, daviplata: 0, nequi: 0 };\r\n      const newStatusCounts = { Pending: 0, Delivered: 0, Cancelled: 0 };\r\n\r\n      ordersData.forEach(order => {\r\n        const paymentSummary = order.paymentSummary || {};\r\n        newTotals.cash += paymentSummary['Efectivo'] || 0;\r\n        newTotals.daviplata += paymentSummary['Daviplata'] || 0;\r\n        newTotals.nequi += paymentSummary['Nequi'] || 0;\r\n\r\n        const orderStatus = order.status?.toLowerCase() || '';\r\n        if (orderStatus === ORDER_STATUS.PENDING) newStatusCounts.Pending += 1;\r\n        else if (orderStatus === ORDER_STATUS.DELIVERED) newStatusCounts.Delivered += 1;\r\n        else if (orderStatus === ORDER_STATUS.CANCELLED) newStatusCounts.Cancelled += 1;\r\n      });\r\n\r\n      setTotals(newTotals);\r\n      setStatusCounts(newStatusCounts);\r\n\r\n      const pieChartData = [\r\n        { name: ORDER_STATUS_DISPLAY[ORDER_STATUS.PENDING], value: newStatusCounts.Pending, color: PIE_COLORS[0] },\r\n        { name: ORDER_STATUS_DISPLAY[ORDER_STATUS.DELIVERED], value: newStatusCounts.Delivered, color: PIE_COLORS[1] },\r\n        { name: ORDER_STATUS_DISPLAY[ORDER_STATUS.CANCELLED], value: newStatusCounts.Cancelled, color: PIE_COLORS[2] },\r\n      ];\r\n      setStatusPieChartData(pieChartData);\r\n\r\n      if (!initialLoadRefs.current.orders) {\r\n        initialLoadRefs.current.orders = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    }, (error) => {\r\n      setError(`Error al cargar pedidos: ${error.message}`);\r\n      if (!initialLoadRefs.current.orders) {\r\n        initialLoadRefs.current.orders = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    });\r\n    unsubscribes.push(unsubscribeOrders);\r\n\r\n    const tableOrdersCollectionRef = collection(db, 'tableOrders');\r\n    const unsubscribeTableOrders = onSnapshot(tableOrdersCollectionRef, (snapshot) => {\r\n      const tableOrdersData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setTableOrders(tableOrdersData);\r\n\r\n      if (!initialLoadRefs.current.tableOrders) {\r\n        initialLoadRefs.current.tableOrders = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    }, (error) => {\r\n      setError(`Error al cargar pedidos de mesa: ${error.message}`);\r\n      if (!initialLoadRefs.current.tableOrders) {\r\n        initialLoadRefs.current.tableOrders = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    });\r\n    unsubscribes.push(unsubscribeTableOrders);\r\n\r\n    const usersCollectionRef = collection(db, 'users');\r\n    const unsubscribeUsers = onSnapshot(usersCollectionRef, (snapshot) => {\r\n      const usersData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setUsers(usersData);\r\n      if (!initialLoadRefs.current.users) {\r\n        initialLoadRefs.current.users = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    }, (error) => {\r\n      setError(`Error al cargar usuarios: ${error.message}`);\r\n      if (!initialLoadRefs.current.users) {\r\n        initialLoadRefs.current.users = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    });\r\n    unsubscribes.push(unsubscribeUsers);\r\n\r\n    const userActivityCollectionRef = collection(db, 'userActivity');\r\n    const unsubscribeActivity = onSnapshot(userActivityCollectionRef, (snapshot) => {\r\n      const activity = snapshot.docs.map(doc => {\r\n        const data = doc.data();\r\n        const timestampDate = data.timestamp instanceof Timestamp ? data.timestamp.toDate() : null;\r\n        return { id: doc.id, ...data, timestamp: timestampDate };\r\n      })\r\n        .sort((a, b) => (b.timestamp ? b.timestamp.getTime() : 0) - (a.timestamp ? a.timestamp.getTime() : 0));\r\n      setUserActivity(activity);\r\n      if (!initialLoadRefs.current.activity) {\r\n        initialLoadRefs.current.activity = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    }, (error) => {\r\n      setError(`Error al cargar actividad: ${error.message}`);\r\n      if (!initialLoadRefs.current.activity) {\r\n        initialLoadRefs.current.activity = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    });\r\n    unsubscribes.push(unsubscribeActivity);\r\n\r\n    const ingresosColRef = collection(db, INGRESOS_COLLECTION);\r\n    const unsubscribeIngresos = onSnapshot(ingresosColRef, (snapshot) => {\r\n      const ingresosData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setIngresosData(ingresosData);\r\n      if (!initialLoadRefs.current.ingresos) {\r\n        initialLoadRefs.current.ingresos = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    }, (error) => {\r\n      setError(`Error al cargar ingresos: ${error.message}`);\r\n      if (!initialLoadRefs.current.ingresos) {\r\n        initialLoadRefs.current.ingresos = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    });\r\n    unsubscribes.push(unsubscribeIngresos);\r\n\r\n    const pedidosDiariosGuardadosColRef = collection(db, PEDIDOS_DIARIOS_GUARDADOS_COLLECTION);\r\n    const unsubscribePedidosDiariosGuardados = onSnapshot(pedidosDiariosGuardadosColRef, (snapshot) => {\r\n      const pedidosData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setPedidosDiariosGuardadosData(pedidosData);\r\n      if (!initialLoadRefs.current.pedidosDiariosGuardados) {\r\n        initialLoadRefs.current.pedidosDiariosGuardados = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    }, (error) => {\r\n      setError(`Error al cargar pedidos diarios guardados: ${error.message}`);\r\n      if (!initialLoadRefs.current.pedidosDiariosGuardados) {\r\n        initialLoadRefs.current.pedidosDiariosGuardados = true;\r\n        checkIfAllLoaded();\r\n      }\r\n    });\r\n    unsubscribes.push(unsubscribePedidosDiariosGuardados);\r\n\r\n    return () => {\r\n      unsubscribes.forEach(unsubscribe => unsubscribe());\r\n    };\r\n  }, [db, userId, isAuthReady, setError]);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthReady) return;\r\n\r\n    const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\r\n    const { startDate: salesStartDate, endDate: salesEndDate } = getDateRange(salesFilterRange, salesCustomStartDate, salesCustomEndDate);\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const todayISO = today.toISOString().split('T')[0];\r\n    let chartData;\r\n\r\n    if (salesFilterRange === 'year' && !selectedMonth) {\r\n      const monthlySales = {};\r\n      const currentYear = today.getFullYear();\r\n\r\n      for (let month = 0; month < 12; month++) {\r\n        const monthKey = `${currentYear}-${String(month + 1).padStart(2, '0')}`;\r\n        monthlySales[monthKey] = { Efectivo: 0, Daviplata: 0, Nequi: 0 };\r\n      }\r\n\r\n      ingresosData.forEach(summary => {\r\n        const date = new Date(summary.date);\r\n        if (date.getFullYear() === currentYear) {\r\n          const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\r\n          monthlySales[monthKey].Efectivo += summary.cash || 0;\r\n          monthlySales[monthKey].Daviplata += summary.daviplata || 0;\r\n          monthlySales[monthKey].Nequi += summary.nequi || 0;\r\n        }\r\n      });\r\n\r\n      const currentMonthKey = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}`;\r\n      let currentMonthRealtimeCash = 0;\r\n      let currentMonthRealtimeDaviplata = 0;\r\n      let currentMonthRealtimeNequi = 0;\r\n\r\n      orders.forEach(order => {\r\n        const orderDate = order.createdAt?.toDate ? new Date(order.createdAt.toDate()).toISOString().split('T')[0] : null;\r\n        if (orderDate && orderDate >= salesStartDate.toISOString().split('T')[0] && orderDate <= salesEndDate.toISOString().split('T')[0]) {\r\n          const paymentSummary = order.paymentSummary || {};\r\n          currentMonthRealtimeCash += paymentSummary['Efectivo'] || 0;\r\n          currentMonthRealtimeDaviplata += paymentSummary['Daviplata'] || 0;\r\n          currentMonthRealtimeNequi += paymentSummary['Nequi'] || 0;\r\n        }\r\n      });\r\n\r\n      monthlySales[currentMonthKey] = {\r\n        Efectivo: monthlySales[currentMonthKey].Efectivo + currentMonthRealtimeCash,\r\n        Daviplata: monthlySales[currentMonthKey].Daviplata + currentMonthRealtimeDaviplata,\r\n        Nequi: monthlySales[currentMonthKey].Nequi + currentMonthRealtimeNequi,\r\n      };\r\n\r\n      chartData = Object.keys(monthlySales).map(monthKey => ({\r\n        name: monthNames[parseInt(monthKey.split('-')[1]) - 1],\r\n        monthKey: monthKey,\r\n        Efectivo: monthlySales[monthKey].Efectivo,\r\n        Daviplata: monthlySales[monthKey].Daviplata,\r\n        Nequi: monthlySales[monthKey].Nequi,\r\n      }));\r\n    } else {\r\n      const filteredDailySales = {};\r\n\r\n      ingresosData.forEach(summary => {\r\n        const summaryDate = new Date(summary.date).toISOString().split('T')[0];\r\n        if (summaryDate >= salesStartDate.toISOString().split('T')[0] && summaryDate <= salesEndDate.toISOString().split('T')[0]) {\r\n          if (salesFilterRange === 'year' && selectedMonth) {\r\n            const monthKey = `${new Date(summary.date).getFullYear()}-${String(new Date(summary.date).getMonth() + 1).padStart(2, '0')}`;\r\n            if (monthKey === selectedMonth) {\r\n              filteredDailySales[summaryDate] = {\r\n                Efectivo: (filteredDailySales[summaryDate]?.Efectivo || 0) + (summary.cash || 0),\r\n                Daviplata: (filteredDailySales[summaryDate]?.Daviplata || 0) + (summary.daviplata || 0),\r\n                Nequi: (filteredDailySales[summaryDate]?.Nequi || 0) + (summary.nequi || 0)\r\n              };\r\n            }\r\n          } else {\r\n            filteredDailySales[summaryDate] = {\r\n              Efectivo: (filteredDailySales[summaryDate]?.Efectivo || 0) + (summary.cash || 0),\r\n              Daviplata: (filteredDailySales[summaryDate]?.Daviplata || 0) + (summary.daviplata || 0),\r\n              Nequi: (filteredDailySales[summaryDate]?.Nequi || 0) + (summary.nequi || 0)\r\n            };\r\n          }\r\n        }\r\n      });\r\n\r\n      if (today >= salesStartDate && today <= salesEndDate) {\r\n        let currentDayRealtimeCash = 0;\r\n        let currentDayRealtimeDaviplata = 0;\r\n        let currentDayRealtimeNequi = 0;\r\n\r\n        orders.forEach(order => {\r\n          const orderDate = order.createdAt?.toDate ? new Date(order.createdAt.toDate()).toISOString().split('T')[0] : null;\r\n          if (orderDate && orderDate >= salesStartDate.toISOString().split('T')[0] && orderDate <= salesEndDate.toISOString().split('T')[0]) {\r\n            const paymentSummary = order.paymentSummary || {};\r\n            currentDayRealtimeCash += paymentSummary['Efectivo'] || 0;\r\n            currentDayRealtimeDaviplata += paymentSummary['Daviplata'] || 0;\r\n            currentDayRealtimeNequi += paymentSummary['Nequi'] || 0;\r\n          }\r\n        });\r\n\r\n        if (salesFilterRange === 'year' && selectedMonth) {\r\n          const currentMonth = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}`;\r\n          if (currentMonth === selectedMonth) {\r\n            filteredDailySales[todayISO] = {\r\n              Efectivo: (filteredDailySales[todayISO]?.Efectivo || 0) + currentDayRealtimeCash,\r\n              Daviplata: (filteredDailySales[todayISO]?.Daviplata || 0) + currentDayRealtimeDaviplata,\r\n              Nequi: (filteredDailySales[todayISO]?.Nequi || 0) + currentDayRealtimeNequi\r\n            };\r\n          }\r\n        } else {\r\n          filteredDailySales[todayISO] = {\r\n            Efectivo: (filteredDailySales[todayISO]?.Efectivo || 0) + currentDayRealtimeCash,\r\n            Daviplata: (filteredDailySales[todayISO]?.Daviplata || 0) + currentDayRealtimeDaviplata,\r\n            Nequi: (filteredDailySales[todayISO]?.Nequi || 0) + currentDayRealtimeNequi\r\n          };\r\n        }\r\n      }\r\n\r\n      const sortedDates = Object.keys(filteredDailySales).sort((a, b) => new Date(a) - new Date(b));\r\n      chartData = sortedDates.map(date => ({\r\n        name: date,\r\n        Efectivo: filteredDailySales[date].Efectivo,\r\n        Daviplata: filteredDailySales[date].Daviplata,\r\n        Nequi: filteredDailySales[date].Nequi\r\n      }));\r\n    }\r\n\r\n    setDailySalesChartData(chartData);\r\n  }, [orders, ingresosData, salesFilterRange, salesCustomStartDate, salesCustomEndDate, isAuthReady, selectedMonth]);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthReady) return;\r\n\r\n    const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\r\n    const { startDate: ordersStartDate, endDate: ordersEndDate } = getDateRange(ordersFilterRange, ordersCustomStartDate, ordersCustomEndDate);\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const todayISO = today.toISOString().split('T')[0];\r\n    let chartData;\r\n\r\n    if (ordersFilterRange === 'year' && !selectedMonth) {\r\n      const monthlyOrders = {};\r\n      const currentYear = today.getFullYear();\r\n\r\n      for (let month = 0; month < 12; month++) {\r\n        const monthKey = `${currentYear}-${String(month + 1).padStart(2, '0')}`;\r\n        monthlyOrders[monthKey] = { domicilios: 0, mesas: 0 };\r\n      }\r\n\r\n      pedidosDiariosGuardadosData.forEach(summary => {\r\n        const date = new Date(summary.date);\r\n        if (date.getFullYear() === currentYear) {\r\n          const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\r\n          monthlyOrders[monthKey].domicilios += summary.domicilios || 0;\r\n          monthlyOrders[monthKey].mesas += summary.mesas || 0;\r\n        }\r\n      });\r\n\r\n      const currentMonthKey = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}`;\r\n      let currentMonthRealtimeDomicilios = 0;\r\n      let currentMonthRealtimeMesas = 0;\r\n\r\n      orders.forEach(order => {\r\n        const orderDate = order.createdAt?.toDate ? new Date(order.createdAt.toDate()) : null;\r\n        if (orderDate && orderDate.getFullYear() === currentYear && orderDate.getMonth() === today.getMonth()) {\r\n          currentMonthRealtimeDomicilios++;\r\n        }\r\n      });\r\n\r\n      tableOrders.forEach(tableOrder => {\r\n        const tableOrderDate = tableOrder.createdAt?.toDate ? new Date(tableOrder.createdAt.toDate()) : null;\r\n        if (tableOrderDate && tableOrderDate.getFullYear() === currentYear && tableOrderDate.getMonth() === today.getMonth()) {\r\n          currentMonthRealtimeMesas++;\r\n        }\r\n      });\r\n\r\n      monthlyOrders[currentMonthKey].domicilios += currentMonthRealtimeDomicilios;\r\n      monthlyOrders[currentMonthKey].mesas += currentMonthRealtimeMesas;\r\n\r\n      chartData = Object.keys(monthlyOrders).map(monthKey => ({\r\n        name: monthNames[parseInt(monthKey.split('-')[1]) - 1],\r\n        monthKey: monthKey,\r\n        Domicilios: monthlyOrders[monthKey].domicilios,\r\n        Mesas: monthlyOrders[monthKey].mesas,\r\n      }));\r\n    } else {\r\n      const filteredDailyOrders = {};\r\n\r\n      pedidosDiariosGuardadosData.forEach(summary => {\r\n        const summaryDate = new Date(summary.date).toISOString().split('T')[0];\r\n        if (summaryDate >= ordersStartDate.toISOString().split('T')[0] && summaryDate <= ordersEndDate.toISOString().split('T')[0]) {\r\n          if (ordersFilterRange === 'year' && selectedMonth) {\r\n            const monthKey = `${new Date(summary.date).getFullYear()}-${String(new Date(summary.date).getMonth() + 1).padStart(2, '0')}`;\r\n            if (monthKey === selectedMonth) {\r\n              filteredDailyOrders[summaryDate] = {\r\n                Domicilios: summary.domicilios || 0,\r\n                Mesas: summary.mesas || 0,\r\n              };\r\n            }\r\n          } else {\r\n            filteredDailyOrders[summaryDate] = {\r\n              Domicilios: summary.domicilios || 0,\r\n              Mesas: summary.mesas || 0,\r\n            };\r\n          }\r\n        }\r\n      });\r\n\r\n      if (today >= ordersStartDate && today <= ordersEndDate) {\r\n        let currentDayRealtimeDomicilios = 0;\r\n        let currentDayRealtimeMesas = 0;\r\n\r\n        orders.forEach(order => {\r\n          const orderDate = order.createdAt?.toDate ? new Date(order.createdAt.toDate()).toISOString().split('T')[0] : null;\r\n          if (orderDate === todayISO) {\r\n            currentDayRealtimeDomicilios++;\r\n          }\r\n        });\r\n\r\n        tableOrders.forEach(tableOrder => {\r\n          const tableOrderDate = tableOrder.createdAt?.toDate ? new Date(tableOrder.createdAt.toDate()).toISOString().split('T')[0] : null;\r\n          if (tableOrderDate === todayISO) {\r\n            currentDayRealtimeMesas++;\r\n          }\r\n        });\r\n\r\n        if (ordersFilterRange === 'year' && selectedMonth) {\r\n          const currentMonth = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}`;\r\n          if (currentMonth === selectedMonth) {\r\n            filteredDailyOrders[todayISO] = {\r\n              Domicilios: (filteredDailyOrders[todayISO]?.Domicilios || 0) + currentDayRealtimeDomicilios,\r\n              Mesas: (filteredDailyOrders[todayISO]?.Mesas || 0) + currentDayRealtimeMesas,\r\n            };\r\n          }\r\n        } else {\r\n          filteredDailyOrders[todayISO] = {\r\n            Domicilios: (filteredDailyOrders[todayISO]?.Domicilios || 0) + currentDayRealtimeDomicilios,\r\n            Mesas: (filteredDailyOrders[todayISO]?.Mesas || 0) + currentDayRealtimeMesas,\r\n          };\r\n        }\r\n      }\r\n\r\n      const sortedDates = Object.keys(filteredDailyOrders).sort((a, b) => new Date(a) - new Date(b));\r\n      chartData = sortedDates.map(date => ({\r\n        name: date,\r\n        Domicilios: filteredDailyOrders[date].Domicilios,\r\n        Mesas: filteredDailyOrders[date].Mesas,\r\n      }));\r\n    }\r\n\r\n    setDailyOrdersChartData(chartData);\r\n  }, [orders, tableOrders, pedidosDiariosGuardadosData, ordersFilterRange, ordersCustomStartDate, ordersCustomEndDate, isAuthReady, selectedMonth]);\r\n\r\n  const handleSaveDailyIngresos = useCallback(async () => {\r\n    setLoadingData(true);\r\n    try {\r\n      const today = new Date().toISOString().split('T')[0];\r\n      let currentDayCash = 0;\r\n      let currentDayDaviplata = 0;\r\n      let currentDayNequi = 0;\r\n\r\n      orders.forEach(order => {\r\n        const orderDate = order.createdAt?.toDate ? new Date(order.createdAt.toDate()).toISOString().split('T')[0] : null;\r\n        if (orderDate === today) {\r\n          const paymentSummary = order.paymentSummary;\r\n          if (paymentSummary) {\r\n            currentDayCash += paymentSummary['Efectivo'] || 0;\r\n            currentDayDaviplata += paymentSummary['Daviplata'] || 0;\r\n            currentDayNequi += paymentSummary['Nequi'] || 0;\r\n          } else {\r\n            const paymentType = order.payment?.toLowerCase() || order.meals?.[0]?.payment?.name?.toLowerCase();\r\n            const amount = order.total || 0;\r\n            if (paymentType === 'efectivo') currentDayCash += amount;\r\n            else if (paymentType === 'daviplata') currentDayDaviplata += amount;\r\n            else if (paymentType === 'nequi') currentDayNequi += amount;\r\n          }\r\n        }\r\n      });\r\n\r\n      const currentDayTotalSales = currentDayCash + currentDayDaviplata + currentDayNequi;\r\n\r\n      const q = query(collection(db, INGRESOS_COLLECTION), where('date', '==', today));\r\n      const existingSummarySnapshot = await getDocs(q);\r\n\r\n      if (existingSummarySnapshot.empty) {\r\n        await addDoc(collection(db, INGRESOS_COLLECTION), {\r\n          date: today,\r\n          cash: currentDayCash,\r\n          daviplata: currentDayDaviplata,\r\n          nequi: currentDayNequi,\r\n          totalSales: currentDayTotalSales,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n        setSuccess(`Resumen de ingresos para ${today} guardado correctamente.`);\r\n      } else {\r\n        const docToUpdate = existingSummarySnapshot.docs[0];\r\n        await updateDoc(doc(db, INGRESOS_COLLECTION, docToUpdate.id), {\r\n          cash: currentDayCash,\r\n          daviplata: currentDayDaviplata,\r\n          nequi: currentDayNequi,\r\n          totalSales: currentDayTotalSales,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n        setSuccess(`Resumen de ingresos para ${today} actualizado correctamente.`);\r\n      }\r\n    } catch (error) {\r\n      setError(`Error al guardar/actualizar resumen de ingresos: ${error.message}`);\r\n      console.error(\"Error al guardar ingresos diarios:\", error);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  }, [db, orders, setSuccess, setError]);\r\n\r\n  const handleDeleteDailyIngresos = useCallback(async () => {\r\n    setLoadingData(true);\r\n    try {\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const q = query(collection(db, INGRESOS_COLLECTION), where('date', '==', today));\r\n      const existingSummarySnapshot = await getDocs(q);\r\n\r\n      if (!existingSummarySnapshot.empty) {\r\n        const docToDelete = existingSummarySnapshot.docs[0];\r\n        await deleteDoc(doc(db, INGRESOS_COLLECTION, docToDelete.id));\r\n        setSuccess(`Resumen de ingresos para ${today} eliminado correctamente.`);\r\n      } else {\r\n        setSuccess(`No se encontr un resumen de ingresos para ${today} para eliminar.`);\r\n      }\r\n    } catch (error) {\r\n      setError(`Error al eliminar resumen de ingresos: ${error.message}`);\r\n      console.error(\"Error al eliminar ingresos diarios:\", error);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  }, [db, setSuccess, setError]);\r\n\r\n  const handleSaveDailyOrders = useCallback(async () => {\r\n    setLoadingData(true);\r\n    try {\r\n      const today = new Date().toISOString().split('T')[0];\r\n      let currentDayDomicilios = 0;\r\n      let currentDayMesas = 0;\r\n\r\n      orders.forEach(order => {\r\n        const orderDate = order.createdAt?.toDate ? new Date(order.createdAt.toDate()).toISOString().split('T')[0] : null;\r\n        if (orderDate === today) {\r\n          currentDayDomicilios++;\r\n        }\r\n      });\r\n\r\n      tableOrders.forEach(tableOrder => {\r\n        const tableOrderDate = tableOrder.createdAt?.toDate ? new Date(tableOrder.createdAt.toDate()).toISOString().split('T')[0] : null;\r\n        if (tableOrderDate === today) {\r\n          currentDayMesas++;\r\n        }\r\n      });\r\n\r\n      const q = query(collection(db, PEDIDOS_DIARIOS_GUARDADOS_COLLECTION), where('date', '==', today));\r\n      const existingSummarySnapshot = await getDocs(q);\r\n\r\n      if (existingSummarySnapshot.empty) {\r\n        await addDoc(collection(db, PEDIDOS_DIARIOS_GUARDADOS_COLLECTION), {\r\n          date: today,\r\n          domicilios: currentDayDomicilios,\r\n          mesas: currentDayMesas,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n        setSuccess(`Conteo de pedidos diarios para ${today} guardado correctamente.`);\r\n      } else {\r\n        const docToUpdate = existingSummarySnapshot.docs[0];\r\n        await updateDoc(doc(db, PEDIDOS_DIARIOS_GUARDADOS_COLLECTION, docToUpdate.id), {\r\n          domicilios: currentDayDomicilios,\r\n          mesas: currentDayMesas,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n        setSuccess(`Conteo de pedidos diarios para ${today} actualizado correctamente.`);\r\n      }\r\n    } catch (error) {\r\n      setError(`Error al guardar/actualizar conteo de pedidos diarios: ${error.message}`);\r\n      console.error(\"Error al guardar conteo de pedidos diarios:\", error);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  }, [db, orders, tableOrders, setSuccess, setError]);\r\n\r\n  const handleDeleteDailyOrders = useCallback(async () => {\r\n    setLoadingData(true);\r\n    try {\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const q = query(collection(db, PEDIDOS_DIARIOS_GUARDADOS_COLLECTION), where('date', '==', today));\r\n      const existingSummarySnapshot = await getDocs(q);\r\n\r\n      if (!existingSummarySnapshot.empty) {\r\n        const docToDelete = existingSummarySnapshot.docs[0];\r\n        await deleteDoc(doc(db, PEDIDOS_DIARIOS_GUARDADOS_COLLECTION, docToDelete.id));\r\n        setSuccess(`Conteo de pedidos diarios para ${today} eliminado correctamente.`);\r\n      } else {\r\n        setSuccess(`No se encontr un conteo de pedidos diarios para ${today} para eliminar.`);\r\n      }\r\n    } catch (error) {\r\n      setError(`Error al eliminar conteo de pedidos diarios: ${error.message}`);\r\n      console.error(\"Error al eliminar conteo de pedidos diarios:\", error);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  }, [db, setSuccess, setError]);\r\n\r\n  return {\r\n    loadingData,\r\n    orders,\r\n    tableOrders,\r\n    users,\r\n    totals,\r\n    statusCounts,\r\n    userActivity,\r\n    dailySalesChartData,\r\n    dailyOrdersChartData,\r\n    statusPieChartData,\r\n    handleSaveDailyIngresos,\r\n    handleDeleteDailyIngresos,\r\n    handleSaveDailyOrders,\r\n    handleDeleteDailyOrders,\r\n  };\r\n};","import React, { Fragment, useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer,\r\n  PieChart, Pie, Cell, Label\r\n} from 'recharts';\r\nimport { DollarSign, MoreVertical, Save, Trash2, TrendingUp, Package, ArrowLeft } from 'lucide-react';\r\nimport { Popover, PopoverButton, PopoverPanel, Transition } from '@headlessui/react';\r\nimport { collection, onSnapshot, query, orderBy } from 'firebase/firestore';\r\nimport { db } from '../../config/firebase';\r\nimport { classNames } from '../../utils/classNames';\r\nimport { BAR_COLORS, PIE_COLORS } from './dashboardConstants';\r\nimport { isMobile as checkIsMobile } from '../../utils/Helpers';\r\n\r\n// Custom scrollbar styles\r\nconst scrollbarStyles = `\r\n  .custom-scrollbar::-webkit-scrollbar {\r\n    width: 8px;\r\n    height: 8px;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-track {\r\n    background: var(--scrollbar-track-color, #2d3748);\r\n    border-radius: 10px;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-thumb {\r\n    background: var(--scrollbar-thumb-color, #4a5568);\r\n    border-radius: 10px;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n    background: var(--scrollbar-thumb-hover-color, #64748b);\r\n  }\r\n  .custom-scrollbar {\r\n    scrollbar-width: thin;\r\n    scrollbar-color: var(--scrollbar-thumb-color, #4a5568) var(--scrollbar-track-color, #2d3748);\r\n  }\r\n`;\r\n\r\nconst SkeletonLoader = ({ type, theme, isMobile }) => {\r\n  if (type === 'bar') {\r\n    const numBars = isMobile ? 5 : 7;\r\n    return (\r\n      <div className=\"flex h-full items-end justify-around p-4 animate-pulse\">\r\n        {Array.from({ length: numBars }).map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className={classNames(\r\n              'rounded-t-md',\r\n              theme === 'dark' ? 'bg-gray-700' : 'bg-gray-200',\r\n              'mx-1'\r\n            )}\r\n            style={{ width: `${100 / numBars - 5}%`, height: `${Math.random() * 70 + 30}%` }}\r\n          ></div>\r\n        ))}\r\n      </div>\r\n    );\r\n  } else if (type === 'pie') {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-full animate-pulse\">\r\n        <div className={classNames(\r\n          isMobile ? 'w-32 h-32' : 'w-40 h-40',\r\n          'rounded-full',\r\n          theme === 'dark' ? 'bg-gray-700' : 'bg-gray-200'\r\n        )}></div>\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\n// Colombian Peso formatter\r\nconst copFormatter = new Intl.NumberFormat('es-CO', {\r\n  style: 'currency',\r\n  currency: 'COP',\r\n  minimumFractionDigits: 0,\r\n});\r\n\r\n// Custom Tooltip for Bar Charts\r\nconst CustomBarTooltip = ({ active, payload, label, theme, chartTextColor, copFormatter, isOrderChart = false }) => {\r\n  if (active && payload && payload.length) {\r\n    const total = payload.reduce((sum, entry) => sum + entry.value, 0);\r\n    const formatValue = isOrderChart ? (value) => value.toLocaleString() : (value) => typeof copFormatter === 'function' ? copFormatter(value) : copFormatter.format(value);\r\n    return (\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 5 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        exit={{ opacity: 0, y: 5 }}\r\n        className=\"custom-tooltip p-3 rounded-xl shadow-lg border\"\r\n        style={{\r\n          backgroundColor: theme === 'dark' ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)',\r\n          borderColor: theme === 'dark' ? 'rgba(75, 85, 99, 0.7)' : 'rgba(229, 231, 235, 0.7)',\r\n          backdropFilter: 'blur(8px)',\r\n          color: chartTextColor,\r\n          fontSize: '14px',\r\n        }}\r\n      >\r\n        <p className=\"font-bold mb-1\">{label}</p>\r\n        {payload.map((entry, index) => (\r\n          <p key={`item-${index}`} style={{ color: entry.color || chartTextColor }}>\r\n            {entry.name}: <span className=\"font-semibold\">{formatValue(entry.value)}</span>\r\n          </p>\r\n        ))}\r\n        <p className=\"font-bold mt-2 border-t pt-2\" style={{ borderColor: theme === 'dark' ? '#4b5563' : '#e5e7eb' }}>\r\n          Total: {formatValue(total)}\r\n        </p>\r\n      </motion.div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\n// Custom Tooltip for Pie Chart\r\nconst CustomPieTooltip = ({ active, payload, theme, chartTextColor }) => {\r\n  if (active && payload && payload.length) {\r\n    const data = payload[0].payload;\r\n    return (\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 5 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        exit={{ opacity: 0, y: 5 }}\r\n        className=\"custom-tooltip p-3 rounded-xl shadow-lg border\"\r\n        style={{\r\n          backgroundColor: theme === 'dark' ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)',\r\n          borderColor: theme === 'dark' ? 'rgba(75, 85, 99, 0.7)' : 'rgba(229, 231, 235, 0.7)',\r\n          backdropFilter: 'blur(8px)',\r\n          color: chartTextColor,\r\n          fontSize: '14px',\r\n        }}\r\n      >\r\n        <p className=\"font-bold mb-1\" style={{ color: data.color || chartTextColor }}>{data.name}</p>\r\n        <p>\r\n          Valor: <span className=\"font-semibold\">{data.value}</span>\r\n        </p>\r\n        <p>\r\n          Porcentaje: <span className=\"font-semibold\">{`${(data.percent * 100).toFixed(1)}%`}</span>\r\n        </p>\r\n      </motion.div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst DashboardCharts = React.memo(({\r\n  dailySalesChartData,\r\n  dailyOrdersChartData,\r\n  statusPieChartData,\r\n  theme = 'dark',\r\n  chartTextColor = '#ffffff',\r\n  salesFilterRange,\r\n  setSalesFilterRange = () => {},\r\n  salesCustomStartDate,\r\n  setSalesCustomStartDate = () => {},\r\n  salesCustomEndDate,\r\n  setSalesCustomEndDate = () => {},\r\n  ordersFilterRange,\r\n  setOrdersFilterRange = () => {},\r\n  ordersCustomStartDate,\r\n  setOrdersCustomStartDate = () => {},\r\n  ordersCustomEndDate,\r\n  setOrdersCustomEndDate = () => {},\r\n  handleSaveDailyIngresos = () => {},\r\n  handleDeleteDailyIngresos = () => {},\r\n  handleSaveDailyOrders = () => {},\r\n  handleDeleteDailyOrders = () => {},\r\n  handleSaveDailyExpenses = () => {},\r\n  handleDeleteDailyExpenses = () => {},\r\n  loading,\r\n  selectedMonth,\r\n  setSelectedMonth = () => {}\r\n}) => {\r\n  const [isMobileDevice, setIsMobileDevice] = useState(false);\r\n  const [payments, setPayments] = useState([]);\r\n  const [expenseFilterRange, setExpenseFilterRange] = useState('30_days');\r\n  const [expenseCustomStartDate, setExpenseCustomStartDate] = useState(null);\r\n  const [expenseCustomEndDate, setExpenseCustomEndDate] = useState(null);\r\n  const [selectedRecipient, setSelectedRecipient] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const paymentsQuery = query(collection(db, 'payments'), orderBy('timestamp', 'desc'));\r\n    const unsubscribe = onSnapshot(paymentsQuery, (snapshot) => {\r\n      setPayments(\r\n        snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))\r\n      );\r\n    }, (error) => console.error(`Error al cargar pagos: ${error.message}`));\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setIsMobileDevice(checkIsMobile());\r\n    };\r\n    handleResize();\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const dailyExpensesChartData = useMemo(() => {\r\n    const groupedByDate = payments.reduce((acc, payment) => {\r\n      if (!payment.timestamp) return acc;\r\n      const date = new Date(payment.timestamp.toDate());\r\n      const now = new Date();\r\n      let startDate;\r\n      if (expenseFilterRange === '7_days') {\r\n        startDate = new Date(now.setDate(now.getDate() - 7));\r\n      } else if (expenseFilterRange === '30_days') {\r\n        startDate = new Date(now.setDate(now.getDate() - 30));\r\n      } else if (expenseFilterRange === 'year') {\r\n        startDate = new Date(now.getFullYear(), 0, 1);\r\n      } else if (expenseFilterRange === 'custom' && expenseCustomStartDate && expenseCustomEndDate) {\r\n        startDate = new Date(expenseCustomStartDate);\r\n      } else {\r\n        startDate = new Date(0);\r\n      }\r\n      if (expenseFilterRange === 'custom' && expenseCustomEndDate) {\r\n        const endDate = new Date(expenseCustomEndDate);\r\n        if (date < startDate || date > endDate) return acc;\r\n      } else if (date < startDate) {\r\n        return acc;\r\n      }\r\n      const dateKey = date.toISOString().split('T')[0];\r\n      if (!acc[dateKey]) {\r\n        acc[dateKey] = { name: dateKey, Total: 0 };\r\n      }\r\n      acc[dateKey].Total += payment.amount;\r\n      return acc;\r\n    }, {});\r\n    return Object.values(groupedByDate).sort((a, b) => new Date(a.name) - new Date(b.name));\r\n  }, [payments, expenseFilterRange, expenseCustomStartDate, expenseCustomEndDate]);\r\n\r\n  const totalExpenses = useMemo(() => payments.reduce((sum, payment) => sum + payment.amount, 0), [payments]);\r\n  const totalOrders = useMemo(() => statusPieChartData.reduce((sum, entry) => sum + entry.value, 0), [statusPieChartData]);\r\n\r\n  const aggregatedPaymentsByRecipient = useMemo(() => {\r\n    const grouped = payments.reduce((acc, payment) => {\r\n      const storeName = payment.store || 'Desconocido';\r\n      if (!acc[storeName]) {\r\n        acc[storeName] = { totalAmount: 0, payments: [] };\r\n      }\r\n      acc[storeName].totalAmount += payment.amount;\r\n      acc[storeName].payments.push(payment);\r\n      return acc;\r\n    }, {});\r\n    return Object.entries(grouped)\r\n      .map(([store, data]) => ({ store, ...data }))\r\n      .sort((a, b) => b.totalAmount - a.totalAmount);\r\n  }, [payments]);\r\n\r\n  const paymentsForSelectedRecipient = useMemo(() => {\r\n    if (!selectedRecipient) return [];\r\n    return payments.filter(payment => payment.store === selectedRecipient).sort((a, b) => b.timestamp.toDate() - a.timestamp.toDate());\r\n  }, [payments, selectedRecipient]);\r\n\r\n  const chartVariants = {\r\n    hidden: { opacity: 0, scale: 0.98, y: 10 },\r\n    visible: { opacity: 1, scale: 1, y: 0, transition: { duration: 0.6, ease: \"easeOut\" } },\r\n    exit: { opacity: 0, scale: 0.98, y: 10, transition: { duration: 0.4, ease: \"easeIn\" } },\r\n  };\r\n\r\n  const pieChartVariants = {\r\n    hidden: { opacity: 0, scale: 0.9 },\r\n    visible: { opacity: 1, scale: 1, transition: { duration: 0.7, ease: \"easeOut\" } },\r\n    exit: { opacity: 0, scale: 0.9, transition: { duration: 0.5, ease: \"easeIn\" } },\r\n  };\r\n\r\n  const chartMinWidth = isMobileDevice ? \"min-w-[700px]\" : \"min-w-0\";\r\n  const chartHeight = isMobileDevice ? \"h-[250px]\" : \"h-[300px]\";\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-12 mb-8 px-4 sm:px-6 lg:px-8 pb-12\">\r\n      <style dangerouslySetInnerHTML={{ __html: scrollbarStyles }} />\r\n      {/* Daily Sales Chart */}\r\n      <div className={classNames(\r\n          theme === 'dark' ? 'bg-gray-800' : 'bg-white',\r\n          isMobileDevice ? 'p-4' : 'p-6',\r\n          'rounded-2xl shadow-xl border',\r\n          theme === 'dark' ? 'border-gray-700' : 'border-gray-200',\r\n          'relative min-h-[450px] flex flex-col'\r\n        )}>\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3 className=\"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center\">\r\n            <DollarSign className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-green-400\")} />\r\n            Ingresos Diarios\r\n          </h3>\r\n          <Popover className=\"relative\">\r\n            <PopoverButton className=\"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors\">\r\n              <MoreVertical className={classNames(isMobileDevice ? \"w-4 h-4\" : \"w-5 h-5\", \"text-gray-400\")} />\r\n            </PopoverButton>\r\n            <Transition\r\n              as={Fragment}\r\n              enter=\"transition ease-out duration-200\"\r\n              enterFrom=\"opacity-0 translate-y-1\"\r\n              enterTo=\"opacity-100 translate-y-0\"\r\n              leave=\"transition ease-in duration-150\"\r\n              leaveFrom=\"opacity-100 translate-y-0\"\r\n              leaveTo=\"opacity-0 translate-y-1\"\r\n            >\r\n              <PopoverPanel className={classNames(\r\n                \"absolute z-50 mt-2\",\r\n                \"right-0 left-auto\",\r\n                isMobileDevice ? \"w-[150px] text-sm\" : \"w-56\",\r\n                \"rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\",\r\n                theme === 'dark' ? 'bg-gray-700' : 'bg-white',\r\n                \"origin-top-right\",\r\n                \"max-h-[80vh] overflow-y-auto custom-scrollbar\"\r\n              )}>\r\n                <div className=\"py-1\">\r\n                  <button\r\n                    onClick={handleSaveDailyIngresos}\r\n                    disabled={loading}\r\n                    className={classNames(\r\n                      \"block w-full text-left px-4 py-2 flex items-center transition-colors\",\r\n                      isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                      loading ? 'text-gray-400 cursor-not-allowed' : (theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100')\r\n                    )}\r\n                  >\r\n                    <Save className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-blue-400\")} />\r\n                    {loading ? 'Guardando...' : 'Guardar Ventas del Da'}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDeleteDailyIngresos()}\r\n                    disabled={loading}\r\n                    className={classNames(\r\n                      \"block w-full text-left px-4 py-2 flex items-center mt-1 transition-colors\",\r\n                      isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                      loading ? 'text-gray-400 cursor-not-allowed' : (theme === 'dark' ? 'text-red-300 hover:bg-gray-600' : 'text-red-600 hover:bg-gray-100')\r\n                    )}\r\n                  >\r\n                    <Trash2 className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-red-400\")} />\r\n                    Eliminar Ventas del Da\r\n                  </button>\r\n                  <div className={classNames(\"my-1\", theme === 'dark' ? \"border-t border-gray-600\" : \"border-t border-gray-200\")}></div>\r\n                  <button\r\n                    onClick={() => { setSalesFilterRange('7_days'); setSalesCustomStartDate(null); setSalesCustomEndDate(null); setSelectedMonth(null); }}\r\n                    className={classNames(\r\n                      \"block w-full text-left px-4 py-2 transition-colors\",\r\n                      isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                      theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100')\r\n                    }\r\n                  >\r\n                    Ver ltimos 7 das\r\n                  </button>\r\n                  <button\r\n                    onClick={() => { setSalesFilterRange('30_days'); setSalesCustomStartDate(null); setSalesCustomEndDate(null); setSelectedMonth(null); }}\r\n                    className={classNames(\r\n                      \"block w-full text-left px-4 py-2 transition-colors\",\r\n                      isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                      theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100')\r\n                    }\r\n                  >\r\n                    Ver todo el mes\r\n                  </button>\r\n                  <button\r\n                    onClick={() => { setSalesFilterRange('year'); setSalesCustomStartDate(null); setSalesCustomEndDate(null); setSelectedMonth(null); }}\r\n                    className={classNames(\r\n                      \"block w-full text-left px-4 py-2 transition-colors\",\r\n                      isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                      theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100')\r\n                    }\r\n                  >\r\n                    Ver todo el ao\r\n                  </button>\r\n                  <div className={classNames(\"my-1\", theme === 'dark' ? \"border-t border-gray-600\" : \"border-t border-gray-200\")}></div>\r\n                  <div className={classNames(\"px-4 py-2 font-medium text-gray-400\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Filtros personalizados</div>\r\n                  <div className=\"px-4 py-2\">\r\n                    <label className={classNames(\"block font-medium text-gray-400 mb-1\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Desde:</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={salesCustomStartDate ? salesCustomStartDate.toISOString().split('T')[0] : ''}\r\n                      onChange={(e) => { setSalesCustomStartDate(new Date(e.target.value)); setSalesFilterRange('custom'); setSelectedMonth(null); }}\r\n                      className={classNames(\r\n                        \"block w-full rounded-md shadow-sm p-2\",\r\n                        isMobileDevice ? \"text-xs sm:text-sm\" : \"text-sm\",\r\n                        theme === 'dark' ? 'bg-gray-800 text-gray-200 border-gray-600' : 'bg-white text-gray-900 border-gray-300'\r\n                      )}\r\n                    />\r\n                  </div>\r\n                  <div className=\"px-4 py-2\">\r\n                    <label className={classNames(\"block font-medium text-gray-400 mb-1\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Hasta:</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={salesCustomEndDate ? salesCustomEndDate.toISOString().split('T')[0] : ''}\r\n                      onChange={(e) => { setSalesCustomEndDate(new Date(e.target.value)); setSalesFilterRange('custom'); }}\r\n                      className={classNames(\r\n                        \"block w-full rounded-md shadow-sm p-2\",\r\n                        isMobileDevice ? \"text-xs sm:text-sm\" : \"text-sm\",\r\n                        theme === 'dark' ? 'bg-gray-800 text-gray-200 border-gray-600' : 'bg-white text-gray-900 border-gray-300'\r\n                      )}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </PopoverPanel>\r\n            </Transition>\r\n          </Popover>\r\n        </div>\r\n        <motion.div\r\n          className={classNames(\r\n            isMobileDevice ? 'overflow-x-auto overflow-y-hidden custom-scrollbar' : 'overflow-x-hidden overflow-y-hidden',\r\n            'relative flex flex-col flex-grow'\r\n          )}\r\n          variants={chartVariants}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          exit=\"exit\"\r\n        >\r\n          {salesFilterRange === 'year' && selectedMonth && (\r\n            <motion.button\r\n              initial={{ opacity: 0, x: -10 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              exit={{ opacity: 0, x: -10 }}\r\n              onClick={() => setSelectedMonth(null)}\r\n              className=\"mb-4 text-blue-500 hover:underline text-sm self-start transition-all duration-200\"\r\n            >\r\n              <ArrowLeft className=\"w-4 h-4 inline-block mr-2\" />Volver al resumen anual\r\n            </motion.button>\r\n          )}\r\n          {loading ? (\r\n            <SkeletonLoader type=\"bar\" theme={theme} isMobile={isMobileDevice} />\r\n          ) : (\r\n            <div className={classNames(\"w-full\", chartHeight, chartMinWidth)}>\r\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <BarChart\r\n                  data={dailySalesChartData}\r\n                  margin={{ top: 20, right: 30, left: 20, bottom: 20 }}\r\n                  barCategoryGap={isMobileDevice ? \"0%\" : \"40%\"}\r\n                  barGap={1}\r\n                >\r\n                  <CartesianGrid\r\n                    strokeDasharray={isMobileDevice ? \"2 2\" : \"3 3\"}\r\n                    stroke={theme === 'dark' ? '#4b5563' : '#e5e7eb'}\r\n                    vertical={false}\r\n                  />\r\n                  <XAxis\r\n                    dataKey=\"name\"\r\n                    stroke={chartTextColor}\r\n                    tick={{ fill: chartTextColor, fontSize: isMobileDevice ? 9 : 11 }}\r\n                    angle={-45}\r\n                    textAnchor=\"end\"\r\n                    interval={0}\r\n                    height={60}\r\n                  />\r\n                  <YAxis\r\n                    stroke={chartTextColor}\r\n                    tick={{ fill: chartTextColor, fontSize: isMobileDevice ? 9 : 11 }}\r\n                    tickFormatter={(value) => copFormatter.format(value)}\r\n                    width={isMobileDevice ? 50 : 80}\r\n                  />\r\n                  <Tooltip\r\n                    cursor={{ fill: theme === 'dark' ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.05)', rx: 4 }}\r\n                    content={<CustomBarTooltip theme={theme} chartTextColor={chartTextColor} copFormatter={copFormatter} />}\r\n                  />\r\n                  <Legend\r\n                    wrapperStyle={{ color: chartTextColor, fontSize: isMobileDevice ? 10 : 13, paddingTop: '15px', paddingBottom: '20px' }}\r\n                    align=\"center\"\r\n                    verticalAlign=\"top\"\r\n                    iconType=\"circle\"\r\n                  />\r\n                  <Bar\r\n                    dataKey=\"Efectivo\"\r\n                    fill={BAR_COLORS.Efectivo}\r\n                    stroke={BAR_COLORS.Efectivo}\r\n                    radius={[8, 8, 0, 0]}\r\n                    maxBarSize={isMobileDevice ? 12 : 25}\r\n                    animationDuration={800}\r\n                    onClick={(data) => {\r\n                      if (salesFilterRange === 'year' && data.monthKey) {\r\n                        setSelectedMonth(data.monthKey);\r\n                      }\r\n                    }}\r\n                  />\r\n                  <Bar\r\n                    dataKey=\"Daviplata\"\r\n                    fill={BAR_COLORS.Daviplata}\r\n                    stroke={BAR_COLORS.Daviplata}\r\n                    radius={[8, 8, 0, 0]}\r\n                    maxBarSize={isMobileDevice ? 12 : 25}\r\n                    animationDuration={800}\r\n                    onClick={(data) => {\r\n                      if (salesFilterRange === 'year' && data.monthKey) {\r\n                        setSelectedMonth(data.monthKey);\r\n                      }\r\n                    }}\r\n                  />\r\n                  <Bar\r\n                    dataKey=\"Nequi\"\r\n                    fill={BAR_COLORS.Nequi}\r\n                    stroke={BAR_COLORS.Nequi}\r\n                    radius={[8, 8, 0, 0]}\r\n                    maxBarSize={isMobileDevice ? 12 : 25}\r\n                    animationDuration={800}\r\n                    onClick={(data) => {\r\n                      if (salesFilterRange === 'year' && data.monthKey) {\r\n                        setSelectedMonth(data.monthKey);\r\n                      }\r\n                    }}\r\n                  />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* New 2x2 Grid for Expenses Charts */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12\">\r\n        {/* Daily Expenses Chart */}\r\n        <div className={classNames(\r\n            theme === 'dark' ? 'bg-gray-800' : 'bg-white',\r\n            isMobileDevice ? 'p-4' : 'p-6',\r\n            'rounded-2xl shadow-xl border',\r\n            theme === 'dark' ? 'border-gray-700' : 'border-gray-200',\r\n            'relative min-h-[350px] flex flex-col'\r\n          )}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <h3 className=\"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center\">\r\n              <DollarSign className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-red-400\")} />\r\n              Gastos Diarios\r\n            </h3>\r\n            <Popover className=\"relative\">\r\n              <PopoverButton className=\"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors\">\r\n                <MoreVertical className={classNames(isMobileDevice ? \"w-4 h-4\" : \"w-5 h-5\", \"text-gray-400\")} />\r\n              </PopoverButton>\r\n              <Transition\r\n                as={Fragment}\r\n                enter=\"transition ease-out duration-200\"\r\n                enterFrom=\"opacity-0 translate-y-1\"\r\n                enterTo=\"opacity-100 translate-y-0\"\r\n                leave=\"transition ease-in duration-150\"\r\n                leaveFrom=\"opacity-100 translate-y-0\"\r\n                leaveTo=\"opacity-0 translate-y-1\"\r\n              >\r\n                <PopoverPanel className={classNames(\r\n                  \"absolute z-50 mt-2\",\r\n                  \"right-0 left-auto\",\r\n                  isMobileDevice ? \"w-[150px] text-sm\" : \"w-56\",\r\n                  \"rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\",\r\n                  theme === 'dark' ? 'bg-gray-700' : 'bg-white',\r\n                  \"origin-top-right\",\r\n                  \"max-h-[80vh] overflow-y-auto custom-scrollbar\"\r\n                )}>\r\n                  <div className=\"py-1\">\r\n                    <button\r\n                      onClick={handleSaveDailyExpenses}\r\n                      disabled={loading}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 flex items-center transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        loading ? 'text-gray-400 cursor-not-allowed' : (theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100')\r\n                      )}\r\n                    >\r\n                      <Save className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-blue-400\")} />\r\n                      {loading ? 'Guardando...' : 'Guardar Gastos del Da'}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDeleteDailyExpenses()}\r\n                      disabled={loading}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 flex items-center mt-1 transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        loading ? 'text-gray-400 cursor-not-allowed' : (theme === 'dark' ? 'text-red-300 hover:bg-gray-600' : 'text-red-600 hover:bg-gray-100')\r\n                      )}\r\n                    >\r\n                      <Trash2 className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-red-400\")} />\r\n                      Eliminar Gastos del Da\r\n                    </button>\r\n                    <div className={classNames(\"my-1\", theme === 'dark' ? \"border-t border-gray-600\" : \"border-t border-gray-200\")}></div>\r\n                    <button\r\n                      onClick={() => { setExpenseFilterRange('7_days'); setExpenseCustomStartDate(null); setExpenseCustomEndDate(null); }}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100'\r\n                      )}\r\n                    >\r\n                      Ver ltimos 7 das\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setExpenseFilterRange('30_days'); setExpenseCustomStartDate(null); setExpenseCustomEndDate(null); }}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100'\r\n                      )}\r\n                    >\r\n                      Ver todo el mes\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setExpenseFilterRange('year'); setExpenseCustomStartDate(null); setExpenseCustomEndDate(null); }}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100'\r\n                      )}\r\n                    >\r\n                      Ver todo el ao\r\n                    </button>\r\n                    <div className={classNames(\"my-1\", theme === 'dark' ? \"border-t border-gray-600\" : \"border-t border-gray-200\")}></div>\r\n                    <div className={classNames(\"px-4 py-2 font-medium text-gray-400\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Filtros personalizados</div>\r\n                    <div className=\"px-4 py-2\">\r\n                      <label className={classNames(\"block font-medium text-gray-400 mb-1\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Desde:</label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={expenseCustomStartDate ? expenseCustomStartDate.toISOString().split('T')[0] : ''}\r\n                        onChange={(e) => { setExpenseCustomStartDate(new Date(e.target.value)); setExpenseFilterRange('custom'); }}\r\n                        className={classNames(\r\n                          \"block w-full rounded-md shadow-sm p-2\",\r\n                          isMobileDevice ? \"text-xs sm:text-sm\" : \"text-sm\",\r\n                          theme === 'dark' ? 'bg-gray-800 text-gray-200 border-gray-600' : 'bg-white text-gray-900 border-gray-300'\r\n                        )}\r\n                      />\r\n                    </div>\r\n                    <div className=\"px-4 py-2\">\r\n                      <label className={classNames(\"block font-medium text-gray-400 mb-1\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Hasta:</label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={expenseCustomEndDate ? expenseCustomEndDate.toISOString().split('T')[0] : ''}\r\n                        onChange={(e) => { setExpenseCustomEndDate(new Date(e.target.value)); setExpenseFilterRange('custom'); }}\r\n                        className={classNames(\r\n                          \"block w-full rounded-md shadow-sm p-2\",\r\n                          isMobileDevice ? \"text-xs sm:text-sm\" : \"text-sm\",\r\n                          theme === 'dark' ? 'bg-gray-800 text-gray-200 border-gray-600' : 'bg-white text-gray-900 border-gray-300'\r\n                        )}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </PopoverPanel>\r\n              </Transition>\r\n            </Popover>\r\n          </div>\r\n          <motion.div\r\n            className={classNames(\r\n              isMobileDevice ? 'overflow-x-auto overflow-y-hidden custom-scrollbar' : 'overflow-x-hidden overflow-y-hidden',\r\n              'relative flex flex-col flex-grow'\r\n            )}\r\n            variants={chartVariants}\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n            exit=\"exit\"\r\n          >\r\n            {loading ? (\r\n              <SkeletonLoader type=\"bar\" theme={theme} isMobile={isMobileDevice} />\r\n            ) : (\r\n              <div className={classNames(\"w-full\", chartHeight, chartMinWidth)}>\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                  <BarChart\r\n                    data={dailyExpensesChartData}\r\n                    margin={{ top: 20, right: 30, left: 20, bottom: 20 }}\r\n                    barCategoryGap={isMobileDevice ? \"0%\" : \"40%\"}\r\n                    barGap={1}\r\n                  >\r\n                    <CartesianGrid\r\n                      strokeDasharray={isMobileDevice ? \"2 2\" : \"3 3\"}\r\n                      stroke={theme === 'dark' ? '#4b5563' : '#e5e7eb'}\r\n                      vertical={false}\r\n                    />\r\n                    <XAxis\r\n                      dataKey=\"name\"\r\n                      stroke={chartTextColor}\r\n                      tick={{ fill: chartTextColor, fontSize: isMobileDevice ? 9 : 11 }}\r\n                      angle={-45}\r\n                      textAnchor=\"end\"\r\n                      interval={0}\r\n                      height={60}\r\n                    />\r\n                    <YAxis\r\n                      stroke={chartTextColor}\r\n                      tick={{ fill: chartTextColor, fontSize: isMobileDevice ? 9 : 11 }}\r\n                      tickFormatter={(value) => copFormatter.format(value)}\r\n                      width={isMobileDevice ? 50 : 80}\r\n                    />\r\n                    <Tooltip\r\n                      cursor={{ fill: theme === 'dark' ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.05)', rx: 4 }}\r\n                      content={<CustomBarTooltip theme={theme} chartTextColor={chartTextColor} copFormatter={copFormatter} />}\r\n                    />\r\n                    <Legend\r\n                      wrapperStyle={{ color: chartTextColor, paddingTop: '15px', fontSize: isMobileDevice ? 10 : 13 }}\r\n                      align=\"center\"\r\n                      verticalAlign=\"top\"\r\n                      iconType=\"circle\"\r\n                    />\r\n                    <Bar\r\n                      dataKey=\"Total\"\r\n                      fill=\"#EF4444\"\r\n                      stroke=\"#EF4444\"\r\n                      radius={[8, 8, 0, 0]}\r\n                      maxBarSize={isMobileDevice ? 12 : 25}\r\n                      animationDuration={800}\r\n                    />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n            )}\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Expenses Summary Card */}\r\n        <motion.div\r\n          className={classNames(\r\n            `bg-${theme === 'dark' ? 'gray-800' : 'white'} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl border border-${theme === 'dark' ? 'gray-700' : 'gray-200'}`\r\n          )}\r\n          variants={chartVariants}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          exit=\"exit\"\r\n        >\r\n          <div className=\"flex items-center justify-between mb-5\">\r\n            <h3 className=\"text-2xl font-bold text-gray-100\">Gastos</h3>\r\n            <DollarSign className=\"text-red-400 w-10 h-10 animate-pulse\" />\r\n          </div>\r\n          <div className=\"space-y-4 text-base text-gray-300\">\r\n            <div className=\"flex justify-between items-center text-xl font-semibold\">\r\n              <span className=\"text-gray-200\">Total de Gastos:</span>\r\n              <span className=\"font-extrabold text-red-400\">\r\n                {copFormatter.format(totalExpenses)}\r\n              </span>\r\n            </div>\r\n            <div\r\n              className=\"border-t border-dashed my-4\"\r\n              style={{ borderColor: theme === 'dark' ? '#4b5563' : '#d1d5db' }}\r\n            ></div>\r\n            {!selectedRecipient ? (\r\n              <>\r\n                <p className=\"text-gray-400 text-sm mb-2\">Gastos por Remitente:</p>\r\n                <div className=\"text-sm max-h-52 overflow-y-auto custom-scrollbar pr-2\">\r\n                  {aggregatedPaymentsByRecipient.length === 0 ? (\r\n                    <p className=\"text-gray-500 text-center py-6\">\r\n                      An no hay gastos registrados. Empieza a aadir algunos! \r\n                    </p>\r\n                  ) : (\r\n                    aggregatedPaymentsByRecipient.map((entry, idx) => (\r\n                      <button\r\n                        key={idx}\r\n                        onClick={() => setSelectedRecipient(entry.store)}\r\n                        className=\"flex justify-between items-center w-full py-3 border-b last:border-b-0 transition-colors duration-200 hover:bg-gray-700 dark:hover:bg-gray-800 rounded-md px-2 -mx-2 cursor-pointer\"\r\n                        style={{ borderColor: theme === 'dark' ? '#374151' : '#e5e7eb' }}\r\n                      >\r\n                        <span className=\"text-gray-300 flex-1 pr-3 truncate text-left font-medium\">\r\n                          {entry.store}\r\n                        </span>\r\n                        <div className=\"flex flex-col items-end\">\r\n                          <span className=\"text-red-300 font-semibold\">\r\n                            {copFormatter.format(entry.totalAmount)}\r\n                          </span>\r\n                          <span className=\"text-gray-500 text-xs mt-1\">\r\n                            ({entry.payments.length} movimientos)\r\n                          </span>\r\n                        </div>\r\n                      </button>\r\n                    ))\r\n                  )}\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <button\r\n                  onClick={() => setSelectedRecipient(null)}\r\n                  className=\"flex items-center text-blue-400 hover:underline text-sm mb-4 transition-colors\"\r\n                >\r\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" /> Volver a Gastos por Remitente\r\n                </button>\r\n                <h4 className=\"text-lg font-semibold text-gray-200 mb-3\">{selectedRecipient}</h4>\r\n                <div className={classNames(\"text-sm max-h-52 overflow-y-auto custom-scrollbar pr-2\", isMobileDevice ? \"overflow-x-auto\" : \"overflow-x-hidden\")}>\r\n                    <div className=\"min-w-full inline-block align-middle\">\r\n                        {paymentsForSelectedRecipient.length === 0 ? (\r\n                            <p className=\"text-gray-500 text-center py-6\">\r\n                                No hay movimientos para este remitente en el rango de fechas seleccionado.\r\n                            </p>\r\n                        ) : (\r\n                            paymentsForSelectedRecipient.map((payment, idx) => (\r\n                                <div\r\n                                    key={idx}\r\n                                    className=\"flex items-center py-3 border-b last:border-b-0 transition-colors duration-200 hover:bg-gray-700 dark:hover:bg-gray-800 rounded-md px-2 -mx-2\"\r\n                                    style={{ borderColor: theme === 'dark' ? '#374151' : '#e5e7eb' }}\r\n                                >\r\n                                    <span className=\"text-gray-400 font-normal mr-3 min-w-[80px]\">\r\n                                        {payment.name || 'N/A'}\r\n                                    </span>\r\n                                    <span className=\"text-gray-300 font-light text-nowrap mr-3 min-w-[150px]\">\r\n                                        {new Date(payment.timestamp?.toDate()).toLocaleString('es-CO', { dateStyle: 'short', timeStyle: 'short' })}\r\n                                    </span>\r\n                                    <span className=\"text-red-300 font-semibold text-right flex-grow\">\r\n                                        {copFormatter.format(payment.amount)}\r\n                                    </span>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* Existing Daily Orders and Status Pie Charts */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12\">\r\n        {/* Daily Orders Chart */}\r\n        <div className={classNames(\r\n            theme === 'dark' ? 'bg-gray-800' : 'bg-white',\r\n            isMobileDevice ? 'p-4' : 'p-6',\r\n            'rounded-2xl shadow-xl border',\r\n            theme === 'dark' ? 'border-gray-700' : 'border-gray-200',\r\n            'relative min-h-[350px] flex flex-col'\r\n          )}>\r\n          <h3 className=\"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center justify-between\">\r\n            <span className=\"flex items-center\">\r\n              <Package className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-purple-400\")} />\r\n              Pedidos Diarios\r\n            </span>\r\n            <Popover className=\"relative\">\r\n              <PopoverButton className=\"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors\">\r\n                <MoreVertical className={classNames(isMobileDevice ? \"w-4 h-4\" : \"w-5 h-5\", \"text-gray-400\")} />\r\n              </PopoverButton>\r\n              <Transition\r\n                as={Fragment}\r\n                enter=\"transition ease-out duration-200\"\r\n                enterFrom=\"opacity-0 translate-y-1\"\r\n                enterTo=\"opacity-100 translate-y-0\"\r\n                leave=\"transition ease-in duration-150\"\r\n                leaveFrom=\"opacity-100 translate-y-0\"\r\n                leaveTo=\"opacity-0 translate-y-1\"\r\n              >\r\n                <PopoverPanel className={classNames(\r\n                  \"absolute z-50 mt-2\",\r\n                  \"right-0 left-auto\",\r\n                  isMobileDevice ? \"w-[150px] text-sm\" : \"w-56\",\r\n                  \"rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\",\r\n                  theme === 'dark' ? 'bg-gray-700' : 'bg-white',\r\n                  \"origin-top-right\",\r\n                  \"max-h-[80vh] overflow-y-auto custom-scrollbar\"\r\n                )}>\r\n                  <div className=\"py-1\">\r\n                    <button\r\n                      onClick={handleSaveDailyOrders}\r\n                      disabled={loading}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 flex items-center transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        loading ? 'text-gray-400 cursor-not-allowed' : (theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100')\r\n                      )}\r\n                    >\r\n                      <Save className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-blue-400\")} />\r\n                      {loading ? 'Guardando...' : 'Guardar Pedidos del Da'}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDeleteDailyOrders()}\r\n                      disabled={loading}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 flex items-center mt-1 transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        loading ? 'text-gray-400 cursor-not-allowed' : (theme === 'dark' ? 'text-red-300 hover:bg-gray-600' : 'text-red-600 hover:bg-gray-100')\r\n                      )}\r\n                    >\r\n                      <Trash2 className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-red-400\")} />\r\n                      Eliminar Pedidos del Da\r\n                    </button>\r\n                    <div className={classNames(\"my-1\", theme === 'dark' ? \"border-t border-gray-600\" : \"border-t border-gray-200\")}></div>\r\n                    <button\r\n                      onClick={() => { setOrdersFilterRange('7_days'); setOrdersCustomStartDate(null); setOrdersCustomEndDate(null); }}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100'\r\n                      )}\r\n                    >\r\n                      Ver ltimos 7 das\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setOrdersFilterRange('30_days'); setOrdersCustomStartDate(null); setOrdersCustomEndDate(null); }}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100'\r\n                      )}\r\n                    >\r\n                      Ver todo el mes\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { setOrdersFilterRange('year'); setOrdersCustomStartDate(null); setOrdersCustomEndDate(null); }}\r\n                      className={classNames(\r\n                        \"block w-full text-left px-4 py-2 transition-colors\",\r\n                        isMobileDevice ? \"text-xs\" : \"text-sm\",\r\n                        theme === 'dark' ? 'text-gray-200 hover:bg-gray-600' : 'text-gray-700 hover:bg-gray-100'\r\n                      )}\r\n                    >\r\n                      Ver todo el ao\r\n                    </button>\r\n                    <div className={classNames(\"my-1\", theme === 'dark' ? \"border-t border-gray-600\" : \"border-t border-gray-200\")}></div>\r\n                    <div className={classNames(\"px-4 py-2 font-medium text-gray-400\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Filtros personalizados</div>\r\n                    <div className=\"px-4 py-2\">\r\n                      <label className={classNames(\"block font-medium text-gray-400 mb-1\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Desde:</label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={ordersCustomStartDate ? ordersCustomStartDate.toISOString().split('T')[0] : ''}\r\n                        onChange={(e) => { setOrdersCustomStartDate(new Date(e.target.value)); setOrdersFilterRange('custom'); }}\r\n                        className={classNames(\r\n                          \"block w-full rounded-md shadow-sm p-2\",\r\n                          isMobileDevice ? \"text-xs sm:text-sm\" : \"text-sm\",\r\n                          theme === 'dark' ? 'bg-gray-800 text-gray-200 border-gray-600' : 'bg-white text-gray-900 border-gray-300'\r\n                        )}\r\n                      />\r\n                    </div>\r\n                    <div className=\"px-4 py-2\">\r\n                      <label className={classNames(\"block font-medium text-gray-400 mb-1\", isMobileDevice ? \"text-xs\" : \"text-sm\")}>Hasta:</label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={ordersCustomEndDate ? ordersCustomEndDate.toISOString().split('T')[0] : ''}\r\n                        onChange={(e) => { setOrdersCustomEndDate(new Date(e.target.value)); setOrdersFilterRange('custom'); }}\r\n                        className={classNames(\r\n                          \"block w-full rounded-md shadow-sm p-2\",\r\n                          isMobileDevice ? \"text-xs sm:text-sm\" : \"text-sm\",\r\n                          theme === 'dark' ? 'bg-gray-800 text-gray-200 border-gray-600' : 'bg-white text-gray-900 border-gray-300'\r\n                        )}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </PopoverPanel>\r\n              </Transition>\r\n            </Popover>\r\n          </h3>\r\n          <motion.div\r\n            className={classNames(\r\n              isMobileDevice ? 'overflow-x-auto overflow-y-hidden custom-scrollbar' : 'overflow-x-hidden overflow-y-hidden',\r\n              'relative flex flex-col flex-grow'\r\n            )}\r\n            variants={chartVariants}\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n            exit=\"exit\"\r\n          >\r\n            {ordersFilterRange === 'year' && selectedMonth && (\r\n              <motion.button\r\n                initial={{ opacity: 0, x: -10 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                exit={{ opacity: 0, x: -10 }}\r\n                onClick={() => setSelectedMonth(null)}\r\n                className=\"mb-4 text-blue-500 hover:underline text-sm self-start transition-all duration-200\"\r\n              >\r\n                <ArrowLeft className=\"w-4 h-4 inline-block mr-2\" />Volver al resumen anual\r\n              </motion.button>\r\n            )}\r\n            {loading ? (\r\n              <SkeletonLoader type=\"bar\" theme={theme} isMobile={isMobileDevice} />\r\n            ) : (\r\n        <div className={classNames(\"w-full\", chartHeight, chartMinWidth)}>\r\n  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n    <BarChart\r\n      data={dailyOrdersChartData}\r\n      margin={{ top: 20, right: 30, left: 20, bottom: 20 }}\r\n      barCategoryGap={isMobileDevice ? \"0%\" : \"40%\"}\r\n      barGap={1}\r\n    >\r\n      <CartesianGrid\r\n        strokeDasharray={isMobileDevice ? \"2 2\" : \"3 3\"}\r\n        stroke={theme === 'dark' ? '#4b5563' : '#e5e7eb'}\r\n        vertical={false}\r\n      />\r\n      <XAxis\r\n        dataKey=\"name\"\r\n        stroke={chartTextColor}\r\n        tick={{ fill: chartTextColor, fontSize: isMobileDevice ? 9 : 11 }}\r\n        angle={-45}\r\n        textAnchor=\"end\"\r\n        interval={0}\r\n        height={60}\r\n      />\r\n      <YAxis\r\n        stroke={chartTextColor}\r\n        tick={{ fill: chartTextColor, fontSize: isMobileDevice ? 9 : 11 }}\r\n        width={isMobileDevice ? 30 : 50}\r\n      />\r\n      <Tooltip\r\n        cursor={{ fill: theme === 'dark' ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.05)', rx: 4 }}\r\n        content={<CustomBarTooltip theme={theme} chartTextColor={chartTextColor} copFormatter={(val) => val.toLocaleString()} />}\r\n      />\r\n      <Legend\r\n        wrapperStyle={{ color: chartTextColor, paddingTop: '10px', fontSize: isMobileDevice ? 8 : 12 }}\r\n        align=\"center\"\r\n        verticalAlign=\"top\"\r\n        iconType=\"circle\"\r\n      />\r\n      <Bar\r\n        dataKey=\"Domicilios\"\r\n        fill=\"#8B5CF6\"\r\n        stroke=\"#8B5CF6\"\r\n        radius={[10, 10, 0, 0]}\r\n        opacity={1}\r\n        isAnimationActive={false}\r\n        maxBarSize={isMobileDevice ? 12 : 25}\r\n      />\r\n      <Bar\r\n        dataKey=\"Mesas\"\r\n        fill=\"#10B981\"\r\n        stroke=\"#10B981\"\r\n        radius={[10, 10, 0, 0]}\r\n        opacity={1}\r\n        isAnimationActive={false}\r\n        maxBarSize={isMobileDevice ? 12 : 25}\r\n      />\r\n    </BarChart>\r\n  </ResponsiveContainer>\r\n</div>\r\n            )}\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Order Status Pie Chart */}\r\n        <motion.div\r\n          className={classNames(\r\n            theme === 'dark' ? 'bg-gray-800' : 'bg-white',\r\n            isMobileDevice ? 'p-4' : 'p-6',\r\n            'rounded-2xl shadow-xl border',\r\n            theme === 'dark' ? 'border-gray-700' : 'border-gray-200',\r\n            'relative min-h-[350px] flex flex-col justify-center items-center'\r\n          )}\r\n          variants={pieChartVariants}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          exit=\"exit\"\r\n        >\r\n          <h3 className=\"text-xl font-semibold mb-4 text-gray-200 dark:text-gray-100 flex items-center\">\r\n            <TrendingUp className={classNames(isMobileDevice ? \"w-4 h-4 mr-2\" : \"w-5 h-5 mr-2\", \"text-blue-400\")} />\r\n            Estado de Pedidos\r\n          </h3>\r\n          {loading ? (\r\n            <SkeletonLoader type=\"pie\" theme={theme} isMobile={isMobileDevice} />\r\n          ) : (\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <PieChart>\r\n                <Pie\r\n                  data={statusPieChartData}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  outerRadius={isMobileDevice ? 80 : 120}\r\n                  fill=\"#8884d8\"\r\n                  dataKey=\"value\"\r\n                  animationDuration={800}\r\n                  innerRadius={isMobileDevice ? 40 : 60}\r\n                >\r\n                  {statusPieChartData.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={PIE_COLORS[index % PIE_COLORS.length]} stroke={theme === 'dark' ? '#1f2937' : '#ffffff'} strokeWidth={2} />\r\n                  ))}\r\n                  <Label\r\n                    value={`${totalOrders} Pedidos`}\r\n                    position=\"center\"\r\n                    fill={chartTextColor}\r\n                    fontSize={isMobileDevice ? 14 : 18}\r\n                    fontWeight=\"bold\"\r\n                    dy={isMobileDevice ? 0 : -10}\r\n                  />\r\n                  <Label\r\n                    value=\"Total\"\r\n                    position=\"center\"\r\n                    fill={chartTextColor}\r\n                    fontSize={isMobileDevice ? 10 : 12}\r\n                    dy={isMobileDevice ? 15 : 15}\r\n                  />\r\n                </Pie>\r\n                <Tooltip content={<CustomPieTooltip theme={theme} chartTextColor={chartTextColor} />} />\r\n                <Legend\r\n                  wrapperStyle={{ color: chartTextColor, fontSize: isMobileDevice ? 10 : 13, paddingTop: '15px' }}\r\n                  align=\"center\"\r\n                  verticalAlign=\"bottom\"\r\n                  iconType=\"circle\"\r\n                  layout=\"horizontal\"\r\n                />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          )}\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DashboardCharts;","// src/components/Admin/Dashboard.jsx\r\nimport React, { useState, useEffect, Fragment } from 'react';\r\nimport { db, auth } from '../../config/firebase';\r\nimport { onAuthStateChanged, signInAnonymously, signInWithCustomToken } from 'firebase/auth';\r\nimport { writeBatch, getDocs, collection } from 'firebase/firestore';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { classNames } from '../../utils/classNames';\r\nimport { Dialog, Transition } from '@headlessui/react';\r\nimport { Trash2, Info, X, ShoppingCart, DollarSign, Users, Activity } from 'lucide-react';\r\n\r\nimport { useDashboardData } from '../../hooks/useDashboardData';\r\nimport DashboardCharts from './DashboardCharts';\r\n\r\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\r\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\r\n\r\nconst Dashboard = ({ setError, setSuccess, theme }) => {\r\n  const [userId, setUserId] = useState(null);\r\n  const [isAuthReady, setIsAuthReady] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showConfirmClearActivity, setShowConfirmClearActivity] = useState(false);\r\n  const [confirmClearText, setConfirmClearText] = useState('');\r\n  const [showConfirmDeleteDailySales, setShowConfirmDeleteDailySales] = useState(false);\r\n  const [confirmDeleteDailySalesText, setConfirmDeleteDailySalesText] = useState('');\r\n  const [showActivityDetailModal, setShowActivityDetailModal] = useState(false);\r\n  const [selectedActivityDetail, setSelectedActivityDetail] = useState(null);\r\n  const [selectedMonth, setSelectedMonth] = useState(null);\r\n  const [salesFilterRange, setSalesFilterRange] = useState('30_days');\r\n  const [salesCustomStartDate, setSalesCustomStartDate] = useState(null);\r\n  const [salesCustomEndDate, setSalesCustomEndDate] = useState(null);\r\n  const [ordersFilterRange, setOrdersFilterRange] = useState('30_days');\r\n  const [ordersCustomStartDate, setOrdersCustomStartDate] = useState(null);\r\n  const [ordersCustomEndDate, setOrdersCustomEndDate] = useState(null);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const {\r\n    loadingData,\r\n    orders,\r\n    users,\r\n    totals,\r\n    statusCounts,\r\n    userActivity,\r\n    dailySalesChartData,\r\n    dailyOrdersChartData,\r\n    statusPieChartData,\r\n    handleSaveDailyIngresos,\r\n    handleDeleteDailyIngresos,\r\n    handleSaveDailyOrders,\r\n    handleDeleteDailyOrders,\r\n  } = useDashboardData(\r\n    db,\r\n    userId,\r\n    isAuthReady,\r\n    setError,\r\n    setSuccess,\r\n    salesFilterRange,\r\n    salesCustomStartDate,\r\n    salesCustomEndDate,\r\n    ordersFilterRange,\r\n    ordersCustomStartDate,\r\n    ordersCustomEndDate,\r\n    selectedMonth\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isAuthReady) {\r\n      setLoading(false);\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n  }, [isAuthReady]);\r\n\r\n  useEffect(() => {\r\n    if (!auth) {\r\n      console.warn(\"Firebase Auth no est disponible. Asegrate de que Firebase est inicializado correctamente.\");\r\n      return;\r\n    }\r\n\r\n    const unsubscribeAuth = onAuthStateChanged(auth, async (user) => {\r\n      if (user) {\r\n        setUserId(user.uid);\r\n        setIsAuthReady(true);\r\n      } else {\r\n        try {\r\n          if (initialAuthToken) {\r\n            await signInWithCustomToken(auth, initialAuthToken);\r\n          } else {\r\n            await signInAnonymously(auth);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error al iniciar sesin:\", error);\r\n          setError(`Error de autenticacin: ${error.message}`);\r\n        } finally {\r\n          setIsAuthReady(true);\r\n        }\r\n      }\r\n    });\r\n\r\n    return () => unsubscribeAuth();\r\n  }, [auth, initialAuthToken, setError]);\r\n\r\n  const handleClearOldActivity = async () => {\r\n    if (confirmClearText.toLowerCase() !== 'confirmar') {\r\n      setError('Por favor, escribe \"confirmar\" para proceder.');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      const batch = writeBatch(db);\r\n      const activitySnapshot = await getDocs(collection(db, 'userActivity'));\r\n\r\n      let deletedCount = 0;\r\n      activitySnapshot.forEach(doc => {\r\n        batch.delete(doc.ref);\r\n        deletedCount++;\r\n      });\r\n\r\n      if (deletedCount === 0) {\r\n        setSuccess(\"No haba actividades para eliminar.\");\r\n      } else {\r\n        await batch.commit();\r\n        setSuccess(`Todas las actividades han sido eliminadas correctamente. Total: ${deletedCount}.`);\r\n      }\r\n      setShowConfirmClearActivity(false);\r\n      setConfirmClearText('');\r\n    } catch (error) {\r\n      setError(`Error al eliminar actividades: ${error.message}. Por favor, verifica las reglas de seguridad de Firebase.`);\r\n      console.error(\"Error en batch commit:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmDeleteDailySales = async () => {\r\n    if (confirmDeleteDailySalesText.toLowerCase() !== 'eliminar') {\r\n      setError('Por favor, escribe \"eliminar\" para proceder.');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await handleDeleteDailyIngresos();\r\n      setShowConfirmDeleteDailySales(false);\r\n      setConfirmDeleteDailySalesText('');\r\n    } catch (error) {\r\n      setError(`Error al eliminar ventas del da: ${error.message}`);\r\n      console.error(\"Error al eliminar ventas diarias:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleViewActivityDetails = (activity) => {\r\n    setSelectedActivityDetail(activity);\r\n    setShowActivityDetailModal(true);\r\n  };\r\n\r\n  const chartTextColor = theme === 'dark' ? '#cbd5e1' : '#475569';\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 font-inter\">\r\n      <h2 className=\"text-3xl font-extrabold mb-8 text-gray-100 dark:text-white\">Dashboard</h2>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n        <div className={classNames(`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${theme === 'dark' ? 'gray-700' : 'gray-200'}`)}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-xl font-semibold text-gray-200 dark:text-gray-100\">Pedidos</h3>\r\n            <ShoppingCart className=\"text-blue-400 w-8 h-8\" />\r\n          </div>\r\n          <div className=\"space-y-3 text-base text-gray-300 dark:text-gray-400\">\r\n            <div className=\"flex justify-between\"><span>Total:</span><span className=\"font-bold text-gray-100\">{orders.length}</span></div>\r\n            <div className=\"flex justify-between\"><span>Pendientes:</span><span className=\"text-yellow-400 font-bold\">{statusCounts.Pending}</span></div>\r\n            <div className=\"flex justify-between\"><span>Entregados:</span><span className=\"text-green-400 font-bold\">{statusCounts.Delivered}</span></div>\r\n            <div className=\"flex justify-between\"><span>Cancelados:</span><span className=\"text-red-400 font-bold\">{statusCounts.Cancelled}</span></div>\r\n          </div>\r\n        </div>\r\n        <div className={classNames(`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${theme === 'dark' ? 'gray-700' : 'gray-200'}`)}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-xl font-semibold text-gray-200 dark:text-gray-100\">Totales Generales</h3>\r\n            <DollarSign className=\"text-green-400 w-8 h-8\" />\r\n          </div>\r\n          <div className=\"space-y-3 text-base text-gray-300 dark:text-gray-400\">\r\n            <div className=\"flex justify-between\"><span>Efectivo:</span><span className=\"font-bold text-gray-100\">${totals.cash.toLocaleString()}</span></div>\r\n            <div className=\"flex justify-between\"><span>DaviPlata:</span><span className=\"font-bold text-gray-100\">${totals.daviplata.toLocaleString()}</span></div>\r\n            <div className=\"flex justify-between\"><span>Nequi:</span><span className=\"font-bold text-gray-100\">${totals.nequi.toLocaleString()}</span></div>\r\n            <div className=\"flex justify-between\"><span className=\"font-bold text-gray-100\">Total:</span><span className=\"font-bold text-green-400\">${(totals.cash + totals.daviplata + totals.nequi).toLocaleString()}</span></div>\r\n          </div>\r\n        </div>\r\n        <div className={classNames(`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${theme === 'dark' ? 'gray-700' : 'gray-200'}`)}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-xl font-semibold text-gray-200 dark:text-gray-100\">Usuarios</h3>\r\n            <Users className=\"text-purple-400 w-8 h-8\" />\r\n          </div>\r\n          <div className=\"space-y-3 text-base text-gray-300 dark:text-gray-400\">\r\n            <div className=\"flex justify-between\"><span>Total:</span><span className=\"font-bold text-gray-100\">{users.length}</span></div>\r\n            <div className=\"flex justify-between\"><span>Administradores:</span><span className=\"font-bold text-gray-100\">{users.filter(u => u.role === 2).length}</span></div>\r\n            <div className=\"flex justify-between\"><span>Clientes:</span><span className=\"font-bold text-gray-100\">{users.filter(u => u.role === 1).length}</span></div>\r\n            <div className=\"flex justify-between\"><span>ID de Usuario:</span><span className=\"font-mono text-xs text-gray-500 break-all\">{userId}</span></div>\r\n          </div>\r\n        </div>\r\n        <div className={classNames(`bg-${theme === 'dark' ? 'gray-800' : 'white'} p-6 rounded-2xl shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border border-${theme === 'dark' ? 'gray-700' : 'gray-200'}`)}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-xl font-semibold text-gray-200 dark:text-gray-100\">Actividad Reciente</h3>\r\n            <Activity className=\"text-orange-400 w-8 h-8\" />\r\n          </div>\r\n          <div className=\"space-y-3 text-sm max-h-40 overflow-y-auto custom-scrollbar\">\r\n            {userActivity.length === 0 ? (\r\n              <p className=\"text-gray-400 text-center\">No hay actividad reciente.</p>\r\n            ) : (\r\n              userActivity.map((act, idx) => (\r\n                <div key={idx} className=\"flex justify-between items-start pb-2 border-b border-gray-700 last:border-b-0\">\r\n                  <span className=\"text-gray-400 flex-1 pr-2\">{act.action}</span>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <span className=\"text-gray-500 text-xs text-right\">{act.timestamp ? new Date(act.timestamp).toLocaleString() : 'N/A'}</span>\r\n                    {act.details && (\r\n                      <button\r\n                        onClick={() => handleViewActivityDetails(act)}\r\n                        className=\"text-blue-400 hover:text-blue-300 p-1 rounded-full\"\r\n                        title=\"Ver detalles de la actividad\"\r\n                      >\r\n                        <Info className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n          <div className=\"mt-4 text-center\">\r\n            <button\r\n              onClick={() => setShowConfirmClearActivity(true)}\r\n              className={classNames(\r\n                \"px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center mx-auto\",\r\n                theme === 'dark' ? 'bg-red-600 hover:bg-red-700 text-white' : 'bg-red-500 hover:bg-red-600 text-white'\r\n              )}\r\n            >\r\n              <Trash2 className=\"w-4 h-4 mr-2\" /> Limpiar TODAS las Actividades\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <DashboardCharts\r\n        dailySalesChartData={dailySalesChartData}\r\n        dailyOrdersChartData={dailyOrdersChartData}\r\n        statusPieChartData={statusPieChartData}\r\n        theme={theme}\r\n        chartTextColor={chartTextColor}\r\n        salesFilterRange={salesFilterRange}\r\n        setSalesFilterRange={setSalesFilterRange}\r\n        salesCustomStartDate={salesCustomStartDate}\r\n        setSalesCustomStartDate={setSalesCustomStartDate}\r\n        salesCustomEndDate={salesCustomEndDate}\r\n        setSalesCustomEndDate={setSalesCustomEndDate}\r\n        ordersFilterRange={ordersFilterRange}\r\n        setOrdersFilterRange={setOrdersFilterRange}\r\n        ordersCustomStartDate={ordersCustomStartDate}\r\n        setOrdersCustomStartDate={setOrdersCustomStartDate}\r\n        ordersCustomEndDate={ordersCustomEndDate}\r\n        setOrdersCustomEndDate={setOrdersCustomEndDate}\r\n        handleSaveDailyIngresos={handleSaveDailyIngresos}\r\n        handleDeleteDailyIngresos={() => setShowConfirmDeleteDailySales(true)}\r\n        handleSaveDailyOrders={handleSaveDailyOrders}\r\n        handleDeleteDailyOrders={handleDeleteDailyOrders}\r\n        loading={loadingData}\r\n        selectedMonth={selectedMonth}\r\n        setSelectedMonth={setSelectedMonth}\r\n      />\r\n      <Transition show={showConfirmClearActivity} as={Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowConfirmClearActivity(false)}>\r\n          <Transition.Child\r\n            as={Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-sm p-6 rounded-lg shadow-md text-center\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4\">Confirmar Limpieza de Actividad</Dialog.Title>\r\n                <p className=\"mb-4\">\r\n                  Ests a punto de eliminar <span className=\"font-bold text-red-500\">TODAS</span> las actividades registradas.\r\n                  Esta accin es irreversible. Para confirmar, escribe \"confirmar\" a continuacin:\r\n                </p>\r\n                <input\r\n                  type=\"text\"\r\n                  value={confirmClearText}\r\n                  onChange={e => setConfirmClearText(e.target.value)}\r\n                  className={classNames(\r\n                    \"w-full p-2 rounded-md border text-center text-sm\",\r\n                    theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                    \"focus:outline-none focus:ring-1 focus:ring-red-500\"\r\n                  )}\r\n                  placeholder=\"escribe 'confirmar'\"\r\n                />\r\n                <div className=\"mt-6 flex justify-center gap-2\">\r\n                  <button\r\n                    onClick={() => { setShowConfirmClearActivity(false); setConfirmClearText(''); }}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                    )}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    onClick={handleClearOldActivity}\r\n                    disabled={loading}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-600 hover:bg-red-700 text-white'\r\n                    )}\r\n                  >\r\n                    {loading ? 'Eliminando...' : 'Limpiar Actividad'}\r\n                  </button>\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n      <Transition show={showConfirmDeleteDailySales} as={Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowConfirmDeleteDailySales(false)}>\r\n          <Transition.Child\r\n            as={Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-sm p-6 rounded-lg shadow-md text-center\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <Dialog.Title className=\"text-lg font-medium mb-4\">Confirmar Eliminacin de Ventas del Da</Dialog.Title>\r\n                <p className=\"mb-4\">\r\n                  Ests a punto de eliminar las ventas registradas para <span className=\"font-bold text-red-500\">el da de hoy</span>.\r\n                  Esta accin es irreversible. Para confirmar, escribe \"eliminar\" a continuacin:\r\n                </p>\r\n                <input\r\n                  type=\"text\"\r\n                  value={confirmDeleteDailySalesText}\r\n                  onChange={e => setConfirmDeleteDailySalesText(e.target.value)}\r\n                  className={classNames(\r\n                    \"w-full p-2 rounded-md border text-center text-sm\",\r\n                    theme === 'dark' ? 'border-gray-600 bg-gray-700 text-white' : 'border-gray-200 bg-white text-gray-900',\r\n                    \"focus:outline-none focus:ring-1 focus:ring-red-500\"\r\n                  )}\r\n                  placeholder=\"escribe 'eliminar'\"\r\n                />\r\n                <div className=\"mt-6 flex justify-center gap-2\">\r\n                  <button\r\n                    onClick={() => { setShowConfirmDeleteDailySales(false); setConfirmDeleteDailySalesText(''); }}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                    )}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    onClick={handleConfirmDeleteDailySales}\r\n                    disabled={loading}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-600 hover:bg-red-700 text-white'\r\n                    )}\r\n                  >\r\n                    {loading ? 'Eliminando...' : 'Eliminar Ventas'}\r\n                  </button>\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n      <Transition show={showActivityDetailModal} as={Fragment}>\r\n        <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowActivityDetailModal(false)}>\r\n          <Transition.Child\r\n            as={Fragment}\r\n            enter=\"ease-out duration-300\"\r\n            enterFrom=\"opacity-0\"\r\n            enterTo=\"opacity-100\"\r\n            leave=\"ease-in duration-200\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n          >\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50\" />\r\n          </Transition.Child>\r\n          <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n            <Transition.Child\r\n              as={Fragment}\r\n              enter=\"ease-out duration-300\"\r\n              enterFrom=\"opacity-0 scale-95\"\r\n              enterTo=\"opacity-100 scale-100\"\r\n              leave=\"ease-in duration-200\"\r\n              leaveFrom=\"opacity-100 scale-100\"\r\n              leaveTo=\"opacity-0 scale-95\"\r\n            >\r\n              <Dialog.Panel className={classNames(\r\n                \"w-full max-w-md p-6 rounded-lg shadow-md\",\r\n                theme === 'dark' ? 'bg-gray-800 text-gray-200' : 'bg-gray-50 text-gray-900'\r\n              )}>\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                  <Dialog.Title className=\"text-lg font-medium\">Detalles de la Actividad</Dialog.Title>\r\n                  <button\r\n                    onClick={() => setShowActivityDetailModal(false)}\r\n                    className=\"text-gray-400 hover:text-gray-500\"\r\n                  >\r\n                    <X className=\"w-5 h-5\" />\r\n                  </button>\r\n                </div>\r\n                {selectedActivityDetail && (\r\n                  <div className=\"space-y-4 text-sm\">\r\n                    <div>\r\n                      <span className=\"font-medium\">Accin:</span> {selectedActivityDetail.action}\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Fecha:</span>{' '}\r\n                      {selectedActivityDetail.timestamp\r\n                        ? new Date(selectedActivityDetail.timestamp).toLocaleString()\r\n                        : 'N/A'}\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Detalles:</span>{' '}\r\n                      {typeof selectedActivityDetail.details === 'object'\r\n                        ? JSON.stringify(selectedActivityDetail.details, null, 2)\r\n                        : selectedActivityDetail.details || 'Sin detalles'}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                <div className=\"mt-6 flex justify-end\">\r\n                  <button\r\n                    onClick={() => setShowActivityDetailModal(false)}\r\n                    className={classNames(\r\n                      \"px-4 py-2 rounded-md text-sm font-medium\",\r\n                      theme === 'dark' ? 'bg-gray-600 hover:bg-gray-700 text-gray-200' : 'bg-gray-200 hover:bg-gray-300 text-gray-900'\r\n                    )}\r\n                  >\r\n                    Cerrar\r\n                  </button>\r\n                </div>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </Dialog>\r\n      </Transition>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;","// src/utils/classNames.js\r\nexport function classNames(...classes) {\r\n  return classes.filter(Boolean).join(' ');\r\n}"],"names":["ORDER_STATUS","ORDER_STATUS_DISPLAY","BAR_COLORS","PIE_COLORS","INGRESOS_COLLECTION","PEDIDOS_DIARIOS_GUARDADOS_COLLECTION","getDateRange","rangeType","start","end","today","Date","setHours","startDate","endDate","setDate","getDate","getFullYear","getMonth","SkeletonLoader","_ref","type","theme","isMobile","numBars","_jsx","className","children","Array","from","length","map","_","i","classNames","style","width","height","Math","random","copFormatter","Intl","NumberFormat","currency","minimumFractionDigits","CustomBarTooltip","_ref2","active","payload","label","chartTextColor","isOrderChart","total","reduce","sum","entry","value","formatValue","toLocaleString","format","_jsxs","motion","div","initial","opacity","y","animate","exit","backgroundColor","borderColor","backdropFilter","color","fontSize","index","name","CustomPieTooltip","_ref3","data","percent","toFixed","React","_ref4","dailySalesChartData","dailyOrdersChartData","statusPieChartData","salesFilterRange","setSalesFilterRange","salesCustomStartDate","setSalesCustomStartDate","salesCustomEndDate","setSalesCustomEndDate","ordersFilterRange","setOrdersFilterRange","ordersCustomStartDate","setOrdersCustomStartDate","ordersCustomEndDate","setOrdersCustomEndDate","handleSaveDailyIngresos","handleDeleteDailyIngresos","handleSaveDailyOrders","handleDeleteDailyOrders","handleSaveDailyExpenses","handleDeleteDailyExpenses","loading","selectedMonth","setSelectedMonth","isMobileDevice","setIsMobileDevice","useState","payments","setPayments","expenseFilterRange","setExpenseFilterRange","expenseCustomStartDate","setExpenseCustomStartDate","expenseCustomEndDate","setExpenseCustomEndDate","selectedRecipient","setSelectedRecipient","useEffect","paymentsQuery","query","collection","db","orderBy","unsubscribe","onSnapshot","snapshot","docs","doc","id","error","console","message","handleResize","checkIsMobile","window","addEventListener","removeEventListener","dailyExpensesChartData","useMemo","groupedByDate","acc","payment","timestamp","date","toDate","now","dateKey","toISOString","split","Total","amount","Object","values","sort","a","b","totalExpenses","totalOrders","aggregatedPaymentsByRecipient","grouped","storeName","store","totalAmount","push","entries","_ref5","paymentsForSelectedRecipient","filter","chartVariants","hidden","scale","visible","transition","duration","ease","chartMinWidth","chartHeight","dangerouslySetInnerHTML","__html","DollarSign","Popover","PopoverButton","MoreVertical","Transition","as","Fragment","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","PopoverPanel","onClick","disabled","Save","Trash2","onChange","e","target","variants","button","x","ArrowLeft","ResponsiveContainer","BarChart","margin","top","right","left","bottom","barCategoryGap","barGap","CartesianGrid","strokeDasharray","stroke","vertical","XAxis","dataKey","tick","fill","angle","textAnchor","interval","YAxis","tickFormatter","Tooltip","cursor","rx","content","Legend","wrapperStyle","paddingTop","paddingBottom","align","verticalAlign","iconType","Bar","radius","maxBarSize","animationDuration","monthKey","_Fragment","idx","_payment$timestamp","dateStyle","timeStyle","Package","val","isAnimationActive","TrendingUp","PieChart","Pie","cx","cy","outerRadius","innerRadius","Cell","strokeWidth","Label","position","fontWeight","dy","layout","initialAuthToken","__app_id","__initial_auth_token","setError","setSuccess","userId","setUserId","isAuthReady","setIsAuthReady","setLoading","showConfirmClearActivity","setShowConfirmClearActivity","confirmClearText","setConfirmClearText","showConfirmDeleteDailySales","setShowConfirmDeleteDailySales","confirmDeleteDailySalesText","setConfirmDeleteDailySalesText","showActivityDetailModal","setShowActivityDetailModal","selectedActivityDetail","setSelectedActivityDetail","loadingData","orders","users","totals","statusCounts","userActivity","useNavigate","useDashboardData","setLoadingData","setOrders","tableOrders","setTableOrders","setUsers","setTotals","cash","daviplata","nequi","setStatusCounts","Pending","Delivered","Cancelled","setUserActivity","ingresosData","setIngresosData","pedidosDiariosGuardadosData","setPedidosDiariosGuardadosData","setDailySalesChartData","setDailyOrdersChartData","setStatusPieChartData","initialLoadRefs","useRef","activity","ingresos","pedidosDiariosGuardados","checkIfAllLoaded","current","unsubscribes","ordersCollectionRef","unsubscribeOrders","ordersData","newTotals","newStatusCounts","forEach","order","_order$status","paymentSummary","orderStatus","status","toLowerCase","pieChartData","tableOrdersCollectionRef","unsubscribeTableOrders","tableOrdersData","usersCollectionRef","unsubscribeUsers","usersData","userActivityCollectionRef","unsubscribeActivity","timestampDate","Timestamp","getTime","ingresosColRef","unsubscribeIngresos","pedidosDiariosGuardadosColRef","unsubscribePedidosDiariosGuardados","pedidosData","monthNames","salesStartDate","salesEndDate","todayISO","chartData","filteredDailySales","summary","summaryDate","_filteredDailySales$s","_filteredDailySales$s2","_filteredDailySales$s3","String","padStart","Efectivo","Daviplata","Nequi","_filteredDailySales$s4","_filteredDailySales$s5","_filteredDailySales$s6","currentDayRealtimeCash","currentDayRealtimeDaviplata","currentDayRealtimeNequi","_filteredDailySales$t","_filteredDailySales$t2","_filteredDailySales$t3","_filteredDailySales$t4","_filteredDailySales$t5","_filteredDailySales$t6","_order$createdAt2","orderDate","createdAt","keys","monthlySales","currentYear","month","currentMonthKey","currentMonthRealtimeCash","currentMonthRealtimeDaviplata","currentMonthRealtimeNequi","_order$createdAt","parseInt","ordersStartDate","ordersEndDate","filteredDailyOrders","Domicilios","domicilios","Mesas","mesas","currentDayRealtimeDomicilios","currentDayRealtimeMesas","_filteredDailyOrders$","_filteredDailyOrders$2","_filteredDailyOrders$3","_filteredDailyOrders$4","_order$createdAt4","tableOrder","_tableOrder$createdAt2","monthlyOrders","currentMonthRealtimeDomicilios","currentMonthRealtimeMesas","_order$createdAt3","_tableOrder$createdAt","tableOrderDate","useCallback","async","currentDayCash","currentDayDaviplata","currentDayNequi","_order$createdAt5","_order$payment","_order$meals","_order$meals$","_order$meals$$payment","_order$meals$$payment2","paymentType","meals","currentDayTotalSales","q","where","existingSummarySnapshot","getDocs","empty","addDoc","totalSales","serverTimestamp","updatedAt","docToUpdate","updateDoc","docToDelete","deleteDoc","currentDayDomicilios","currentDayMesas","_order$createdAt6","_tableOrder$createdAt3","auth","warn","unsubscribeAuth","onAuthStateChanged","user","uid","signInWithCustomToken","signInAnonymously","ShoppingCart","Users","u","role","Activity","act","action","details","handleViewActivityDetails","title","Info","DashboardCharts","show","Dialog","onClose","Child","Panel","Title","placeholder","batch","writeBatch","activitySnapshot","deletedCount","delete","ref","commit","X","JSON","stringify","_len","arguments","classes","_key","Boolean","join"],"sourceRoot":""}